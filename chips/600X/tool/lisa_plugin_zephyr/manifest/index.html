<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">提货单 | 聆思文档中心</title><meta data-react-helmet="true" property="og:url" content="https://github.com/LISTENAI/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/manifest"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="提货单 | 聆思文档中心"><meta data-react-helmet="true" name="description" content="此页面包含有关 lisa zep 的多存储库模型、提货单文件和 lisa zep manifest 命令的详细信息。"><meta data-react-helmet="true" property="og:description" content="此页面包含有关 lisa zep 的多存储库模型、提货单文件和 lisa zep manifest 命令的详细信息。"><link data-react-helmet="true" rel="shortcut icon" href="/docs-csk6/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/LISTENAI/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/manifest"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/manifest" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/manifest" hreflang="x-default"><link rel="stylesheet" href="/docs-csk6/assets/css/styles.f018d340.css">
<link rel="preload" href="/docs-csk6/assets/js/runtime~main.020f38f0.js" as="script">
<link rel="preload" href="/docs-csk6/assets/js/main.5a2ba94c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_vO2r">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a><a class="navbar__item navbar__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a><a class="navbar__item navbar__link" href="/docs-csk6/tools/LStudio">工具</a><a class="navbar__item navbar__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a><a class="navbar__item navbar__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs-csk6/FAQ/front_page">FAQ</a><a class="navbar__item navbar__link" href="/docs-csk6/school/school">视频课程</a><a class="navbar__item navbar__link" href="/docs-csk6/workorder/workorder">工单</a><div class="react-toggle displayOnlyInLargeViewport_a-w0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_8pH0"><img src="/docs-csk6/img/light.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/unlight.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div><div class="react-toggle-track-x"><span class="toggle_8pH0"><img src="/docs-csk6/img/undark.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/dark.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/tools/LStudio">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/FAQ/front_page">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/school/school">视频课程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/workorder/workorder">工单</a></li></ul></div></div></div></nav><nav class="navbar subnavbar--fixed-top sub-navbar"><div class="navbar__inner subnavbar__inner"><div class="navbar__items"><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/4002/Chip_information_4002">CSK4002</a><a aria-current="page" class="subnavbar__item subnavbar__link subnavbar__link--active" dirname="/chips" href="/docs-csk6/chips/600X/overview/chips">CSK6开发指南</a><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/micropython/index">MicroPython</a></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_Ol8-"><aside class="docSidebarContainer_UfDv"><div class="sidebar_OMtR"><nav class="menu menu--responsive thin-scrollbar menu_2y2e menuWithAnnouncementBar_Lwkw" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_IcOF" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/600X/overview/read_guide">导读</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/600X/overview/chips">芯片介绍</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">开发套件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_introduction">简介</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">套件组合</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/kit/audio_kit">语音开发套件</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">使用指南</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">NanoKit开发板</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_csk6002_9s_nano">csk6002-9s-nano</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_csk6011a_9s_nano">csk6011a-9s-nano</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">功能扩展模块</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_audio">语音功能模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_extend">引脚扩展板</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">快速开始</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/getting_start">快速开始</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">基础入门</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/application_development">初识应用开发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">烧录</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/csk6_load">CSK6 烧录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/csk6_burn">CSK6 串口烧录协议说明</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">调试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-daplink">基于 DAPLink 的 GDB 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-jlink">基于 J-Link 的 GDB 调试</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">开发实践</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">外设驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/overview">外设驱动的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/gpio">GPIO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/pwm">PWM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/UART">UART</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/I2C">I2C</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/spi">SPI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/ADC">SAR ADC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/RTC">RTC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/watchdog">WatchDog</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/timer">Timer定时器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/multithread">多线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_semaphore">信号量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_mutex">互斥量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_poll">轮询</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/thread_analyzer">线程分析器的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/workqueue">工作队列的使用</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/logger">日志输出</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/usb_class">USB 模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/display_kscan">显示&amp;触摸</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/lvgl">LVGL 显示组件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/shell_sample">Shell 的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/nvs">NVS 的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/filesystem">文件系统的使用</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">音频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record">录音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_playback">播音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record_play">录音和播音示例</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">网络</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/wifi_connect">WIFI连接</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/net_socket">网络连接</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/customdriver/custom-driver-video">添加自定义驱动</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义板型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/board">添加自定义板型</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">AI 能力</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">图像识别</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">头肩&amp;手势识别</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/user_guide">用户操作指引</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/viewer_usage">PC 查看工具</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/api">接口说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/faq">疑难解答</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">进阶专题</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/threads">线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/scheduling">调度</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/system_threads">系统线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/workqueue">工作队列线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/interrupts">中断</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/semaphores">信号量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/mutexes">互斥量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/timing/timers">定时器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/heap">堆管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/datapassing/message_queues">消息队列</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/fifos">FIFOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/data_passing/pipes">管道</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/logging">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/portability/posix">POSIX 支持</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/shell">Shell</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/storage/nvs">非易失性存储 (NVS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/storage/flash_map">Flash map</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">构建与配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/cmake/index">构建系统（ CMake ）</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">设备树</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/intro">设备树概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/design">设计目标</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/bindings">设备树绑定</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/howtos">设备树操作指引</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api_usage">在 C/C++ 中访问设备树</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/troubleshooting">问题排查</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/dt_vs_kconfig">设备树 VS Kconfig</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">API 引用</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api/api">设备树 API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api/bindings">绑定索引</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">Kconfig配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_gui">Kconfig交互界面</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_configuration">设置Kconfig配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_tips_and_demo">小贴士与最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_custom">自定义 Kconfig 预处理函数</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_extension">Kconfig 拓展</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/zephyr_cmake_package">Zephyr CMake Package(包)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules">模块</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">硬件支持</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/hardware/pinctrl">引脚控制</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/hardware/peripherals">外设接口</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--first menu__link--sublist menu__link--active" type="first" href="#!">开发工具</a><ul class="menu__list"><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--sublist menu__link--active" type="" href="#!" tabindex="0">lisa zephyr 命令行工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/install">安装/更新</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/basic">基础命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/command_detail">内置命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/build_flash_debug">编译 烧录 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/filesystem">文件系统相关</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/manifest">提货单</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/application_project">应用级提货单</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/trouble_shooting">疑难解答</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/release_note">lisa zep 更新日志</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">vscode开发插件推荐</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/vscode_plugin/code_completion">代码补全</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/vscode_plugin/debug">调试</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/FAQ/index">常见问题</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/quick_start/doc_issue">提交新问题</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">索引查询</a><ul class="menu__list"><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/doxygen/html/index.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Zephyr API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/kconfig.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Kconfig 检索<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/reference/devicetree/bindings.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>设备树绑定索引<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_dRYS"><div class="container padding-top--md padding-bottom--lg center-container"><div class="row"><div class="col docItemCol_+xOG"><div class="docItemContainer_c+5G"><article><div class="markdown"><header><h1 class="h1Heading_5RMM">提货单</h1></header><p>此页面包含有关 lisa zep 的多存储库模型、提货单文件和 <code>lisa zep manifest</code> 命令的详细信息。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="多存储库模型"></a>多存储库模型<a class="hash-link" href="#多存储库模型" title="Direct link to heading">#</a></h2><p>lisa zep 对 <a href="https://docs.zephyrproject.org/latest/glossary.html#term-west-workspace" target="_blank" rel="noopener noreferrer">SDK 工作区</a> 中的存储库及其历史的总览如下图所示（尽管此示例的某些部分特定于上游 Zephyr 对 lisa zep 的使用）：</p><p><img alt="west-mr-model" src="/docs-csk6/assets/images/west-mr-model-fd8b9a10c340963800405adab761e46b.png"></p><p>提货单仓库的历史是一条浮动在灰色平面上的 Git 提交。父提交指向子提交使用实线箭头。下面的平面包含了工作区中的所有项目仓库的 Git 提交历史，其中每个项目仓库都由一个矩形框架包围。在每个项目仓库中，父/子提交关系也用实线箭头显示。</p><p>提货单仓库中的每个提交（同样，对于上游 Zephyr，这是 zephyr 仓库本身）都有一个提货单文件。提货单文件在每个提交中指定了对应于每个项目仓库的提交。这个关系在图中用虚线箭头显示。每个虚线箭头指向提货单仓库中的提交，并且指向项目仓库中的提交。</p><p>请注意以下重要细节：</p><ul><li><p>可以添加项目（如在提货单仓库提交 <code>D</code> 和 <code>E</code> 之间 <code>P1</code>），也可以删除项目（同一提货单仓库提交之间的 <code>P2</code>）</p></li><li><p>项目和提货单仓库历史不必顺序相邻：</p><ul><li><code>P2</code> 从 <code>A</code> 到 <code>B</code> 不变，同时 <code>P1</code> 和 <code>P3</code> 从 <code>F</code> 到 <code>G</code> 不变。</li><li><code>P3</code> 自 <code>A → B</code> 向前移动</li><li><code>P3</code> 自 <code>C → D</code> 向后移动</li></ul><p>在项目历史中向后移动的一种用法是通过回到引入回归之前的修订来 “回滚” 回归。</p></li><li><p>项目仓库提交可以被跳过：<code>P3</code> 从 <code>B → C</code> 向前移动多个提交。</p></li><li><p>在上面的图中，没有项目仓库 “同时” 有两个修订：每个提货单文件都只引用一个项目中的提交。这可以通过使用分支名作为提货单修订来放宽，但代价是能够分清提货单仓库历史。</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="提货单文件"></a>提货单文件<a class="hash-link" href="#提货单文件" title="Direct link to heading">#</a></h2><p>提货单(manifest)是 YAML 文件。有一个顶级货单栏和一些子栏，如下所示:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    # 项目 URL 的简称</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    # 项目清单</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    # 默认项目配置</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    # 与货单存储相关的配置</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    # 例如，包含 manifest.yml 的存储库</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  version: &quot;&lt;schema-version&gt;&quot;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    # 要启用或者禁用的项目组列表</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在 YAML 术语中，YAML 文件包含一个带有 manifest 字段。</p><p>manifest 包含子字段，如 <code>default</code>, <code>remotes</code>, <code>projects</code>, <code>self</code>。当然，manifest 的子字段都是可选的。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="remotes"></a>Remotes<a class="hash-link" href="#remotes" title="Direct link to heading">#</a></h2><p><code>remotes</code> 指定远端项目的 URL 地址。</p><p>每一个 <code>remotes</code> 都有一个 <code>name</code>(名称) 和 一个 <code>url-base</code> 字段，这为项目提供了完整 Git 项目的 URL 地址。可以通过将特定于项目的路径附加到远程 URL 库来设置项目的 URL（正如我们将在下面看到的，项目还可以指定它们完成的 URL）。</p><p>例如:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: remote1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/base1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: remote2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/base2</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>下面表格列出了 <code>remotes</code> 中的字段和说明。</p><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td>必须，remote 的唯一名称</td></tr><tr><td>url-base</td><td>必须，远程项目的 URL 地址</td></tr></tbody></table><p>上面示例给出两个 <code>remote</code>，分别名为 <code>remote1</code> 和 <code>remote2</code>。<code>url-base</code> 项目的地址分别是 <code>https://git.example.com/base1</code> 和 <code>https://git.example.com/base2</code>，你也可以使用 <code>SSH</code> URL 地址方式，只要是 Git 支持的格式就行。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="projects"></a>Projects<a class="hash-link" href="#projects" title="Direct link to heading">#</a></h2><p><code>projects</code> 是一个项目仓库的序列列表。其中每一个项目都有一个唯一(name)名称，可以指定项目 Git 远程 URL 地址，项目的修改提交 commit，以及项目应该存放在本机上的哪个路径下。</p><p>下面这个例子，我们假设上面给出 <code>remotes</code>：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: proj1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: remote1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: extra/project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: proj2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      repo-path: my-path</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: remote2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: v1.3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: proj3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://github.com/user/project-three</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: abcde413a111</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: remote1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/base1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: remote2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/base2</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>上面的 YAML 文件：</p><ul><li><p><code>proj1</code> 有一个 <code>remote</code> 值为 <code>remote1</code> 的字段，它的 Git 项目 URL 地址为：<code>https://git.example.com/base1/proj1</code> ，URL 地址由 <code>remotes</code> 中 <code>url-base</code> 后面附加一个 / 和项目名来组合成 URL。</p><p>在本地，这个项目会被克隆到 CSK SDK 工作空间的根目录下的 extra/project-1 目录中，<code>path</code> 字段指定了这个值。</p><p>由于没有指定项目 commit，默认情况下使用 master 分支。当下一次更新时，项目的最新提交将作为一个分离的 HEAD 来更新。</p></li><li><p><code>proj2</code> 有一个 <code>remote</code> 和 <code>repo-path</code> 字段，所以它的 URL 地址是： <code>https://git.example.com/base2/my-path</code>。如果 <code>repo-path</code> 字段存在，它会在拉取项目仓库 URL 时覆盖默认的名称。</p><p>由于项目没有 <code>path</code> 字段，因此默认情况下使用其名称，它会被克隆到一个名为 proj2 的目录中。当更新时，<code>revision</code> v1.3 的 Git tag 将会被更新到本地上。</p></li><li><p><code>proj3</code>有一个 url 字段，更新时将会从这个 URL 中更新项目。</p><p>本地路径默认的名称为 <code>proj3</code>，下一次更新时将会从提交 abcde413a111 更新。</p></li></ul><p>下表列出了可用 <code>projects</code> 字段和说明：</p><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td>必须的，项目的唯一名称，名称不能是保留值 &quot;west&quot; 或 &quot;manifest&quot; 之一，该名称在 YAML 文件中必须是唯一的。</td></tr><tr><td>remote, url</td><td>必须有其中一个，不需要两个都写。如果 <code>project</code> 有 <code>remote</code> 字段，那么 <code>remotes</code> 的 <code>url-base</code> 字段将与 <code>project</code> 的 <code>name</code> （或者 <code>repo-path</code>， 如果有的话） 字段组合形成一个 URL</td></tr><tr><td>repo-path</td><td>可选，如果值不为空，那么将会跟 <code>remotes</code> 的 <code>url-base</code> 字段组合成 URL，而不是跟 <code>project</code> 中 <code>name</code>，<code>project</code> 不能同时存在 <code>url</code> 和 <code>repo-path</code> 字段</td></tr><tr><td>revision</td><td>可选，SDK 更新时会从该字段拉取代码更新。默认情况下，这会创建一个新的 HEAD 分支出来以避免与本地分支造成冲突。如果该字段不填，则使用 <code>defaults</code> 中 <code>revision</code> 字段(如果存在的话)。<code>project</code> <code>revision</code> 可以是分支(branch)，标签(tag) 或者 SHA。 如果未指定其他的值，则默认 <code>revision</code> 为 master</td></tr><tr><td>path</td><td>可选，克隆仓库到本地 SDK 的顶层目录的相对路径。如果缺少 <code>project</code> 的 <code>name</code> 字段，则将其用作目录名称</td></tr><tr><td>clone-path</td><td>可选，如果给定，一个正整数，它在克隆的仓库中创建一个浅历史，限制为给定的提交数量。这只能在如果 <code>revision</code> 字段的值是一个分支(branch)或者标签(tag) 时使用</td></tr><tr><td>west-commands</td><td>如果给定，它的值是项目中 YAML 文件的相对路径，该文件描述了该项目提供的其他 west 命令。这个文件按照惯例命名为 west-commands.yml。</td></tr><tr><td>import</td><td>可选，如果为 <code>true</code> 则将项目从给定仓库中的 YAML 文件导入到当前 YAML 文件中。</td></tr><tr><td>groups</td><td>可选，项目所属的组(group)列表，请参阅 <a href="#%E9%A1%B9%E7%9B%AE%E7%BB%84%E4%B8%8E%E6%B4%BB%E8%B7%83%E7%9A%84%E9%A1%B9%E7%9B%AE">项目组与活跃的项目</a></td></tr><tr><td>submodules</td><td>可选，你可以使用 <code>lisa zep update</code> 更新代码同时更新 Git 子模块的代码，请参阅 <a href="#%E9%A1%B9%E7%9B%AE%E7%9A%84git%E5%AD%90%E6%A8%A1%E5%9D%97">项目的 Git 子模块</a></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="defaults"></a>Defaults<a class="hash-link" href="#defaults" title="Direct link to heading">#</a></h2><p><code>defaults</code> 字段可以为项目提供默认值，可以指定 <code>remote</code> 中 <code>name</code> 和 <code>revision</code>。另一种使用默认值编写相同提货单的方法是:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: remote1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    revision: v1.3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: remote1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/base1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: remote2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/base2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: proj1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: extra/project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: master</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: proj2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      repo-path: my-path</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: remote2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: proj3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://github.com/user/project-three</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: abcde413a111</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>下表列出 <code>defaults</code> 可用的字段和说明：</p><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>remote</td><td>可选，如果 <code>project</code> 中没有 <code>url</code> 和 <code>remote</code> 字段，那么这个字段将会默认为 <code>projects</code> 中 <code>remote</code> 字段的值</td></tr><tr><td>revision</td><td>可选，如果 <code>project</code> 中没有 <code>revision</code> 字段，那么这个字段会默认为 <code>projects</code> 中 <code>revision</code> 字段的值</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="self"></a>Self<a class="hash-link" href="#self" title="Direct link to heading">#</a></h2><p><code>self</code> 字段用于控制提货单仓库本身。</p><p>作为一个例子，让我们看一下 zephyr 仓库的 West.yml 的这个片段:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    path: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    west-commands: scripts/west-commands.yml</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这确保了 zephyr 仓库被克隆到路径 <code>zephyr</code> 中，self 字段声明了 west-commands.yml 文件所在的路径，其路径相对仓库根目录中的 <code>scripts</code> 文件夹下。</p><p>下表列出 <code>self</code> 可用的字段和说明：</p><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>path</td><td>可选，克隆项目到相对于 SDK 顶层目录的相对路径。如果未指定值，则默认情况下将使用提货单仓库 URL 中的路径组件的基名。例如，如果 URL 是 <code>https://git.example.com/project-repo</code>，则仓库将被克隆到目录 project-repo</td></tr><tr><td>west-commands</td><td>可选，跟 <code>project</code> 中 <code>west-commands</code> 字段意思一样</td></tr><tr><td>import</td><td>可选，跟 <code>project</code> 中 <code>west-commands</code> 字段意思一样，但是允许从提货单仓库中其他文件导入项目</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="项目组与活跃的项目"></a>项目组与活跃的项目<a class="hash-link" href="#项目组与活跃的项目" title="Direct link to heading">#</a></h2><p>你可以使用 <code>groups</code> 和 <code>group-filter</code> 字段将 <a href="#%E6%8F%90%E8%B4%A7%E5%8D%95%E6%96%87%E4%BB%B6">提货单文件</a> 项目分组，并过滤哪些启用的组。这些字段在提货单文件中描述如下:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: some-project</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups: ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: ...</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>你可以使用 <code>group-filter</code> 字段来启用或禁用项目组(即 <code>projects</code> 中的 <code>groups</code>)。所有 <code>groups</code> 都被禁用的 <code>project</code> 是不可用的，lisa zep 会忽略这些项目，除非你要求不要忽略它们。</p><p>下一章介绍 (project groups) 项目组；下面的章节介绍 <a href="#%E5%90%AF%E7%94%A8%E5%92%8C%E7%A6%81%E7%94%A8%E9%A1%B9%E7%9B%AE%E7%BB%84">启用和禁用的项目组</a> 和 <a href="#%E5%8F%AF%E7%94%A8%E5%92%8C%E4%B8%8D%E5%8F%AF%E7%94%A8%E9%A1%B9%E7%9B%AE">可用和不可用的项目</a>。并且会附带上讲解的例子。</p><p>最后，<a href="#%E7%BB%84%E8%BF%87%E6%BB%A4%E5%92%8C%E5%AF%BC%E5%85%A5">组过滤和导入</a> 简单概述了如何与 <a href="#%E5%AF%BC%E5%85%A5%E6%8F%90%E8%B4%A7%E5%8D%95">导入提货单</a> 功能交互。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="项目组"></a>项目组<a class="hash-link" href="#项目组" title="Direct link to heading">#</a></h3><p>你可以在 <code>manifest: projects:</code> 中添加一个项目到一个或多个组。<code>groups</code> 字段是一个组名列表，组名是字符串。</p><p>例如，在这个提货单片段中：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupC</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-3</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在这些项目中的组：</p><ul><li><code>project-1</code>：一个组，名为 <code>groupA</code></li><li><code>project-2</code>：两个组，名为 <code>groupB</code> 和 <code>groupC</code></li><li><code>project-3</code>：没有组</li></ul><p>项目组名不能包含逗号 (,)、冒号 (:) 或空格。</p><p>组名不能以减号 (-) 或加号 (+) 开头，但是它们可以在名称内包含这些字符。例如，<code>foo-bar</code> 和 <code>foo+bar</code> 是有效的组，但是 <code>-foobar</code> 和 <code>+foobar</code> 不是。</p><p>组名是任意字符串，组名是大小写敏感的。</p><p>任何项目不能同时使用 <code>import:</code> 和 <code>groups:</code> (这避免了一些语义难以指定的边界情况)。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="启用和禁用项目组"></a>启用和禁用项目组<a class="hash-link" href="#启用和禁用项目组" title="Direct link to heading">#</a></h3><p>默认情况下启用所有的项目组，你可以在提货单文件中启用或禁用组。</p><p>在提货单文件中，<code>manifest: group-filter:</code> 是一个 YAML 列表，用于启用和禁用组。</p><p>要启用组，请在其名称前加上加号 (+)。例如，启用 <code>groupA</code> 的例子：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [+groupA]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>尽管对于默认启用的组来说是多余的，但是它可以用来覆盖导入的提货单文件中的设置。请参见 <a href="#%E7%BB%84%E8%BF%87%E6%BB%A4%E5%92%8C%E5%AF%BC%E5%85%A5">组过滤和导入</a>。</p><p>要禁用组，请在其名称前加上减号 (-)。例如，禁用 <code>groupA</code> 和 <code>groupB</code> 的例子：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-groupA,-groupB]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>因为 <code>group-filter</code> 是一个 YAML 列表，所以你可以写成这样：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - -groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - -groupB</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>但是，这种语法显得更难读不易于理解，所以不建议使用。</p></div></div><p>除了提货单文件外，你可以使用 <code>manifest.group-filter</code> 配置选项来决定哪些组启用或者禁用。这个选项是一个用逗号分隔的组列表，用于启用或禁用组。</p><p>要启用一个组，请将其名称添加到列表前缀为 + 列表中。要禁用一个组，请将其名称添加到列表前缀为 - 列表中。例如，设置 <code>manifest.group-filter</code> 为 <code>+groupA</code>,<code>-groupB</code> 启用 <code>groupA</code>，禁用 <code>groupB</code>。</p><p>配置选项的值会覆盖提货单文件中任何数据。你可以将其看作是将 <code>manifest.group-filter</code> 配置选项添加到 YAML 的 <code>manifest: group-filter:</code> 列表中，并且有着 &quot;最后一个获胜&quot; 的语义。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="可用和不可用项目"></a>可用和不可用项目<a class="hash-link" href="#可用和不可用项目" title="Direct link to heading">#</a></h3><p>默认情况下，所有的项目都是可用状态。没有组(groups)的项目(projects)也始终处于可用状态。如果所有的组都被禁用，那么项目就处于不可用状态。这是禁用项目的唯一方式。</p><p>默认情况下，大多数对项目操作的 lisa zep 命令将忽略不可用的项目。例如，当运行不带参数的 <code>lisa zep update</code> 命令时不会更新不可用的项目。另一个例子是，运行 <code>lisa zep list</code> 命令时不会打印不可用的项目的信息。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="项目组示例"></a>项目组示例<a class="hash-link" href="#项目组示例" title="Direct link to heading">#</a></h3><p>本节包含项目组和可用项目的示例，示例使用 <code>manifest: group-filter:</code> YAML 列表和 <code>manifest.group-filter</code> 配置列表来演示如何一起工作。</p><p>请注意，以下提货单中的 <code>defaults</code> 和 <code>remotes</code> 的数据不是有关联的，只是为了使示例完整且独立。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-1没有禁用的组"></a>示例 1：没有禁用的组<a class="hash-link" href="#示例-1没有禁用的组" title="Direct link to heading">#</a></h4><p>整个提货单文件如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>manifest.group-filter</code> 配置选项没有设置（你可以通过运行 <code>lisa zep config -D manifest.group-filter</code> 来确保这一点）。</p><p>没有组被禁用，因为所有组都是默认可用的。因此，三个项目（<code>foo</code>, <code>bar</code>, 和 <code>baz</code>）都是可用的。请注意，没有办法禁用项目 <code>baz</code>，因为它没有组。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-2禁用一个组"></a>示例 2：禁用一个组<a class="hash-link" href="#示例-2禁用一个组" title="Direct link to heading">#</a></h4><p>整个提货单文件如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-groupA]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>由于 <code>groupA</code> 已禁用，项目 <code>foo</code> 是不可用的。项目 <code>bar</code> 是可用的，因为 <code>groupB</code> 没有被禁用。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-3禁用多个组"></a>示例 3：禁用多个组<a class="hash-link" href="#示例-3禁用多个组" title="Direct link to heading">#</a></h4><p>整个提货单文件如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-groupA,-groupB]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>foo</code> 和 <code>bar</code> 都是不可用的，因为它们的所有组都被禁用了。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-4通过配置禁用一个组"></a>示例 4：通过配置禁用一个组<a class="hash-link" href="#示例-4通过配置禁用一个组" title="Direct link to heading">#</a></h4><p>整个提货单文件如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>将 <code>manifest.group-filter</code> 配置项设置为 <code>-groupA</code> (你可以通过运行 <code>lisa zep config manifest.group-filter -- -groupA</code> 来确保这一点；额外的 <code>--</code> 是必要的，因为命令行参数解析器不会认为 <code>-groupA</code> 为命令行选项 <code>-g</code> 且值为 <code>roupA</code>);</p><p>那么整个提货单文件变成这样：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-groupA]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>项目 <code>foo</code> 是不可用的，因为 <code>groupA</code> 已被 <code>manifest.group-filter</code> 配置项禁用了。项目 <code>bar</code> 是可用的，因为 <code>groupB</code> 没有被禁用。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-5通过配置覆盖禁用的组"></a>示例 5：通过配置覆盖禁用的组<a class="hash-link" href="#示例-5通过配置覆盖禁用的组" title="Direct link to heading">#</a></h4><p>整个提货单文件如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-groupA]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>将 <code>manifest.group-filter</code> 配置项设置为 <code>+groupA</code> (你可以通过运行 <code>lisa zep config manifest.group-filter +groupA</code> 来确保这一点);</p><p>那么整个提货单文件变成这样：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [+groupA]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在这种情况下，<code>groupA</code> 已启用：<code>manifest.group-filter</code> 配置项的优先级高于提货单文件中的 <code>manifest: group-filter:</code> <code>[-groupA]</code>。</p><p>因此，项目 <code>foo</code> 和 <code>bar</code> 都是可用的。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-6通过配置覆盖多个禁用的组"></a>示例 6：通过配置覆盖多个禁用的组<a class="hash-link" href="#示例-6通过配置覆盖多个禁用的组" title="Direct link to heading">#</a></h4><p>整个提货单文件如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-groupA,-groupB]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>将 <code>manifest.group-filter</code> 配置项设置为 <code>+groupA,+groupB</code> (你可以通过运行 <code>lisa zep config manifest.group-filter &quot;+groupA,+groupB&quot;</code> 来确保这一点)。</p><p>那么整个提货单文件变成这样：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [+groupA,+groupB]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在这种情况下，<code>groupA</code> 和 <code>groupB</code> 都已启用，因为配置值覆盖了提货单文件中两个组的内容。</p><p>因此，项目 <code>foo</code> 和 <code>bar</code> 都是可用的。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-7通过配置禁用多个组"></a>示例 7：通过配置禁用多个组<a class="hash-link" href="#示例-7通过配置禁用多个组" title="Direct link to heading">#</a></h4><p>整个提货单文件如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>将 <code>manifest.group-filter</code> 配置项设置为 <code>-groupA,-groupB</code> (你可以通过运行 <code>lisa zep config manifest.group-filter -- &quot;-groupA,-groupB&quot;</code> 来确保这一点)。</p><p>那么整个提货单文件变成这样：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupA</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - groupB</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-groupA,-groupB]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这种情况下，<code>groupA</code> 和 <code>groupB</code> 已禁用。</p><p>因此，项目 <code>foo</code> 和 <code>bar</code> 都是不可用的。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="组过滤和导入"></a>组过滤和导入<a class="hash-link" href="#组过滤和导入" title="Direct link to heading">#</a></h3><p>本节简单介绍 <code>manifest: group-filter</code> 的值结合提货单导入的原理。有关更详细的信息，请参阅 <a href="#%E6%8F%90%E8%B4%A7%E5%8D%95%E5%AF%BC%E5%85%A5%E8%AF%A6%E6%83%85">提货单导入详情</a>。</p><p>简而言之：</p><ul><li>如果你只导入一个提货单，<code>group-filter</code> 中禁用的组也会在你的提货单中禁用</li><li>你可以覆盖提货单文件中的 <code>manifest: group-filter:</code> 值，SDK 中的 <code>manifest.group-filter</code> 配置项，或者两者都覆盖。</li></ul><p>这里有些例子。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-1无覆盖"></a>示例 1：无覆盖<a class="hash-link" href="#示例-1无覆盖" title="Direct link to heading">#</a></h4><p>你正在使用这个 <code>parent/west.yml</code> 提货单：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># parent/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: child</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/child</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - unstable</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>child/west.yml</code> 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># child/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-unstable]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - unstable</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>只有 <code>child</code> 和 <code>project-2</code> 在已解析的提货单中是可用的。</p><p>在 <code>child/west.yml</code> 中，组 <code>unstable</code> 已禁用，而这个组没有被 <code>parent/west.yml</code> 覆盖。因此，已解析的提货单的 <code>group-filter</code> 值是 <code>[-unstable]</code>。</p><p>由于项目 <code>project-1</code> 和 <code>project-3</code> 在组 <code>unstable</code> 中，并且没有在任何其他组中，因此它们是不可用的。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-2覆盖导入的group-filter"></a>示例 2：覆盖导入的group-filter<a class="hash-link" href="#示例-2覆盖导入的group-filter" title="Direct link to heading">#</a></h4><p>你正在使用这个 <code>parent/west.yml</code> 提货单：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># parent/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [+unstable,-optional]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: child</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/child</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - unstable</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>child/west.yml</code> 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># child/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-unstable]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - optional</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - unstable</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>只有 <code>child</code>, <code>project-1</code> 和 <code>project-3</code> 项目是可用的。</p><p><code>child/west.yml</code> 中的 <code>[-unstable]</code> <code>group filter</code> 被 <code>parent/west.yml</code> 覆盖，因此组 <code>unstable</code> 处于可用状态。由于项目 <code>project-1</code> 和 <code>project-3</code> 在组 <code>unstable</code> 中，因此它们也是可用的。</p><p>同理， <code>parent/west.yml</code> 文件禁用了组 <code>optional</code>，因此项目 <code>project-2</code> 是不可用的。</p><p><code>parent/west.yml</code> 中指定的 <code>group-filter</code> 值是 <code>[+unstable,-optional]</code>。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="示例-3通过配置覆盖导入的group-filter"></a>示例 3：通过配置覆盖导入的group-filter<a class="hash-link" href="#示例-3通过配置覆盖导入的group-filter" title="Direct link to heading">#</a></h4><p>你正在使用这个 <code>parent/west.yml</code> 提货单：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># parent/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: child</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/child</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - unstable</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>child/west.yml</code> 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># child/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  group-filter: [-unstable]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - optional</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/project-3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - unstable</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>如果你运行：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep config manifest.group-filter +unstable,-optional</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>那么只有 <code>child</code>、<code>project-1</code> 和 <code>project-3</code> 项目是可用的。</p><p><code>child/west.yml</code> 中的 <code>-unstable</code> <code>group filter</code> 在 <code>manifest.group-filter</code> 配置选项被覆盖，因此 <code>unstable</code> 组处于可用状态。由于项目 <code>project-1</code> 和 <code>project-3</code> 在 <code>unstable</code> 组中，所以它们也是可用的。</p><p>同理，配置项禁用了 <code>optional</code> 组，所以 <code>project-2</code> 是不可用的。</p><p>最后一个 group filter 由 <code>parent/west.yml</code> 指定，然后，<code>manifest.group-filter</code> 配置项的值是 <code>[+unstable,-optional]</code>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="项目的git子模块"></a>项目的Git子模块<a class="hash-link" href="#项目的git子模块" title="Direct link to heading">#</a></h2><p>你可以使用 <a href="#%E6%8F%90%E8%B4%A7%E5%8D%95%E6%96%87%E4%BB%B6">上面</a> 描述的简短的 submodules 字段来强制 <code>lisa zep update</code> 处理项目的 git 仓库中配置的任何 <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules" target="_blank" rel="noopener noreferrer">Git 子模块</a>。submodules 字段可以放到 projects 字段中，如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: some-project</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      submodules: ...</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>submodules</code> 字段可以是布尔值或者是映射(mappings)列表。我们将按顺序描述这些。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="选项-1布尔值"></a>选项 1：布尔值<a class="hash-link" href="#选项-1布尔值" title="Direct link to heading">#</a></h3><p>这是使用 <code>submodules</code> 最简单的方式。</p><p>如果 <code>submodules</code> 字段是 <code>true</code>，那么 <code>lisa zep update</code> 将会在更新项目时递归更新项目的子模块。如果 <code>submodules</code> 是 <code>false</code> 或者不填，那么它没有任何效果。</p><p>例如，假如你有一个 <code>foo</code> 源码仓库，它有一些子模块，并且你想要 <code>lisa zep update</code> 保持所有子模块同步，以及在同一个工作区中另一个名为 <code>bar</code> 的项目。</p><p>你可以用这个提货单文件来做此操作：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      submodules: true</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在这里，<code>lisa zep update</code> 将会初始化并更新 <code>foo</code> 中的所有子模块。如果 <code>bar</code> 项目有子模块，那么它们将被忽略，因为 <code>bar</code> 中没有声明 submodules 字段。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="选项-2映射列表"></a>选项 2：映射列表<a class="hash-link" href="#选项-2映射列表" title="Direct link to heading">#</a></h3><p><code>submodules</code> 字段也可能是映射列表，每个映射都是一个子模块的配置。每个子模块都会被递归更新。你可以用 <code>git</code> 命令手动追踪和更新未列出的子模块；无论是否存在，它们都会被 <code>lisa</code> 忽略。</p><p><code>path</code> 字段必须与子模块相对于其父项目的路径完全匹配，如 <code>git submodule status</code> 的打印结果。<code>name</code> 字段是可选的，但是目前暂时不会用到。</p><p>例如，假如你有一个 <code>foo</code> 源码仓库，它有很多子模块，并且你想要 <code>lisa zep update</code> 保持其中一些子模块同步，以及在同一个工作区中另一个名为 <code>bar</code> 的项目。</p><p>你可以用这个提货单文件来做此操作：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      submodules:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - path: path/to/foo-first-sub</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        - name: foo-second-sub</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          path: path/to/foo-second-sub</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在这里，<code>lisa zep update</code> 将会递归初始化并只更新 <code>foo</code> 中的子模块 <code>path/to/foo-first-sub</code> 和 <code>path/to/foo-second-sub</code>。<code>bar</code> 中的子模块会被忽略。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="导入提货单"></a>导入提货单<a class="hash-link" href="#导入提货单" title="Direct link to heading">#</a></h2><p>你可以是用上面简要描述的 <code>import</code> 字段将其他提货单文件中的项目导入进你的 <code>west.yml</code> 中。这个字段可以是一个项目或者自身部分的属性：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: some-project</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import: ...</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>你可以使用 <code>self: import:</code> 从包含 <code>west.yml</code> 的源码仓库中加载额外的文件。你可以使用 <code>project: … import:</code> 来加载该项目的 Git 历史中定义的文件。</p><p><code>Lisa</code> 按以下顺序从各个提货单文件中解析最终提货单：</p><ul><li>在 <code>self</code> 字段中导入文件</li><li>你的 <code>west.yml</code> 文件</li><li>在 <code>projects</code> 字段中导入文件</li></ul><p>在解析的过程中，Lisa 会忽略已在其他文件中定义的项目。例如，<code>west.yml</code> 中名为 <code>foo</code> 的项目使 Lisa 忽略从项目列表中导入的其他名为 foo 的项目。</p><p><code>import</code> 字段可以是布尔值、路径、映射或者序列。我们将用示例按顺序来讲解这些内容：</p><ul><li><a href="#manifest-opt-1">布尔值</a><ul><li><a href="#manifest-ext1-1">示例 1.1：Zephyr 版本下游</a></li><li><a href="#manifest-ext1-2">示例 1.2：“滚动发布” Zephyr 下游</a></li><li><a href="#manifest-ext1-3">示例 1.3：Zephyr 版本下游和 fork 模块</a></li></ul></li><li><a href="#manifest-opt-2">相对路径</a><ul><li><a href="#manifest-ext2-1">示例 2.1：具有路径的 Zephyr 下游</a></li><li><a href="#manifest-ext2-2">示例 2.2：提货单文件目录的下游</a></li><li><a href="#manifest-ext2-3">示例 2.3：持续集成重写</a></li></ul></li><li><a href="#manifest-opt-3">映射</a>:<ul><li><a href="#manifest-ext3-1">示例 3.1：name allowlist 的下游</a></li><li><a href="#manifest-ext3-2">示例 3.2：path allowlist 的下游</a></li><li><a href="#manifest-ext3-3">示例 3.3：path blocklist 的下游</a></li><li><a href="#manifest-ext3-4">示例 3.4：导入到一个子目录</a></li></ul></li><li><a href="#manifest-opt-4">序列</a>:<ul><li><a href="#manifest-ext4-1">示例 4.1：提货单文件序列的下游</a></li><li><a href="#manifest-ext4-2">示例 4.2：导入顺序的说明</a></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="疑难笔记"></a>疑难笔记<a class="hash-link" href="#疑难笔记" title="Direct link to heading">#</a></h3><p>如果你使用此功能并发现 Lisa 的行为令人困惑，请尝试 <a href="#%E8%A7%A3%E6%9E%90%E6%8F%90%E8%B4%A7%E5%8D%95">解析你的提货单</a> 查看导入后的最终结果。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-opt-1"></a>选项1：布尔值<a class="hash-link" href="#manifest-opt-1" title="Direct link to heading">#</a></h3><p>这是使用 <code>import</code> 的简单方式。</p><p>如果 <code>projects</code> 字段中 <code>import</code> 为 <code>true</code>，则 Lisa 从 <code>p1</code> 仓库的根目录中导入 <code>west.yml</code> 文件，如果 <code>import</code> 为 <code>false</code> 或不填，则没有任何效果。例如，这个 manifest 将从 <code>p1</code> git 仓库的 <code>v1.0</code> tag 中导入 <code>west.yml</code> 文件：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: p1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: v1.0</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true    # Import west.yml from p1&#x27;s v1.0 git tag</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: p2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: false   # Nothing is imported from p2.</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: p3        # Nothing is imported from p3 either.</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在 <code>self</code> 字段中设置 <code>import</code> 为 <code>true</code> 或者 <code>false</code> 是错误的，如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import: true  # Error</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext1-1"></a>示例 1.1：Zephyr 版本的下游<a class="hash-link" href="#manifest-ext1-1" title="Direct link to heading">#</a></h4><p>你有一个源码仓库想用 Zephyr v1.14.1 LTS 版本。你想通过 lisa zep 来维护代码，并且你不想去修改任何主线上的代码。</p><p>也就是说，你想要的代码目录结构是这样的：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">my-downstream/</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── .west/                     # west 目录</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr/                    # 主线 Zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│   └── west.yml               # 导入该文件的 v1.14.1 版本 </span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── modules/                   # 主线 Zephyr 的模块</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│   ├── hal/</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│   └── [...other directories..]</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── [ ... other projects ...]  # 其他主线仓库</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── my-repo/                   # 你的下游仓库</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ├── west.yml               </span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── [...other files..]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>你可以通过下面 <code>my-repo/west.yml</code> 来做这些操作：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># my-repo/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://github.com/zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: v1.14.1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>然后你可以像这样在你的电脑上创建项目，假设 <code>my-repo</code> 托管在 <code>https://git.example.com/my-repo</code>：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep init -m https://git.example.com/my-repo my-downstream</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">cd</span><span class="token plain"> my-downstream</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep update</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>lisa zep init</code> 后，<code>my-downstream/my-repo</code> 将会被克隆下来。</p><p><code>lisa zep update</code>， 在 <code>zephyr</code> 仓库的 <code>West.yml</code> 修订版 <code>v1.14.1</code> 中定义的所有项目也将被克隆到 <code>my-downstream</code> 中。</p><p>在这种情况下，你可以添加和提交任何代码到 <code>my-repo</code>，包括你自己 Zephyr 应用，驱动程序等等，参考<a href="/docs-csk6/chips/600X/application/application_development">应用开发</a>。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext1-2"></a>示例 1.2：“滚动发布” Zephyr 下游<a class="hash-link" href="#manifest-ext1-2" title="Direct link to heading">#</a></h4><p>这类似于<a href="#manifest-ext1-1">示例 1.1：Zephyr 版本的下游</a>，只不过 zephyr 仓库将使用 <code>revision: main</code>：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># my-repo/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://github.com/zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: main</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>你可以以同样的方式创建项目：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">west init -m https://git.example.com/my-repo my-downstream</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">cd</span><span class="token plain"> my-downstream</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">west update</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这时候，无论何时运行 <code>lisa zep update</code>，<code>zephyr</code> 仓库中的特殊 <a href="https://docs.zephyrproject.org/latest/develop/west/workspaces.html#west-manifest-rev" target="_blank" rel="noopener noreferrer">manifest-rev</a> 分支将呗更新为指向 URL <code>https://github.com/zephyrproject-rtos/zephyr</code> <code>main</code> 的分支。</p><p>然后，<a href="https://docs.zephyrproject.org/latest/develop/west/workspaces.html#west-manifest-rev" target="_blank" rel="noopener noreferrer">manifest-rev</a> 中的 <code>zephyr/west.yml</code> 的内容将从 Zephyr 导入项目。这让你可以及时了解 Zephyr 项目的最新变化。代价是运行 <code>lisa zep update</code> 不会产生可重现的结果，因为每次运行它远程主分支都会发生变化。</p><p>同样重要的是要理解，在解析导入时 lisa zep 会<strong>忽略工作树</strong>的 <code>zephyr/west.yml</code>。lisa zep 始终使用导入的 manifests 的内容，因为它们从导入时已提交到最新的 <code>manifest-rev</code>。</p><p>你只能在提货单仓库工作树中才能从文件系统导入提货单。参见 <a href="#manifest-ext2-2">示例 2.2：提货单文件目录的下游</a>。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext1-3"></a>示例 1.3：Zephyr 版本下游和 fork 模块<a class="hash-link" href="#manifest-ext1-3" title="Direct link to heading">#</a></h4><p>这提货单类似于<a href="#manifest-ext1-1">示例 1.1：Zephyr 版本的下游</a>，除了：</p><ul><li>是 zephyr 2.0 的下游</li><li>包括该版本中包含的 <code>modules/hal/nordic</code> 模块的下游分支</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># my-repo/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://github.com/zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: my-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: hal_nordic         # higher precedence</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: my-remote</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: my-sha</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: modules/hal/nordic</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: v2.0.0</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true             # imported projects have lower precedence</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># subset of zephyr/west.yml contents at v2.0.0:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://github.com/zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  - name: hal_nordic           # lower precedence, values ignored</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    path: modules/hal/nordic</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    revision: another-sha</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>上述的提货单文件， 名为 <code>hal_nordic</code> 的项目：</p><ul><li>是从 <code>https://git.example.com/hal_nordic</code> 克隆，而不是 <code>https://github.com/zephyrproject-rtos/hal_nordic</code>。</li><li><code>lisa zep update</code> 更新的提交是 <code>my-sha</code>，而不是主线的提交 <code>another-sha</code></li></ul><p>换句话说，当你的顶级提货单定义了一个项目，如 <code>hal_nordic</code>，lisa zep 将会忽略稍后在解析导入时发现的任何其他定义。</p><p>这意味着在定义 <code>hal_nordic</code> 时，你必须将 <code>path: modules/hal/nordic</code> 复制到 <code>my-repo/west.yml</code> 中。<code>zephyr/west.yml</code> 的值被完全忽略。如果在实践中出现困惑，请参阅 <a href="#%E8%A7%A3%E6%9E%90%E6%8F%90%E8%B4%A7%E5%8D%95">解析提货单</a> 获取故障排除建议。</p><p>当你运行 <code>lisa zep update</code> 时，lisa zep 会：</p><ul><li>更新 zephyr <code>manifest-rev</code> 中的 <code>v2.0.0</code> 标签</li><li>在 <code>manifest-rev</code> 中导入 <code>zephyr/west.yml</code></li><li>本地检查除了 <code>hal_nordic</code> 之外的所有 zephyr 项目的 <code>v2.0.0</code> 修订版</li><li>从 <code>my-sha</code> 更新 <code>hal_nordic</code>，而不是 <code>another-sha</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-opt-2"></a>选项2：相对路径<a class="hash-link" href="#manifest-opt-2" title="Direct link to heading">#</a></h3><p><code>import</code> 值也可以是提货单文件或包含提货单文件的目录的相对路径。该路径是相对 <code>projects</code> 的根目录或是 <code>import</code> 字段所在的 <code>self</code> 仓库 。</p><p>这是一个例子：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: v1.0</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: west.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: project-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: main</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: p2-manifests</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import: submanifests</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这将导入以下内容：</p><ul><li><code>manifest-rev</code> 处的 <code>project-1/west.yml</code> 的内容，运行 <code>lisa zep update</code> 后，它指向项目仓库 Git <code>v1.0</code> 标签</li><li>目录树 <code>Project-2/p2-maniests</code> 中任何 YAML 文件在 <code>main</code> 分支的最新提交，由 <code>lisa zep update</code> 获取，按文件名排序</li><li>提货单仓库中 <code>submanifests</code> 目录中的 YAML 文件，与它们在文件系统上一样，按文件名排序</li></ul><p>注意 <code>projects</code> 导入如何使用 <code>manifest-rev</code> 从 Git 获取数据，而 <code>self</code> 导入如何从文件系统获取数据。因为，lisa 将提货单仓库的版本控制权留给你。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext2-1"></a>示例 2.1：具有路径的 Zephyr 的下游<a class="hash-link" href="#manifest-ext2-1" title="Direct link to heading">#</a></h4><p>这是编写与<a href="#manifest-ext1-1">示例 1.1：Zephyr 版本的下游</a>相同的方法。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://github.com/zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: v1.14.1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: west.yml</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>配置 <code>import: west.yml</code> 意思是在 zephyr 项目中使用 <code>west.yml</code> 文件。这个例子是人为设计的，但表达这个想法。</p><p>在实践中，如果你要导入的提货单文件的名称不是 <code>west.yml</code>，将会非常有用。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext2-2"></a>示例 2.2：提货单文件目录的下游<a class="hash-link" href="#manifest-ext2-2" title="Direct link to heading">#</a></h4><p>你的 Zephyr 下游有很多额外的仓库。实际上，由于数量太多，你想要将它们分成多个提货单文件，并且要在单个提货单仓库中跟踪所有这些文件，如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">my-repo/</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── submanifests</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│   ├── 01-libraries.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│   ├── 02-vendor-hals.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│   └── 03-applications.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── west.yml</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>除了 <code>zephyr/west.yml</code> 中项目外， 你想将 <code>my-repo/submanifests</code> 中的所有文件添加到 <code>my-repo/west.yml</code> 文件中。你想跟踪 Zephyr 仓库 <code>main</code> 分支最新代码而不是使用固定提交。</p><p>方法如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># my-repo/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://github.com/zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      remote: zephyrproject-rtos</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: main</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import: submanifests</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>提货单文件在解析期间按一下顺序导入：</p><ol><li><code>my-repo/submanifests/01-libraries.yml</code></li><li><code>my-repo/submanifests/02-vendor-hals.yml</code></li><li><code>my-repo/submanifests/03-applications.yml</code></li><li><code>my-repo/west.yml</code></li><li><code>zephyr/west.yml</code></li></ol><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>在这个示例中，<code>.yml</code> 文件名前面带有数字，以确保它们按照指定的顺序导入。</p><p>你可以选择任意名称，lisa zep 在导入前按目录中文件名进行排序。</p></div></div><p>请注意，<code>submanifests</code> 中提货单文件是如何在 <code>my-repo/west.yml</code> 和 <code>zephyr/west.yml</code> 之前导入的。通常，在 <code>projects</code> 中的提货单文件和主提货单文件之前处理 <code>self</code> 中的 <code>import</code>。</p><p>这意味着在 <code>my-repo/submanifests</code> 中定义的项目具有最高的优先级，例如，如果  <code>01-libraries.yml</code> 定义了 <code>hal_nordic</code>，那么 <code>zephyr/west.yml</code> 中同名的项目被忽略。同样，有关疑问，请参阅<a href="#%E8%A7%A3%E6%9E%90%E6%8F%90%E8%B4%A7%E5%8D%95">解析提货单</a>。</p><p>这可能看起来很奇怪，但是它允许你在“事后”重新定义项目，正如我们将在下一个示例看到的那样。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext2-3"></a>示例 2.3：持续集成重写<a class="hash-link" href="#manifest-ext2-3" title="Direct link to heading">#</a></h4><p>你的持续集成系统需要从开发人员的分支（而不是主线开发分支）获取并测试你的项目目录中的多个仓库，以查看更改是否能够很好协同工作。</p><p>从<a href="#manifest-ext2-2">示例 2.2：提货单文件目录的下游</a>开始, CI 脚本在 <code>my-repo/submanifests</code> 中添加一个文件 <code>00-ci.yml</code>，包含一下内容：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># my-repo/submanifests/00-ci.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: a-vendor-hal</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://github.com/a-developer/hal</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: a-pull-request-branch</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: an-application</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://github.com/a-developer/application</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      revision: another-pull-request-branch</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>CI 脚本在 <code>my-repo/submanifests</code> 中生成此文件后运行 <code>lisa zep update</code>。<code>00-ci.yml</code> 中定义的项目比 <code>my-repo/submanifests</code> 中其它的定义有更高的优先级，因为名称 <code>00-co.yml</code> 位于其他文件名之前。</p><p>因此，<code>lisa zep update</code> 总是在名为 <code>a-vendor-hal</code> 和 <code>an-application</code> 的项目中检查开发分支，即使这些相同的项目也在其他地方定义。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-opt-3"></a>选项3：映射<a class="hash-link" href="#manifest-opt-3" title="Direct link to heading">#</a></h3><p><code>import</code> 字段还包含具有以下字段的映射：</p><ul><li><code>file</code>：可选，要导入的提货单文件或目录的名称。如果没有指定，则默认为 <code>west.yml</code>。</li><li><code>name-allowlist</code>：可选，项目名，或者存放着项目名的序列。</li><li><code>path-allowlist</code>：可选，如果存在，则要匹配路径或者项目路径序列。这是一种 shell 风格的通配模式，目前使用 <a href="https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.match" target="_blank" rel="noopener noreferrer">pathlib</a> 实现，请注意，这意味着区分大小写是特定于平台的。</li><li><code>name-blocklist</code>：可选，跟 <code>name-allowlist</code> 类似，但包含的是要排除的项目名。</li><li><code>path-blocklist</code>：可选，跟 <code>path-allowlist</code> 类似，但包含的是要排除的项目路径。</li><li><code>path-prefix</code>：可选，如果给定，这将被添加到项目中项目的路径以及任何导入项目的路径中。这可用于将这些项目放在项目的子目录中。</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext3-1"></a>示例 3.1：name allowlist 的下游<a class="hash-link" href="#manifest-ext3-1" title="Direct link to heading">#</a></h4><p>下面是一对提货单文件，代表一条主线和一条下游线。然而，下游线不想使用所有的主线项目。我们假设主线 <code>west.yml</code> 托管在 <code>https://git.example.com/mainline/manifest</code>。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># mainline west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline-app                # included</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: examples/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib2                        # included</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># downstream west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/manifest</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        name-allowlist:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          - mainline-app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          - lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: downstream-app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/lib3</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>单个文件中等效的 manifest 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/manifest</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: downstream-app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline-app                   # imported</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: examples/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib2                           # imported</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/lib2</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>如果没有使用 allowlist，则会导入 mainline manifest 中的 <code>lib</code> 项目。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext3-2"></a>示例 3.2：path allowlist 的下游<a class="hash-link" href="#manifest-ext3-2" title="Direct link to heading">#</a></h4><p>下面的示例演示如何使用 <code>path-allowlist</code> 只使用 mainline 中 libraries 路径：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># mainline west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: examples/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib                  # included</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib2                 # included</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># downstream west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/manifest</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        path-allowlist: libraries/*</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/lib3</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>单个文件中等效的 manifest 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib                          # imported</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib2                         # imported</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/manifest</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib3</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/lib3</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext3-3"></a>示例 3.3：path blocklist 的下游<a class="hash-link" href="#manifest-ext3-3" title="Direct link to heading">#</a></h4><p>这是一个示例，展示如何排除 mainline 中公共路径前缀的所有供应商 HALs，为目标芯片添加自己的版本，并保留其他所有内容。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># mainline west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: hal_foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: modules/hals/foo     # excluded</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: hal_bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: modules/hals/bar     # excluded</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: hal_baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: modules/hals/baz     # excluded</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># downstream west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/mainline/manifest</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        path-blocklist: modules/hals/*</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: hal_foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: modules/hals/foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/hal_foo</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>单个文件中等效的 manifest 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com/mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: app                  # imported</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib                  # imported</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: lib2                 # imported</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: libraries/lib2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: mainline</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      repo-path: https://git.example.com/mainline/manifest</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: hal_foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: modules/hals/foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/downstream/hal_foo</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext3-4"></a>示例 3.4：导入到一个子目录<a class="hash-link" href="#manifest-ext3-4" title="Direct link to heading">#</a></h4><p>你希望导入一个提货单和它的 projects，将所有内容放入你的 SDK 的一个子目录中。</p><p>例如，假设你想从项目 <code>foo</code> 导入这个提货单 <code>bar</code> 和 <code>baz</code> 添加到你的 SDK 中：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># foo/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>你不需要将它们导入到顶层的 SDK 目录，而是需要将三个项目仓库放到一个 <code>external-code</code> 子目录中，如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">workspace/</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── external-code/</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ├── foo/</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ├── bar/</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── baz/</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>你可以使用以下提货单完成此操作：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://git.example.com/foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        path-prefix: external-code</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>单个文件中等效的 manifest 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># foo/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: example</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  remotes:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: example</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url-base: https://git.example.com</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: external-code/foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: external-code/bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      path: external-code/baz</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-opt-4"></a>选项4：序列<a class="hash-link" href="#manifest-opt-4" title="Direct link to heading">#</a></h3><p><code>import</code> 字段还可以包含文件、目录和映射的序列。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext4-1"></a>示例 4.1：提货单文件序列的下游<a class="hash-link" href="#manifest-ext4-1" title="Direct link to heading">#</a></h4><p>此示例 manifest 等效于<a href="#manifest-ext2-2">示例 2.2：提货单文件目录的下游</a>中的 manifest：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># my-repo/west.yml:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      url: https://github.com/zephyrproject-rtos/zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: west.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      - submanifests/01-libraries.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      - submanifests/02-vendor-hals.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      - submanifests/03-applications.yml</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="manifest-ext4-2"></a>示例 4.2：导入顺序说明<a class="hash-link" href="#manifest-ext4-2" title="Direct link to heading">#</a></h4><p>这个更复杂的例子展示了 lisa zep 导入提货单文件的顺序：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># my-repo/west.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: my-library</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: my-app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: true</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: another-manifest-repo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: submanifests</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      - submanifests/libraries.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      - submanifests/vendor-hals.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      - submanifests/applications.yml</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  defaults:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    remote: my-remote</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在这个例子中，lisa zep 按以下顺序解析导入：</p><ol><li><p><code>my-repo/submanifests</code> 中列出的文件按照它们出现的顺序排在第一位（例如，<code>libraries.yml</code> 在 <code>applications.yml</code> 之前，因为这是一个文件序列），而 <code>self: import: </code> 中的内容总是先导入。</p></li><li><p>接着导入 <code>my-repo/west.yml</code>（项目 <code>my-library</code> 等等，只要它们尚未在 <code>submanifests</code> 中的某处定义）</p></li><li><p>再接着就是 <code>zephyr/west.yml</code>，因为这是 <code>my-repo/west.yml</code> 中项目列表中的第一个 <code>import</code> 字段</p></li><li><p>最后是 <code>another-manifest-repo/submanifests</code>（按文件名排序），因为这是最后一个项目 <code>import</code></p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="提货单导入详情"></a>提货单导入详情<a class="hash-link" href="#提货单导入详情" title="Direct link to heading">#</a></h2><p>本节更正式地描述了 lisa zep 如何解析使用 <code>import</code> 的提货单文件。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="概述"></a>概述<a class="hash-link" href="#概述" title="Direct link to heading">#</a></h3><p><code>import</code> 字段可放在提货单中 <code>projects</code> 和 <code>self</code>。 如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># Top-level manifest file.</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">manifest:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  projects:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: import-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: bar</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: import-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    # ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - name: baz</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      import: import-N</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  self:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import: self-import</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>import</code> 字段是可填可不填。如果缺少 <code>import-1</code>、<code>...</code>、<code>import-N</code> 中的任何一个，lisa zep 将不会从该项目导入其他提货单数据。如果缺少 <code>self-import</code>，不会导入 提货单仓库中的其他文件（除了顶层文件）。</p><p>解析提货单导入的最终结果是：</p><ul><li>项目列表，通过将顶层文件中定义的 <code>projects</code> 与导入文件中定义的 <code>projects</code> 组合生成</li><li>一组扩展命令，从顶层文件中 <code>west-commands</code> 字段和任何导入的文件中提取</li><li>一个 <code>group-filter</code> 列表，由顶层 <code>group-filter</code> 和导入的 <code>group-filter</code> 组合而成</li></ul><p>通过一下顺序完成导入：</p><ol><li><p>先导入 <code>manifests</code> 中的 <code>self-import</code>。</p></li><li><p>接着处理顶层提货单文件中定义 <code>import</code>。</p></li><li><p>接着按顺序导入 <code>import-1</code>、<code>...</code>、<code>import-N</code> </p></li></ol><p>当单个 <code>import</code> 字段引用多个提货单文件时，它们按以下顺序处理：</p><ul><li>如果 <code>import</code> 的值是命名目录的相对路径（或文件为目录的映射），则它包含的提货单文件按字母顺序处理 - 即按文件名排序。</li><li>如果它的值时一个序列，它的字段会按照它们出现的顺序递归导入。</li></ul><p>如有必要，此过程会递归进行。例如，如果 <code>import-1</code> 生成一个包含 <code>import</code> 字段的提货单文件，则在进一步处理其他内容之前，它会使用相同的规则递归解析。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="projects-1"></a>Projects<a class="hash-link" href="#projects-1" title="Direct link to heading">#</a></h3><p>本节将介绍如何创建最终 <code>projects</code> 列表。</p><p>Projects 按名称标识。如果相同名称出现在多个在 manifest 中，第一个将会被使用，其他的会被忽略。例如，如果 <code>import-1</code> 包含一个名为 <code>bar</code> 的项目，则会被忽略，因为顶层 <code>west.yml</code> 已经使用该名称定义了一个项目。</p><p>由 <code>import-1</code> 到 <code>import-N</code> 命名的文件的内容是从 Git 在其项目中最新的 <code>manifest-rev</code> 修订中导入的。这些修订可以通过运行 <code>lisa zep update</code> 更新<code>rev-1</code> 到 <code>rev-N</code> 的值。如果任何 <code>manifest-rev</code> 引用丢失或过时，<code>lisa zep update</code> 也会从远程 URL 中获取项目数据并更新引用。</p><p>另请注意，所有导入的提货单，从根提货单到定义项目 <code>P</code> 的仓库，必须是最新的以便于 lisa zep 更新 <code>P</code> 本身。例如，如果 <code>baz/west.yml</code> 定义了 <code>P</code>，<code>lisa zep update P</code> 将会更新 <code>baz</code> 项目中的 <code>manifest-rev</code> 分支，以及更新本地的 git clone 中的 <code>P</code> 项目的 <code>manifest-rev</code> 分支。令人困惑的是，更新 <code>baz</code> 可能会导致 <code>P</code> 被 <code>baz/west.yml</code> 移除，这“应该”导致 <code>lisa zep update P</code> 失败，并且出现无法识别的项目！</p><p>因此，如果 <code>P</code> 在导入的 manifest 中定义，则不能运行 <code>lisa zep update P</code>；你必须更新这个项目与所有其他项目一起使用 <code>lisa zep update</code>。</p><p>默认情况下，如果项目的修订号是一个 SHA 或 tag，并且已经在本地可用，lisa zep 不会在网络上获取任何项目数据，因此，除非确实需要，否则更新额外的项目不会花费太多时间。请参阅 <a href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/config#%E5%86%85%E7%BD%AE%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9">update.fetch</a> 配置选项以获取更多信息。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="扩展"></a>扩展<a class="hash-link" href="#扩展" title="Direct link to heading">#</a></h3><p>处理导入时发现的所有使用 <code>west-commands</code> 定义的扩展命令都可以在解析的提货单中使用。</p><p>如果导入的提货单文件在其 <code>self:</code> 区域有一个 <code>west-commands:</code> 定义，则在导入提货单时，将会添加到导入提货单时的可用扩展命令集合中。因此，这些扩展命令将会替换任何添加后的相同名称的扩展命令。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="group-filters"></a>Group filters<a class="hash-link" href="#group-filters" title="Direct link to heading">#</a></h3><p>解析的 manifest 有一个 <code>group-filter</code> 值，它是由顶级 manifest 和导入的 manifest 的 <code>group-filter</code> 值组合而成。</p><p>导入顺序中较早出现的提货单文件具有更高的优先级，因此将会把它们添加在最后的 <code>group-filter</code> 中。</p><p>换句话说：</p><ul><li><code>self-import</code> 解析的 submanifest 具有组过滤器(group filter) <code>self-filter</code></li><li>顶级提货单文件具有组过滤器 <code>top-filter</code></li><li><code>import-1</code> 到 <code>import-N</code> 解析的 submanifests 具有组过滤器 <code>filter-1</code> 到 <code>filter-N</code></li></ul><p>最终解析的 <code>group-filter</code> 的值为 <code>filter1 + filter-2 + ... + filter-N + top-filter + self-filter</code>，其中 <code>+</code> 在这里指的是列表连接。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>这个列表中的过滤器的出现顺序对于上面的内容有重要的影响。</p><p>最终连接列表中的最后一个过滤器 “获胜”， 并决定组是否启用或禁用。</p></div></div><p>例如，在 <code>[-foo] + [+foo]</code> 中，组 foo 启用。但是，在 <code>[+foo] + [-foo]</code> 中，组 foo 禁用。</p><p>为简单起见，lisa zep 和本文档可能会省略使用这些规则冗余的级联过滤器。例如，<code>[+foo] + [-foo]</code> 可以简写为 <code>[-foo]</code>，因为上面描述的原因。另一个例子，<code>[-foo] + [+foo]</code> 可以简写为空列表 <code>[]</code>，因为所有组都默认启用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="提货单命令"></a>提货单命令<a class="hash-link" href="#提货单命令" title="Direct link to heading">#</a></h2><p><code>lisa zep manifest</code> 命令可以用来操作提货单文件。它接受一个操作，以及操作特定的参数。</p><p>以下部分描述每个操作，并提供一个简单的签名来使用。运行 <code>lisa zep manifest -h</code> 可以查看所有选项的详细信息。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="解析提货单"></a>解析提货单<a class="hash-link" href="#解析提货单" title="Direct link to heading">#</a></h3><p><code>--resolve</code> 操作输出一个与当前 manifest 及其所有<a href="#%E5%AF%BC%E5%85%A5%E6%8F%90%E8%B4%A7%E5%8D%95">导入提货单</a> 等效的提货单文件。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep manifest --resolve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">-o outfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这个操作的主要用途是查看执行任何 <code>import</code>(导入) 之后的 “最终” manifest 内容。</p><p>打印每个导入的提货单文件的详细信息，以及 manifest 解析时的项目处理方式，使用 <code>-v</code> 设置最大的详细信息级别。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep -v manifest --resolve</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="冻结提货单"></a>冻结提货单<a class="hash-link" href="#冻结提货单" title="Direct link to heading">#</a></h3><p><code>--freeze</code> 操作输出一个冻结的 manifest:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep manifest --freeze </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">-o outfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>“冻结”的 manifest 是一个提货单文件，其中每个项目的版本都是一个 SHA。你可以使用 <code>--freeze</code> 来生成一个与当前提货单文件等效的冻结 manifest。使用 <code>-o</code> 选项指定输出文件；如果没有指定，则使用标准输出。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="验证提货单"></a>验证提货单<a class="hash-link" href="#验证提货单" title="Direct link to heading">#</a></h3><p><code>--validate</code> 操作要么当前提货单文件有效时成功，要么因错误而失败，</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep manifest --validate</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>错误信息可以帮助诊断错误。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="获取提货单路径"></a>获取提货单路径<a class="hash-link" href="#获取提货单路径" title="Direct link to heading">#</a></h3><p><code>--path</code> 操作输出到顶层提货单文件的路径:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">lisa zep manifest --path</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>输出是一个某种格式的路径，例如 <code>/path/to/workspace/west.yml</code>。路径格式取决于你的操作系统。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/filesystem"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 文件系统相关</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/application_project"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">应用级提货单 »</div></a></div></nav><div class="gitalk-wrapper"><ul class="gitalk-option"><li class="like"><i class="icon like-icon"></i> <span id="like_num">有帮助  0</span></li><li class="unlike"><i class="icon unlike-icon"></i> <span id="unlike_num">没帮助 0</span></li><li>文档反馈</li></ul></div></div></div><div class="col col--3" style="padding-left:0px"><div class="tableOfContents_k96L thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#多存储库模型" class="table-of-contents__link">多存储库模型</a></li><li><a href="#提货单文件" class="table-of-contents__link">提货单文件</a></li><li><a href="#remotes" class="table-of-contents__link">Remotes</a></li><li><a href="#projects" class="table-of-contents__link">Projects</a></li><li><a href="#defaults" class="table-of-contents__link">Defaults</a></li><li><a href="#self" class="table-of-contents__link">Self</a></li><li><a href="#项目组与活跃的项目" class="table-of-contents__link">项目组与活跃的项目</a><ul><li><a href="#项目组" class="table-of-contents__link">项目组</a></li><li><a href="#启用和禁用项目组" class="table-of-contents__link">启用和禁用项目组</a></li><li><a href="#可用和不可用项目" class="table-of-contents__link">可用和不可用项目</a></li><li><a href="#项目组示例" class="table-of-contents__link">项目组示例</a></li><li><a href="#组过滤和导入" class="table-of-contents__link">组过滤和导入</a></li></ul></li><li><a href="#项目的git子模块" class="table-of-contents__link">项目的Git子模块</a><ul><li><a href="#选项-1布尔值" class="table-of-contents__link">选项 1：布尔值</a></li><li><a href="#选项-2映射列表" class="table-of-contents__link">选项 2：映射列表</a></li></ul></li><li><a href="#导入提货单" class="table-of-contents__link">导入提货单</a><ul><li><a href="#疑难笔记" class="table-of-contents__link">疑难笔记</a></li><li><a href="#manifest-opt-1" class="table-of-contents__link">选项1：布尔值</a></li><li><a href="#manifest-opt-2" class="table-of-contents__link">选项2：相对路径</a></li><li><a href="#manifest-opt-3" class="table-of-contents__link">选项3：映射</a></li><li><a href="#manifest-opt-4" class="table-of-contents__link">选项4：序列</a></li></ul></li><li><a href="#提货单导入详情" class="table-of-contents__link">提货单导入详情</a><ul><li><a href="#概述" class="table-of-contents__link">概述</a></li><li><a href="#projects-1" class="table-of-contents__link">Projects</a></li><li><a href="#扩展" class="table-of-contents__link">扩展</a></li><li><a href="#group-filters" class="table-of-contents__link">Group filters</a></li></ul></li><li><a href="#提货单命令" class="table-of-contents__link">提货单命令</a><ul><li><a href="#解析提货单" class="table-of-contents__link">解析提货单</a></li><li><a href="#冻结提货单" class="table-of-contents__link">冻结提货单</a></li><li><a href="#验证提货单" class="table-of-contents__link">验证提货单</a></li><li><a href="#获取提货单路径" class="table-of-contents__link">获取提货单路径</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 安徽聆思智能科技有限公司皖ICP备05001217号</div></div></div></footer></div>
<script src="/docs-csk6/assets/js/runtime~main.020f38f0.js"></script>
<script src="/docs-csk6/assets/js/main.5a2ba94c.js"></script>
<script>!function(e,n,s,t,d){e[s]=e[s]||function(){(e[s].a=e[s].a||[]).push(arguments)},(d=n.createElement("script")).async=!0,d.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",n.body.appendChild(d)}(window,document,"simplemde")</script></body>
</html>