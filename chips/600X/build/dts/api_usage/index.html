<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">在 C/C++ 中访问设备树 | 聆思文档中心</title><meta data-react-helmet="true" property="og:url" content="https://github.com/LISTENAI/docs-csk6/chips/600X/build/dts/api_usage"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="在 C/C++ 中访问设备树 | 聆思文档中心"><meta data-react-helmet="true" name="description" content="本文描述了 Zephyr 的 `` API，用于在 C 源码中读取设备树。我们假设你已熟悉 设备树概述 和 设备树绑定 中的概念。对具体接口的描述可参阅 API 引用 。"><meta data-react-helmet="true" property="og:description" content="本文描述了 Zephyr 的 `` API，用于在 C 源码中读取设备树。我们假设你已熟悉 设备树概述 和 设备树绑定 中的概念。对具体接口的描述可参阅 API 引用 。"><link data-react-helmet="true" rel="shortcut icon" href="/docs-csk6/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/LISTENAI/docs-csk6/chips/600X/build/dts/api_usage"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/build/dts/api_usage" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/build/dts/api_usage" hreflang="x-default"><link rel="stylesheet" href="/docs-csk6/assets/css/styles.f018d340.css">
<link rel="preload" href="/docs-csk6/assets/js/runtime~main.515bc6ee.js" as="script">
<link rel="preload" href="/docs-csk6/assets/js/main.5a2ba94c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_vO2r">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a><a class="navbar__item navbar__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a><a class="navbar__item navbar__link" href="/docs-csk6/tools/LStudio">工具</a><a class="navbar__item navbar__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a><a class="navbar__item navbar__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs-csk6/FAQ/front_page">FAQ</a><a class="navbar__item navbar__link" href="/docs-csk6/school/school">视频课程</a><a class="navbar__item navbar__link" href="/docs-csk6/workorder/workorder">工单</a><div class="react-toggle displayOnlyInLargeViewport_a-w0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_8pH0"><img src="/docs-csk6/img/light.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/unlight.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div><div class="react-toggle-track-x"><span class="toggle_8pH0"><img src="/docs-csk6/img/undark.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/dark.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/tools/LStudio">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/FAQ/front_page">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/school/school">视频课程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/workorder/workorder">工单</a></li></ul></div></div></div></nav><nav class="navbar subnavbar--fixed-top sub-navbar"><div class="navbar__inner subnavbar__inner"><div class="navbar__items"><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/4002/Chip_information_4002">CSK4002</a><a aria-current="page" class="subnavbar__item subnavbar__link subnavbar__link--active" dirname="/chips" href="/docs-csk6/chips/600X/overview/chips">CSK6开发指南</a><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/micropython/index">MicroPython</a></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_Ol8-"><aside class="docSidebarContainer_UfDv"><div class="sidebar_OMtR"><nav class="menu menu--responsive thin-scrollbar menu_2y2e menuWithAnnouncementBar_Lwkw" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_IcOF" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/600X/overview/read_guide">导读</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/600X/overview/chips">芯片介绍</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">开发套件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_introduction">简介</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">套件组合</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/kit/audio_kit">语音开发套件</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">使用指南</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">NanoKit开发板</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_csk6002_9s_nano">csk6002-9s-nano</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_csk6011a_9s_nano">csk6011a-9s-nano</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">功能扩展模块</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_audio">语音功能模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_extend">引脚扩展板</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">快速开始</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/getting_start">快速开始</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">基础入门</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/application_development">初识应用开发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">烧录</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/csk6_load">CSK6 烧录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/csk6_burn">CSK6 串口烧录协议说明</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">调试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-daplink">基于 DAPLink 的 GDB 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-jlink">基于 J-Link 的 GDB 调试</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">开发实践</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">外设驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/overview">外设驱动的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/gpio">GPIO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/pwm">PWM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/UART">UART</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/I2C">I2C</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/spi">SPI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/ADC">SAR ADC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/RTC">RTC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/watchdog">WatchDog</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/timer">Timer定时器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/multithread">多线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_semaphore">信号量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_mutex">互斥量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_poll">轮询</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/thread_analyzer">线程分析器的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/workqueue">工作队列的使用</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/logger">日志输出</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/usb_class">USB 模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/display_kscan">显示&amp;触摸</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/lvgl">LVGL 显示组件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/shell_sample">Shell 的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/nvs">NVS 的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/filesystem">文件系统的使用</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">音频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record">录音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_playback">播音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record_play">录音和播音示例</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">网络</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/wifi_connect">WIFI连接</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/net_socket">网络连接</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/customdriver/custom-driver-video">添加自定义驱动</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义板型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/board">添加自定义板型</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">AI 能力使用</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">图像识别</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">头肩&amp;手势识别</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/user_guide">用户操作指引</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/viewer_usage">PC 查看工具</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/api">接口说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/ai_usage/hsgd/faq">疑难解答</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--first menu__link--sublist menu__link--active" type="first" href="#!">进阶专题</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/threads">线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/scheduling">调度</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/system_threads">系统线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/workqueue">工作队列线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/interrupts">中断</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/semaphores">信号量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/mutexes">互斥量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/timing/timers">定时器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/heap">堆管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/datapassing/message_queues">消息队列</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/fifos">FIFOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/data_passing/pipes">管道</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/logging">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/portability/posix">POSIX 支持</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/shell">Shell</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/storage/nvs">非易失性存储 (NVS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/storage/flash_map">Flash map</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--sublist menu__link--active" type="" href="#!" tabindex="0">构建与配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/cmake/index">构建系统（ CMake ）</a></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--sublist menu__link--active" type="" href="#!" tabindex="0">设备树</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/dts/intro">设备树概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/dts/design">设计目标</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/dts/bindings">设备树绑定</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/dts/howtos">设备树操作指引</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs-csk6/chips/600X/build/dts/api_usage">在 C/C++ 中访问设备树</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/dts/troubleshooting">问题排查</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/dts/dt_vs_kconfig">设备树 VS Kconfig</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">API 引用</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api/api">设备树 API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api/bindings">绑定索引</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">Kconfig配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_gui">Kconfig交互界面</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_configuration">设置Kconfig配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_tips_and_demo">小贴士与最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_custom">自定义 Kconfig 预处理函数</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_extension">Kconfig 拓展</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/zephyr_cmake_package">Zephyr CMake Package(包)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/application/modules">模块</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">硬件支持</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/hardware/pinctrl">引脚控制</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/hardware/peripherals">外设接口</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">开发工具</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">lisa zephyr 命令行工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/install">安装/更新</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/basic">基础命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/command_detail">内置命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/build_flash_debug">编译 烧录 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/filesystem">文件系统相关</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/manifest">提货单</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/application_project">应用级提货单</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/trouble_shooting">疑难解答</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/release_note">lisa zep 更新日志</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">vscode开发插件推荐</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/vscode_plugin/code_completion">代码补全</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/vscode_plugin/debug">调试</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/FAQ/index">常见问题</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/quick_start/doc_issue">提交新问题</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">索引查询</a><ul class="menu__list"><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/doxygen/html/index.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Zephyr API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/kconfig.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Kconfig 检索<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/reference/devicetree/bindings.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>设备树绑定索引<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_dRYS"><div class="container padding-top--md padding-bottom--lg center-container"><div class="row"><div class="col docItemCol_+xOG"><div class="docItemContainer_c+5G"><article><div class="markdown"><header><h1 class="h1Heading_5RMM">在 C/C++ 中访问设备树</h1></header><p>本文描述了 Zephyr 的 <code>&lt;devicetree.h&gt;</code> API，用于在 C 源码中读取设备树。我们假设你已熟悉 <a href="/docs-csk6/chips/600X/build/dts/intro">设备树概述</a> 和 <a href="/docs-csk6/chips/600X/build/dts/bindings">设备树绑定</a> 中的概念。对具体接口的描述可参阅 <a href="/docs-csk6/chips/600X/build/dts/api/index">API 引用</a> 。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="给-linux-开发者的小贴士"></a>给 Linux 开发者的小贴士<a class="hash-link" href="#给-linux-开发者的小贴士" title="Direct link to heading">#</a></h2><p>对熟悉设备树的 Linux 开发者而言，应该引起注意，此处描述的 API 与在 Linux 上使用设备树的方式有很大不同。</p><p>在 Zephyr 中，设备树所有数据包含在一个生成的 C 头文件，并以宏 API 进行抽象。但 Linux 内核中是以二进制形式读取设备树数据结构的。二进制表示在运行时被解析，例如加载和初始化设备驱动程序。</p><p>Zephyr 不能以这种方式工作，因为设备树二进制文件和相关处理代码的占用空间太大，并不适用于安装在 Zephyr 支持的、性能相对受限的设备上。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="节点-id"></a>节点 id<a class="hash-link" href="#节点-id" title="Direct link to heading">#</a></h2><p><em>节点 id</em> 用于获取特定设备树节点的相关信息。它只是一个用于引用节点的 C 宏。（下文中有时出现的 <code>node_id</code> 也指代节点 id ）</p><p>以下是获取节点 id 的主要方法：</p><h4 style="background:var(--ifm-color-info-lightest);padding:4px">通过路径</h4><div style="padding-left:16px"><p>调用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_path"><code>DT_PATH()</code></a> 所需参数为，设备树中节点的完整路径，它需要从根节点开始。此方式旨在明确节点确切位置时发挥作用。</p></div><h4 style="background:var(--ifm-color-info-lightest);padding:4px">通过节点标签</h4><div style="padding-left:16px"><p>使用 <a href="/docs-csk6/chips/600X/build/dts/intro#node-label">节点标签</a> 通过 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_nodelabellabel"><code>DT_NODELABEL()</code></a> 获取节点 id 。节点标签通常在 SoC <code>.dtsi</code> 中提供，节点标签通常是与 SoC datasheet 匹配的节点名称，如 <code>i2c1</code> 、 <code>spi2</code> 等。</p></div><h4 style="background:var(--ifm-color-info-lightest);padding:4px">通过别名</h4><div style="padding-left:16px"><p>使用 <a href="https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_ALIAS" target="_blank" rel="noopener noreferrer"><code>DT_ALIAS()</code></a> 获取由特殊 <code>/aliases</code> 节点属性表示的节点 id 。这有时是由应用程序（如在 <a href="/docs-csk6/chips/600X/application/peripheral/samples/gpio">GPIO 示例</a> 中即使用 <code>led0</code> 别名）完成的；这些程序中，需要引用特定类型的某些设备，但不关心使用哪个设备（例如，某个应用程序希望运行起来后可亮起某个 LED 用作提示，但用户可自行配置最终指定哪一个 LED 而程序本身不关心）。</p></div><h4 style="background:var(--ifm-color-info-lightest);padding:4px">通过实例编号</h4><div style="padding-left:16px"><p>这主要由设备驱动程序完成，因为实例编号是一种基于匹配兼容来引用单个节点的方法。这些编号通过 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_instinst-compat"><code>DT_INST()</code></a> 获取，但这一做法需要小心处理（下文将提到为何需要）。</p></div><h4 style="background:var(--ifm-color-info-lightest);padding:4px">通过选中的节点</h4><div style="padding-left:16px"><p>使用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_chosenprop"><code>DT_CHOSEN()</code></a> 获取 <code>/chosen</code> 节点属性所表示的节点 id 。</p></div><h4 style="background:var(--ifm-color-info-lightest);padding:4px">通过父子关系</h4><div style="padding-left:16px"><p>从已有的节点 id 开始获取父节点或子节点的节点 id ，通过使用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_parentnode_id"><code>DT_PARENT()</code></a> 和 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_childnode_id-child"><code>DT_CHILD()</code></a> 实现。</p></div><p>引用同一节点的两个节点 id 是等价的，可以互换使用。</p><a id="dts-example"></a><p>这是一个假想硬件的 DTS 片段，我们将在全文始末都以此作为示例：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">dts</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">v1</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    aliases </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        sensor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">controller </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">i2c1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    soc </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        i2c1</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> i2c@</span><span class="token number" style="color:rgb(181, 206, 168)">40002000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            compatible </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;vnd,soc-i2c&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            label </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;I2C_1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            reg </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token number" style="color:rgb(181, 206, 168)">0x40002000</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0x1000</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            status </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;okay&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            clock</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">frequency </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>以下是获取 <code>i2c@40002000</code> 节点的 id 的几种方法：</p><ul><li><code>DT_PATH(soc, i2c_40002000)</code></li><li><code>DT_NODELABEL(i2c1)</code></li><li><code>DT_ALIAS(sensor_controller)</code></li><li><code>DT_INST(x, vnd_soc_i2c)</code> 用于某个未知数 <code>x</code> 。请参阅 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_instinst-compat"><code>DT_INST()</code></a> 文档了解相关详细信息。</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>重要</h5></div><div class="admonition-content"><p>设备树名称中，非字母数字字符（例如破折号 ( <code>-</code> ) 和 at 符号 ( <code>@</code> ) 等）将转换为下划线 ( <code>_</code> )。 DTS 中的名称也会转换为小写。</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="节点-id-并不是值"></a>节点 id 并不是值<a class="hash-link" href="#节点-id-并不是值" title="Direct link to heading">#</a></h2><p>一个节点 id 无法存储在变量中。这种写法是不可行的：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">/* 这样写会引发编译器报错: */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">i2c_0 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_INST</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> vnd_soc_i2c</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">int</span><span class="token plain"> i2c_1 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_INST</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> vnd_soc_i2c</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">long</span><span class="token plain"> my_i2c </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_NODELABEL</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i2c1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>如果你想要一些简短的封装来节省代码量，请使用 C 宏：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">/* 类似下列用法: */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">define</span><span class="token macro property"> </span><span class="token macro property macro-name">MY_I2C</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(220, 220, 170)">DT_NODELABEL</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token macro property expression">i2c1</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">define</span><span class="token macro property"> </span><span class="token macro property macro-name function" style="color:rgb(220, 220, 170)">INST</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token macro property expression">i</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token macro property expression"> </span><span class="token macro property expression function" style="color:rgb(220, 220, 170)">DT_INST</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token macro property expression">i</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token macro property expression"> vnd_soc_i2c</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">define</span><span class="token macro property"> </span><span class="token macro property macro-name">I2C_0</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(220, 220, 170)">INST</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token macro property expression number" style="color:rgb(181, 206, 168)">0</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">define</span><span class="token macro property"> </span><span class="token macro property macro-name">I2C_1</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(220, 220, 170)">INST</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token macro property expression number" style="color:rgb(181, 206, 168)">1</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="访问属性"></a>访问属性<a class="hash-link" href="#访问属性" title="Direct link to heading">#</a></h2><p>读取属性值的正确 API ，属性值取决于节点和属性。</p><ul><li><a href="#%E6%A3%80%E6%9F%A5%E5%B1%9E%E6%80%A7%E4%B8%8E%E5%AF%B9%E5%BA%94%E5%80%BC">检查属性与对应值</a></li><li><a href="#%E7%AE%80%E5%8D%95%E5%B1%9E%E6%80%A7">简单属性</a></li><li><a href="#reg-%E5%B1%9E%E6%80%A7">reg 属性</a></li><li><a href="#interrupts-%E5%B1%9E%E6%80%A7">interrupts 属性</a></li><li><a href="#phandle-%E5%B1%9E%E6%80%A7">phandle 属性</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="检查属性与对应值"></a>检查属性与对应值<a class="hash-link" href="#检查属性与对应值" title="Direct link to heading">#</a></h3><p>你可以使用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_node_has_propnode_id-prop"><code>DT_NODE_HAS_PROP()</code></a> 来检查节点是否具有某属性。对于上文提及的 <a href="#dts-example">示例设备树</a> ：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">DT_NODE_HAS_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">DT_NODELABEL</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i2c1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> clock_frequency</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">/* expands to 1 */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">DT_NODE_HAS_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">DT_NODELABEL</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i2c1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> not_a_property</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">   </span><span class="token comment" style="color:rgb(106, 153, 85)">/* expands to 0 */</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="简单属性"></a>简单属性<a class="hash-link" href="#简单属性" title="Direct link to heading">#</a></h3><p>使用 <code>DT_PROP(node_id, property)</code> 读取基本类型属性，如整型（ integer ）、布尔型（ boolean ）、字符串（ string ）、数值数组和字符串数组。</p><p>例如，对 <a href="#dts-example">上例</a> 的设备树读取 <code>clock-frequency</code> 属性值：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">DT_PATH</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">soc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i2c_40002000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> clock_frequency</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">/* This is 100000, */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">DT_NODELABEL</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i2c1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> clock_frequency</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">          </span><span class="token comment" style="color:rgb(106, 153, 85)">/* and so is this, */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">DT_ALIAS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">sensor_controller</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> clock_frequency</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">/* and this. */</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>重要</h5></div><div class="admonition-content"><p>DTS 属性 <code>clock-frequency</code> 在 C 中转换为 <code>clock_frequency</code> 。这是因为，属性名也将特殊字符转换为下划线，并强制转换为小写。</p></div></div><p><code>string</code> 和 <code>boolean</code> 的属性的处理方式完全相同。在属性为字符串的情况下， <code>DT_PROP()</code> 宏扩展为字符串文字；在布尔值的情况下，扩展为数字 0 或 1。例如：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">define</span><span class="token macro property"> </span><span class="token macro property macro-name">I2C1</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(220, 220, 170)">DT_NODELABEL</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token macro property expression">i2c1</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">I2C1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">/* expands to the string literal &quot;okay&quot; */</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>注意</h5></div><div class="admonition-content"><p> <code>DT_NODE_HAS_PROP()</code> 不应用在 <code>boolean</code> 属性上，而应像上例一样使用 <code>DT_PROP()</code> 。 <code>DT_PROP()</code> 会根据属性是否存在，它将展开为 0 或 1。</p></div></div><p><code>array</code> 、 <code>uint8-array</code> 和 <code>string-array</code> 的属性的处理方式类似 —— 对于数组属性， <code>DT_PROP()</code> 将其展开为一个数组初始值。例如在此设备树片段中：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">foo</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> foo@</span><span class="token number" style="color:rgb(181, 206, 168)">1234</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        a </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3000</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">/* array */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        b </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">aa bb cc dd</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">/* uint8-array */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        c </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;bar&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;baz&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(106, 153, 85)">/* string-array */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>可以像这样访问它的属性：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">define</span><span class="token macro property"> </span><span class="token macro property macro-name">FOO</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(220, 220, 170)">DT_NODELABEL</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token macro property expression">foo</span><span class="token macro property expression punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">FOO</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">           </span><span class="token comment" style="color:rgb(106, 153, 85)">/* {1000, 2000, 3000} */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">char</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">FOO</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">/* {0xaa, 0xbb, 0xcc, 0xdd} */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">char</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">FOO</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(106, 153, 85)">/* {&quot;foo&quot;, &quot;bar&quot;} */</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>你可以使用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_prop_lennode_id-prop"><code>DT_PROP_LEN()</code></a> 来获取这些数组属性的长度。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token class-name" style="color:rgb(78, 201, 176)">size_t</span><span class="token plain"> a_len </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP_LEN</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">FOO</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">/* 3 */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token class-name" style="color:rgb(78, 201, 176)">size_t</span><span class="token plain"> b_len </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP_LEN</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">FOO</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">/* 4 */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token class-name" style="color:rgb(78, 201, 176)">size_t</span><span class="token plain"> c_len </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_PROP_LEN</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">FOO</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">/* 2 */</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>DT_PROP_LEN()</code> 不能用于特殊的 <code>reg</code> 或 <code>interrupts</code> 属性。对于这些情况有另外的宏作为替代，下文中将对其进行描述。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="reg-属性"></a>reg 属性<a class="hash-link" href="#reg-属性" title="Direct link to heading">#</a></h3><p>在 <a href="/docs-csk6/chips/600X/build/dts/intro#%E9%87%8D%E8%A6%81%E5%B1%9E%E6%80%A7">重要属性</a> 中已对 <code>reg</code> 进行过相关介绍。</p><p>给定节点 id <code>node_id</code> ，则 <code>DT_NUM_REGS(node_id)</code> 表示节点 <code>reg</code> 属性中的寄存器块总数。</p><p>你 <strong>无法</strong> 通过 <code>DT_PROP(node, reg)</code> 读取寄存器块的地址和大小。</p><ul><li><code>DT_REG_ADDR(node_id)</code>: 给定节点的寄存器块的地址</li><li><code>DT_REG_SIZE(node_id)</code>: 给定的寄存器块的大小</li></ul><p>如果节点有多个寄存器块，则改用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_reg_addr_by_idxnode_id-idx"><code>DT_REG_ADDR_BY_IDX()</code></a> 或 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_reg_size_by_idxnode_id-idx"><code>DT_REG_SIZE_BY_IDX()</code></a> ：</p><ul><li><code>DT_REG_ADDR_BY_IDX(node_id, idx)</code>: 索引 <code>idx</code> 对应寄存器块的地址</li><li><code>DT_REG_SIZE_BY_IDX(node_id, idx)</code>: 索引 <code>idx</code> 对应寄存器块的大小</li></ul><p>这里的 <code>idx</code> 参数必须是整型数字或可扩展为一个无需任何算术的宏。尤其要注意， <code>idx</code> 不能是变量。像这样的例子就不起作用：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">/* 这样写会导致编译器报错 */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token class-name" style="color:rgb(78, 201, 176)">size_t</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_NUM_REGS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">node_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">++</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token class-name" style="color:rgb(78, 201, 176)">size_t</span><span class="token plain"> addr </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">DT_REG_ADDR_BY_IDX</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">node_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="interrupts-属性"></a>interrupts 属性<a class="hash-link" href="#interrupts-属性" title="Direct link to heading">#</a></h3><p>在 <a href="/docs-csk6/chips/600X/build/dts/intro#%E9%87%8D%E8%A6%81%E5%B1%9E%E6%80%A7">重要属性</a> 中已对 <code>interrupts</code> 进行过相关介绍。</p><p>给定节点 id  <code>node_id</code> ， <code>DT_NUM_IRQS(node_id)</code> 表示节点 <code>interrupts</code> 属性中的中断说明符的总数。</p><p>在访问这些变量的场景中，最通用 API 宏是 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_irq_by_idxnode_id-idx-cell"><code>DT_IRQ_BY_IDX()</code></a> ：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">DT_IRQ_BY_IDX</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">node_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> idx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这里的 <code>idx</code> 是 <code>interrupts</code> 数组的逻辑索引（ index ），它用于指向属性中的单个中断说明符。 <code>val</code> 参数是中断说明符中的单元格的名称。要使用此宏，请在绑定文件中查找对应节点的 <code>val</code> 名称。</p><p>大多数 Zephyr 设备树绑定都有一个名为 <code>irq</code> 的单元，即中断编号。若你要获取此值的处理完成的概览，使用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_irqnnode_id"><code>DT_IRQN()</code></a> 是一种便捷的方式。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</h5></div><div class="admonition-content"><p>这里提到的“处理完成”指的是， Zephyr 的设备树 <a href="/docs-csk6/chips/600X/build/dts/intro#%E8%84%9A%E6%9C%AC%E4%B8%8E%E5%B7%A5%E5%85%B7">脚本和工具</a> 会更改 <a href="/docs-csk6/chips/600X/build/dts/intro#%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6">zephyr.dts</a> 中的 <code>irq</code> 编号以处理某些 SoC 上的硬件约束，并使其符合 Zephyr 的多级中断编号。</p><p>由于这块内容目前没有很好的文档记录，如果你正在编写设备驱动程序，可能需要阅读脚本的源代码和现有驱动程序来了解更多详细信息。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="phandle-属性"></a>phandle 属性<a class="hash-link" href="#phandle-属性" title="Direct link to heading">#</a></h3><p>在 <a href="/docs-csk6/chips/600X/build/dts/intro#%E8%AE%BE%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%80%BC">设置属性值</a> 中介绍过，phandle 语法支持使用 <code>&amp;another-node</code> 在属性值中引用其他节点。在绑定中， phandle 属性包含在 <code>phandle</code> 、 <code>phandles</code> 或 <code>phandle-array</code> 中。我们将这些统称为为“phandle 属性”。</p><p>当你要将 phandle 转换为节点 id 时，可以使用 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_phandlenode_id-prop"><code>DT_PHANDLE()</code></a> 、 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_phandle_by_idxnode_id-prop-idx"><code>DT_PHANDLE_BY_IDX()</code></a> 或 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_phandle_by_namenode_id-pha-name"><code>DT_PHANDLE_BY_NAME()</code></a> ，具体取决于你使用的属性类型。</p><p>phandle 属性的一个常见用例是，引用其他在设备树中的硬件。在这一场景中，你通常希望将设备树级别的 phandle 转换为 Zephyr 驱动程序级别的设备结构体 <a href="https://docs.zephyrproject.org/latest/kernel/drivers/index.html#device-model-api" target="_blank" rel="noopener noreferrer">struct device</a> 。可参阅 <a href="/docs-csk6/chips/600X/build/dts/howtos#%E4%BB%8E%E8%AE%BE%E5%A4%87%E6%A0%91%E4%B8%AD%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%BB%93%E6%9E%84%E4%BD%93">从设备树中获取设备结构体</a> 了解怎么做。</p><p>另一个常见用例是访问 phandle 数组中的标识符值。实现这一用法的通用 API 是 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_pha_by_idxnode_id-pha-idx-cell"><code>DT_PHA_BY_IDX()</code></a> 和 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_phanode_id-pha-cell"><code>DT_PHA()</code></a> 。也有特定于硬件的一些用法：<a href="/docs-csk6/chips/600X/build/dts/api/api#dt_gpio_ctlr_by_idxnode_id-gpio_pha-idx"><code>DT_GPIO_CTLR_BY_IDX()</code></a> 、 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_gpio_ctlrnode_id-gpio_pha"><code>DT_GPIO_CTLR()</code></a> 、 <a href="https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_GPIO_LABEL_BY_IDX" target="_blank" rel="noopener noreferrer"><code>DT_GPIO_LABEL_BY_IDX()</code></a> 、 <a href="https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_GPIO_LABEL" target="_blank" rel="noopener noreferrer"><code>DT_GPIO_LABEL()</code></a> 、 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_gpio_pin_by_idxnode_id-gpio_pha-idx"><code>DT_GPIO_PIN_BY_IDX()</code></a> 、 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_gpio_pinnode_id-gpio_pha"><code>DT_GPIO_PIN()</code></a> 、 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_gpio_flags_by_idxnode_id-gpio_pha-idx"><code>DT_GPIO_FLAGS_BY_IDX()</code></a> 或 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_gpio_flagsnode_id-gpio_pha"><code>DT_GPIO_FLAGS()</code></a></p><p>要检查标识符值是否存在于 phandle 属性中，请参阅 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_pha_has_cell_at_idxnode_id-pha-idx-cell"><code>DT_PHA_HAS_CELL_AT_IDX()</code></a> 和 <a href="https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_PROP_HAS_IDX" target="_blank" rel="noopener noreferrer"><code>DT_PROP_HAS_IDX()</code></a> 。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="其他-api"></a>其他 API<a class="hash-link" href="#其他-api" title="Direct link to heading">#</a></h2><p>以下是其他一些可用 API 。</p><ul><li><a href="/docs-csk6/chips/600X/build/dts/api/api#dt_chosenprop"><code>DT_CHOSEN()</code></a>, <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_has_chosenprop"><code>DT_HAS_CHOSEN()</code></a>: 用于特殊 /chosen 节点的属性</li><li><a href="/docs-csk6/chips/600X/build/dts/api/api#dt_has_compat_status_okaycompat"><code>DT_HAS_COMPAT_STATUS_OKAY()</code></a>, <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_node_has_compatnode_id-compat"><code>DT_NODE_HAS_COMPAT()</code></a>: 与 <code>compatible</code> 属性相关的全局的或节点特定的测试</li><li><a href="/docs-csk6/chips/600X/build/dts/api/api#dt_busnode_id"><code>DT_BUS()</code></a>: 获取一个节点的总线控制器（如果有）</li><li><a href="/docs-csk6/chips/600X/build/dts/api/api#dt_enum_idxnode_id-prop"><code>DT_ENUM_IDX()</code></a>: 用于取值声明为 enum 的属性，用于查找属性值在其固定选项列表中的索引</li><li><a href="/docs-csk6/chips/600X/build/dts/api/api#devicetree-flash-api">固定的 flash 分区</a>: 用于管理固定的 flash 分区。也可参考 <a href="/docs-csk6/chips/600X/service/storage/flash_map">Flash map</a> 查阅如何使用更友好的 API 达成目的。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="设备驱动便捷性"></a>设备驱动便捷性<a class="hash-link" href="#设备驱动便捷性" title="Direct link to heading">#</a></h2><p>在编写一些设备驱动程序时特殊的宏很有用，这类驱动通常依赖于 <a href="#%E8%8A%82%E7%82%B9-id">实例的节点 id</a> 。</p><p>要使用这些宏，你必须定义 <code>DT_DRV_COMPAT</code> 为驱动程序实现支持的 <code>compat</code> 值。该 <code>compat</code> 值最终将传给 <a href="/docs-csk6/chips/600X/build/dts/api/api#dt_instinst-compat"><code>DT_INST()</code></a> 。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(206, 145, 120)">&lt;zephyr/devicetree.h&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DT_DRV_COMPAT</span><span class="token macro property"> </span><span class="token macro property expression">my_driver_compat</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/* 等价于 DT_INST(0, my_driver_compat): */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">DT_DRV_INST</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/*</span></span><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"> * 等价于 DT_PROP(DT_INST(0, my_driver_compat), clock_frequency)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"> */</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">DT_INST_PROP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> clock_frequency</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>请在 <a href="/docs-csk6/chips/600X/build/dts/api/api#devicetree-inst-apis">基于实例的 API</a> 中参考相关通用 API 引用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="特定于硬件的-api"></a>特定于硬件的 API<a class="hash-link" href="#特定于硬件的-api" title="Direct link to heading">#</a></h2><p>这些 API 是基于上述 API 之上构建的，它们提供了更便利的方式访问硬件，也提升了硬件特定代码的可读性。请参阅 <a href="/docs-csk6/chips/600X/build/dts/api/api#devicetree-hw-api">特定于硬件的 API</a> 了解相关详细信息。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="生成的宏"></a>生成的宏<a class="hash-link" href="#生成的宏" title="Direct link to heading">#</a></h2><p>在 <code>devicetree.h</code> API 还未生成之前，本小节所阐述的生成的宏依赖 <a href="/docs-csk6/chips/600X/build/dts/intro#%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6">devicetree_unfixed.h</a>。这一 C 头文件在每个应用程序构建目录中都将生成，其中包含的宏用于描述设备树数据。</p><p>这些宏具有棘手的命名约定， <a href="/docs-csk6/chips/600X/build/dts/api/api">设备树 API</a> 将其抽象出来。实际上可视这些宏为设备树 API 的实现细节，但因为它们经常出现在编译器错误消息中，所以理解它们也是很有用的。</p><p>本节包含这些宏所使用语法基于扩充巴科斯-瑙尔范式（ABNF），并在注释中提供示例和更多详细信息。请参阅 <a href="https://tools.ietf.org/html/rfc7405" target="_blank" rel="noopener noreferrer">RFC 7405</a>（本质上是 <a href="https://tools.ietf.org/html/rfc5234" target="_blank" rel="noopener noreferrer">RFC 5234</a> 的扩展）了解其语法规范。</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</h5></div><div class="admonition-content"><p>要阅读以下示例，需要对 ABNF 和 BNF 都具备一定的了解。这里更重要的点是，理解宏的生成过程基于 ABNF 来完成，而不是完全读懂下例的完整代码。</p></div></div><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> An RFC </span><span class="token number" style="color:rgb(181, 206, 168)">7405</span><span class="token plain"> ABNF grammar </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> devicetree macros</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> This does </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">not</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> cover macros pulled out of DT via Kconfig</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> like CONFIG_SRAM_BASE_ADDRESS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> etc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> It only describes the</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> ones that start with DT_ and are directly generated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> not</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> defined in a dts_fixup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">h file</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> the top level nonterminal </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> a devicetree macro</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> A dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro starts with uppercase </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> and is one of</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> generated </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> a particular node</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> some </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> a catch</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">all </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> other types of macros</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> a macro related to a node</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> A macro about a property value</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">  property</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> A macro about the pinctrl properties in a node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> EXISTS macro</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> node exists in the devicetree</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Bus macros</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> the plain BUS is a way to access a node&#x27;s bus controller</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The additional dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name suffix is added to match that node&#x27;s bus type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> the dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name in this </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token plain"> is something like </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;spi&quot;</span><span class="token plain"> or </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;i2c&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_BUS&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The reg property is special and has its own macros</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_REG_NUM&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_REG_IDX_&quot;</span><span class="token plain"> DIGIT </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_REG_IDX_&quot;</span><span class="token plain"> DIGIT</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_VAL_&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ADDRESS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;SIZE&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_REG_NAME_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_VAL_&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ADDRESS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;SIZE&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The interrupts property is also special</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_IRQ_NUM&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_IRQ_IDX_&quot;</span><span class="token plain"> DIGIT </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_IRQ_IDX_&quot;</span><span class="token plain"> DIGIT</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_VAL_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_IRQ_NAME_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_VAL_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The ranges property is also special</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_RANGES_NUM&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_RANGES_IDX_&quot;</span><span class="token plain"> DIGIT </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_RANGES_IDX_&quot;</span><span class="token plain"> DIGIT</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_VAL_&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;CHILD_BUS_FLAGS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;CHILD_BUS_ADDRESS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                          </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;PARENT_BUS_ADDRESS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;LENGTH&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_RANGES_IDX_&quot;</span><span class="token plain"> DIGIT</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_VAL_CHILD_BUS_FLAGS_EXISTS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_FOREACH_RANGE&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Subnodes of the fixed</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">partitions compatible get macros which contain</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> a unique ordinal value </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> each partition</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PARTITION_ID&quot;</span><span class="token plain"> DIGIT</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Macros are generated </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> each of a node&#x27;s compatibles</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name in this </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token plain"> is something like </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;vnd_device&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_COMPAT_MATCHES_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Every non</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">root node gets one of these macros</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> which expands to the node</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> identifier </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> that node&#x27;s parent in the devicetree</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PARENT&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> These are used internally by DT_FOREACH_CHILD</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> which iterates over</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> each child node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_FOREACH_CHILD&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_FOREACH_CHILD_VARGS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> These are used internally by DT_FOREACH_CHILD_STATUS_OKAY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> which iterates</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> over each child node with status </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;okay&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_FOREACH_CHILD_STATUS_OKAY&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_FOREACH_CHILD_STATUS_OKAY_VARGS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The node&#x27;s zero</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">based index in the list of it</span><span class="token char" style="color:rgb(209, 105, 105)">&#x27;s parent&#x27;</span><span class="token plain">s child nodes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_CHILD_IDX&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The node&#x27;s status macro</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name in this </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token plain"> is something like </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;okay&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> or </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;disabled&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_STATUS_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The node&#x27;s dependency ordinal</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> This is a non</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">negative integer</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> value that is used to represent dependency information</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_ORD&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The node&#x27;s path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> as a string literal</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PATH&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The node&#x27;s name@unit</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">addr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> as a string literal</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_FULL_NAME&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The dependency ordinals of a node&#x27;s </span><span class="token function" style="color:rgb(220, 220, 170)">requirements</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">direct dependencies</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_REQUIRES_ORDS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The dependency ordinals of a node </span><span class="token function" style="color:rgb(220, 220, 170)">supports</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">reverse direct dependencies</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_SUPPORTS_ORDS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> a macro related to the pinctrl properties in a node</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> These are a bit of a special </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token plain"> because they kind of form an array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> but the array indexes correspond to pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">DIGIT properties in a node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> So they&#x27;re related to a node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> but not just one property within the node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The following examples assume something like this</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">      foo </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">              pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">bar</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">              pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">baz</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">              pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">names </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;default&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;sleep&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Total number of pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">DIGIT properties in the node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> May be zero</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_NUM </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PINCTRL_NUM&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> A given pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">DIGIT property exists</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_IDX_0_EXISTS </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_IDX_1_EXISTS </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PINCTRL_IDX_&quot;</span><span class="token plain"> DIGIT </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> A given pinctrl property name exists</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_NAME_default_EXISTS </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_NAME_sleep_EXISTS </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PINCTRL_NAME_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_EXISTS&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The corresponding index number of a named pinctrl property</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_NAME_default_IDX </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_NAME_sleep_IDX </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PINCTRL_NAME_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_IDX&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The node identifier </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> the phandle in a named pinctrl property</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">    #define DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_PINCTRL_NAME_default_IDX_0_PH </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node id </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> </span><span class="token char" style="color:rgb(209, 105, 105)">&#x27;bar&#x27;</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> There&#x27;s no need </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> a separate macro </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> access by index</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> that&#x27;s</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> covered by property</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> We only need this because the map from</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> names to properties is implicit in the structure of the DT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pinctrl</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PINCTRL_NAME_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_IDX_&quot;</span><span class="token plain"> DIGIT </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_PH&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> property</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> a macro related to a node property</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> These combine a node identifier with a </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;lowercase-and-underscores form&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> property name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> The value expands to something related to the property&#x27;s</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The optional prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">suf suffix is when there&#x27;s some specialized</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> subvalue that deserves its own macro</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> like the macros </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> an array</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> property&#x27;s individual elements</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;plain vanilla&quot;</span><span class="token plain"> macro </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> a property&#x27;s value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> with no prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">suf</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> looks like this</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   DT_N_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">node path</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_P_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">property name</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Components</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> node&#x27;s devicetree path converted to a C token</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> node&#x27;s property name converted to a C token</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">suf</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> an optional property</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">specific suffix</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">property</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N&quot;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_P_&quot;</span><span class="token plain"> prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">suf</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> a node&#x27;s path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">based macro identifier</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> This in </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;lowercase-and-underscores&quot;</span><span class="token plain"> form</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> I</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> it is</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> the node&#x27;s devicetree path converted to a C token by changing</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> each </span><span class="token function" style="color:rgb(220, 220, 170)">slash</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> to _S_</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> all letters to lowercase</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> non</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">alphanumerics characters to underscores</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> For example</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> the leaf node </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;bar-BAZ&quot;</span><span class="token plain"> in this devicetree</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">           foo@</span><span class="token number" style="color:rgb(181, 206, 168)">123</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                   bar</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">BAZ </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">           </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> has path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_S_foo_123_S_bar_baz&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_S_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> a property identifier</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> A property name converted to a C token by changing</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> all letters to lowercase</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> non</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">alphanumeric characters to underscores</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Example node</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   chosen </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">       zephyr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain">console </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">uart1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">       WHY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain">AM_I_SHOUTING </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;unclear&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The </span><span class="token char" style="color:rgb(209, 105, 105)">&#x27;zephyr,console&#x27;</span><span class="token plain"> property has prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token char" style="color:rgb(209, 105, 105)">&#x27;zephyr_console&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token char" style="color:rgb(209, 105, 105)">&#x27;WHY,AM_I_SHOUTING&#x27;</span><span class="token plain"> has prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token char" style="color:rgb(209, 105, 105)">&#x27;why_am_i_shouting&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">suf</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> a property</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">specific macro suffix</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Extra macros are generated </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> properties</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> that are special to the </span><span class="token function" style="color:rgb(220, 220, 170)">specification</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;reg&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;interrupts&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> etc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> with array </span><span class="token function" style="color:rgb(220, 220, 170)">types</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">uint8</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> phandle</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> etc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> with </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;enum:&quot;</span><span class="token plain"> in their bindings</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> that have zephyr device API specific macros </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> phandle</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">arrays</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> related to phandle specifier </span><span class="token function" style="color:rgb(220, 220, 170)">names</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;foo-names&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Here are some examples</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> _EXISTS</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> property</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> index or name existence flag</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> _SIZE</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> logical property length</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> _IDX_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> values of individual array elements</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> _IDX_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">DIGIT</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">_VAL_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> values of individual specifier</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   cells within a phandle array</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> _ADDR_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> reg properties</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> the i</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">th </span><span class="token keyword" style="color:rgb(86, 156, 214)">register</span><span class="token plain"> block address</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> _LEN_</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> reg properties</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> the i</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">th </span><span class="token keyword" style="color:rgb(86, 156, 214)">register</span><span class="token plain"> block length</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The different cases are not exhaustively documented here to avoid</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> this file going stale</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> Please see devicetree</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">h </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> you need to know</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> the details</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">prop</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">suf </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token plain"> gen</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> grab bag </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> everything that isn&#x27;t a node</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> See examples below</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N_&quot;</span><span class="token plain"> alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Total count of enabled instances of a compatible</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_N_INST_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_NUM_OKAY&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> These are used internally by DT_FOREACH_STATUS_OKAY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> which iterates over each enabled node of a compatible</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_FOREACH_OKAY_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_FOREACH_OKAY_VARGS_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> These are used internally by DT_INST_FOREACH_STATUS_OKAY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> which iterates over each enabled instance of a compatible</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_FOREACH_OKAY_INST_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_FOREACH_OKAY_INST_VARGS_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> E</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> #define DT_CHOSEN_zephyr_flash</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_CHOSEN_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Declares that a compatible has at least one node on a bus</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Example</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   #define DT_COMPAT_vnd_dev_BUS_spi </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_COMPAT_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_BUS_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Declares that a compatible has at least one status </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;okay&quot;</span><span class="token plain"> node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Example</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   #define DT_COMPAT_HAS_OKAY_vnd_dev </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_COMPAT_HAS_OKAY_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Currently used to allow mapping a lowercase</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">and</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">underscores </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;label&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> property to a fixed</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">partitions node</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> See the flash map API docs</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> an example</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">other</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">macro </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;DT_COMPAT_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_LABEL_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> another way to specify a node besides a path</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Example devicetree</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">           aliases </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                   dev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">dev_1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">           </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">           soc </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">               dev_1</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> device@</span><span class="token number" style="color:rgb(181, 206, 168)">123</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                   compatible </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;vnd,device&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">               </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">           </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Node device@</span><span class="token number" style="color:rgb(181, 206, 168)">123</span><span class="token plain"> has these alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id values</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> ALIAS_dev</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> NODELABEL_dev_1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> INST_0_vnd_device</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> The full alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id macros are</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   #define DT_N_INST_0_vnd_device     DT_N_S_soc_S_device_123</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   #define DT_N_ALIAS_dev             DT_N_S_soc_S_device_123</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">   #define DT_N_NODELABEL_dev_1       DT_N_S_soc_S_device_123</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> These mainly exist to allow pasting an alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id macro onto a</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_P_&lt;prop-id&gt;&quot;</span><span class="token plain"> to access node properties given a node&#x27;s alias</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> etc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> Notice that </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;inst&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">type IDs have a leading instance identifier</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> which is generated by the devicetree scripts</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"> The other types of</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id begin immediately with names taken from the devicetree</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ALIAS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;NODELABEL&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">alternate</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">id </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">s</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;INST_&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">DIGIT </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token plain"> dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> miscellaneous helper definitions</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> A dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name is one or more</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> lowercase ASCII </span><span class="token function" style="color:rgb(220, 220, 170)">letters</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">a</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">numbers</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">underscores</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> They are the result of converting names or combinations of names</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> from devicetree to a valid component of a C identifier by</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> lowercasing </span><span class="token function" style="color:rgb(220, 220, 170)">letters</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">in practice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> this is a no</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">op</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> and converting</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> non</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">alphanumeric characters to underscores</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> You&#x27;ll see these referred to as </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;lowercase-and-underscores&quot;</span><span class="token plain"> forms of</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> various devicetree identifiers throughout the documentation</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> lower </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> DIGIT </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> gen</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name is used as a stand</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">in </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> a component of a generated macro</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> name which does not come from </span><span class="token function" style="color:rgb(220, 220, 170)">devicetree</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">dt</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name covers that </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> uppercase ASCII </span><span class="token function" style="color:rgb(220, 220, 170)">letters</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">a</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">numbers</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">underscores</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">gen</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> upper </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> upper </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> DIGIT </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;_&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;lowercase ASCII letter&quot;</span><span class="token plain"> turns out to be pretty annoying to specify</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> in RFC</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">7405</span><span class="token plain"> syntax</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> This is just ASCII letters </span><span class="token function" style="color:rgb(220, 220, 170)">a</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0x61</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> through </span><span class="token function" style="color:rgb(220, 220, 170)">z</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0x7a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">lower </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">x61</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token plain">A</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;uppercase ASCII letter&quot;</span><span class="token plain"> in RFC</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">7405</span><span class="token plain"> syntax</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">upper </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain">x41</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain">A</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/build/dts/howtos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 设备树操作指引</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/build/dts/troubleshooting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">问题排查 »</div></a></div></nav><div class="gitalk-wrapper"><ul class="gitalk-option"><li class="like"><i class="icon like-icon"></i> <span id="like_num">有帮助  0</span></li><li class="unlike"><i class="icon unlike-icon"></i> <span id="unlike_num">没帮助 0</span></li><li>文档反馈</li></ul></div></div></div><div class="col col--3" style="padding-left:0px"><div class="tableOfContents_k96L thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#给-linux-开发者的小贴士" class="table-of-contents__link">给 Linux 开发者的小贴士</a></li><li><a href="#节点-id" class="table-of-contents__link">节点 id</a></li><li><a href="#节点-id-并不是值" class="table-of-contents__link">节点 id 并不是值</a></li><li><a href="#访问属性" class="table-of-contents__link">访问属性</a><ul><li><a href="#检查属性与对应值" class="table-of-contents__link">检查属性与对应值</a></li><li><a href="#简单属性" class="table-of-contents__link">简单属性</a></li><li><a href="#reg-属性" class="table-of-contents__link">reg 属性</a></li><li><a href="#interrupts-属性" class="table-of-contents__link">interrupts 属性</a></li><li><a href="#phandle-属性" class="table-of-contents__link">phandle 属性</a></li></ul></li><li><a href="#其他-api" class="table-of-contents__link">其他 API</a></li><li><a href="#设备驱动便捷性" class="table-of-contents__link">设备驱动便捷性</a></li><li><a href="#特定于硬件的-api" class="table-of-contents__link">特定于硬件的 API</a></li><li><a href="#生成的宏" class="table-of-contents__link">生成的宏</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 安徽聆思智能科技有限公司皖ICP备05001217号</div></div></div></footer></div>
<script src="/docs-csk6/assets/js/runtime~main.515bc6ee.js"></script>
<script src="/docs-csk6/assets/js/main.5a2ba94c.js"></script>
<script>!function(e,n,s,t,d){e[s]=e[s]||function(){(e[s].a=e[s].a||[]).push(arguments)},(d=n.createElement("script")).async=!0,d.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",n.body.appendChild(d)}(window,document,"simplemde")</script></body>
</html>