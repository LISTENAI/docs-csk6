<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">Zephyr CMake Package(包) | 聆思文档中心</title><meta data-react-helmet="true" property="og:url" content="https://github.com/LISTENAI/docs-csk6/chips/600X/build/cmake_package"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Zephyr CMake Package(包) | 聆思文档中心"><meta data-react-helmet="true" name="description" content="The Zephyr CMake package is a convenient way to create a Zephyr-based application."><meta data-react-helmet="true" property="og:description" content="The Zephyr CMake package is a convenient way to create a Zephyr-based application."><link data-react-helmet="true" rel="shortcut icon" href="/docs-csk6/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/LISTENAI/docs-csk6/chips/600X/build/cmake_package"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/build/cmake_package" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/build/cmake_package" hreflang="x-default"><link rel="stylesheet" href="/docs-csk6/assets/css/styles.e821b6b0.css">
<link rel="preload" href="/docs-csk6/assets/js/runtime~main.3a2fc554.js" as="script">
<link rel="preload" href="/docs-csk6/assets/js/main.3e06e6a1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_vO2r">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a><a class="navbar__item navbar__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a><a class="navbar__item navbar__link" href="/docs-csk6/tools/LStudio">工具</a><a class="navbar__item navbar__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a><a class="navbar__item navbar__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs-csk6/faq/faq">FAQ</a><a class="navbar__item navbar__link" href="/docs-csk6/school/school">视频课程</a><a class="navbar__item navbar__link" href="/docs-csk6/workorder/workorder">工单</a><div class="react-toggle displayOnlyInLargeViewport_a-w0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_8pH0"><img src="/docs-csk6/img/light.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/unlight.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div><div class="react-toggle-track-x"><span class="toggle_8pH0"><img src="/docs-csk6/img/undark.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/dark.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/tools/LStudio">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/faq/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/school/school">视频课程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/workorder/workorder">工单</a></li></ul></div></div></div></nav><nav class="navbar subnavbar--fixed-top sub-navbar"><div class="navbar__inner subnavbar__inner"><div class="navbar__items"><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/4002/Chip_information_4002">CSK4002</a><a aria-current="page" class="subnavbar__item subnavbar__link subnavbar__link--active" dirname="/chips" href="/docs-csk6/chips/600X/overview/chips">CSK600X</a><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/micropython/index">MicroPython</a></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_Ol8-"><aside class="docSidebarContainer_UfDv"><div class="sidebar_OMtR"><nav class="menu menu--responsive thin-scrollbar menu_2y2e menuWithAnnouncementBar_Lwkw" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_IcOF" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">简介</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/chips">芯片</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit">NanoKit 开发套件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/system">系统与软件</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/getting_start">快速开始</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/application_development">应用开发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">烧录与调试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/csk6_load">CSK6 烧录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-daplink">基于 DAPLink 的 GDB 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-jlink">基于 J-Link 的 GDB 调试</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">配套命令行工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/install">安装开发工具</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/basic">基础命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/command_detail">内置命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/build_flash_debug">编译 烧录 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/filesystem">文件系统相关</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/application_project">应用级提货单</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/trouble_shooting">疑难解答</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/release_note">Lisa Zephyr 更新日志</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">使用示例</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">外设驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/overview">外设驱动的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/gpio">GPIO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/pwm">PWM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/UART">串口(UART)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/I2C">I2C</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/spi">SPI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/ADC">ADC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/RTC">RTC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/watchdog">WatchDog</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/timer">Timer定时器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/multithread">多线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_semaphore">线程间同步之信号量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_mutex">线程间同步之互斥量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_poll">线程间同步之轮询</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/logger">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/usb_class">USB 模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/display_kscan">显示&amp;触摸</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/lvgl">LVGL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/shell_sample">SHELL的使用</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">音频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record">录音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_playback">播音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record_play">录音和播音示例</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">网络</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/wifi_connect">WIFI连接</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/customdriver/custom-driver-video">添加自定义驱动</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义板型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/board">添加自定义板型</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/index">概述</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">内核服务</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">调度、中断与同步</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/threads">线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/system_threads">系统线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/workqueue">工作队列线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/interrupts">中断</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/semaphores">信号量</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/index">概述</a></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--first menu__link--sublist menu__link--active" type="first" href="#!">构建与配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/build/cmake/index">构建系统（ CMake ）</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs-csk6/chips/600X/build/cmake_package">Zephyr CMake Package(包)</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">设备树</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/intro">设备树概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/design">设计目标</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/bindings">设备树绑定</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/troubleshooting">疑难解答</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/dt_vs_kconfig">设备树 VS Kconfig</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">Kconfig配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_gui">Kconfig交互界面</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_configuration">设置Kconfig配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_tips_and_demo">小贴士与最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_custom">自定义 Kconfig 预处理函数</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_extension">Kconfig 拓展</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">硬件支持</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/hardware/pinctrl">引脚控制</a></li></ul></li><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/reference/index.html" target="_blank" rel="noopener noreferrer" class="menu__link"><span>API 文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">疑难解答</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/FAQ/index">FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/quick_start/doc_issue">反馈</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_dRYS"><div class="container padding-top--md padding-bottom--lg center-container"><div class="row"><div class="col docItemCol_+xOG"><div class="docItemContainer_c+5G"><article><div class="markdown"><header><h1 class="h1Heading_5RMM">Zephyr CMake Package(包)</h1></header><p>The Zephyr <a href="https://cmake.org/cmake/help/latest/manual/cmake-packages.7.html" target="_blank" rel="noopener noreferrer">CMake package</a> is a convenient way to create a Zephyr-based application.</p><p>The Zephyr CMake package ensures that CMake can automatically select a Zephyr to use for building the application, whether it is a <a href="https://docs.zephyrproject.org/latest/develop/application/index.html#zephyr-repo-app" target="_blank" rel="noopener noreferrer">Zephyr repository application</a>, <a href="https://docs.zephyrproject.org/latest/develop/application/index.html#zephyr-workspace-app" target="_blank" rel="noopener noreferrer">Zephyr workspace application</a>, or a <a href="https://docs.zephyrproject.org/latest/develop/application/index.html#zephyr-freestanding-app" target="_blank" rel="noopener noreferrer">Zephyr freestanding application</a>.</p><p>When developing a Zephyr-based application, then a developer simply needs to write <code>find_package(Zephyr)</code> in the beginning of the application <code>CMakeLists.txt</code> file.</p><p>To use the Zephyr CMake package it must first be exported to the CMake user package registry. This is means creating a reference to the current Zephyr installation inside the CMake user package registry.</p><p>Zephyr <a href="https://cmake.org/cmake/help/latest/manual/cmake-packages.7.html" target="_blank" rel="noopener noreferrer">CMake Package</a>(包) 非常适合创建基于 Zephyr 的应用。</p><p>Zephyr CMake Package(包) 确保 CMake 可以自动选择 Zephyr 用于编译应用，无论是<a href="https://docs.zephyrproject.org/latest/develop/application/index.html#zephyr-workspace-app" target="_blank" rel="noopener noreferrer">Zephyr 集成式应用</a>，还是 <a href="https://docs.zephyrproject.org/latest/develop/application/index.html#zephyr-freestanding-app" target="_blank" rel="noopener noreferrer">Zephyr 独立式应用</a>。</p><p>在开发基于 Zephyr 的应用时，开发者只需要在应用的目录 <code>CMakeLists.txt</code> 文件的开头写入 <code>find_package(Zephyr)</code> 即可。</p><p>要使用 Zephyr CMake Package(包) 必须先将其导出到 <a href="https://cmake.org/cmake/help/latest/manual/cmake-packages.7.html#user-package-registry" target="_blank" rel="noopener noreferrer">CMake 用户包注册表</a>。上述的意思是在 CMake 用户包注册表中创建一个到当前 Zephyr 的引用。</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_TMUB tabs__item--active">Ubuntu</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TMUB">macOS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TMUB">Windows</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>In Linux, the CMake user package registry is found in:</p><p><code>~/.cmake/package/Zephyr</code></p><p>在 Linux 中，CMake 用户包注册表在:</p><p><code>~/.cmake/package/Zephyr</code></p></div><div role="tabpanel" hidden=""><p>In macOS, the CMake user package registry is found in:</p><p><code>~/.cmake/package/Zephyr</code></p><p>在 macOS 中，CMake 用户包注册表在:</p><p><code>~/.cmake/package/Zephyr</code></p></div><div role="tabpanel" hidden=""><p>In Windows, the CMake user package registry is found in:</p><p><code>HKEY_CURRENT_USER\Software\Kitware\CMake\Packages\Zephyr</code></p><p>在 Windows 中，CMake 用户包注册表在:</p><p><code>HKEY_CURRENT_USER\Software\Kitware\CMake\Packages\Zephyr</code></p></div></div></div><p>The Zephyr CMake package allows CMake to automatically find a Zephyr base. One or more Zephyr installations must be exported. Exporting multiple Zephyr installations may be useful when developing or testing Zephyr freestanding applications, Zephyr workspace application with vendor forks, etc..</p><p>Zephyr CMake Package(包)允许 CMake 自动查找 Zephyr，必须导出一个或者多个 Zephyr。在开发或测试 Zephyr 独立式应用、带有供应商分支的 Zephyr 集成式应用等时，导出多个 Zephyr 可能很有用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-package-export-west"></a>Zephyr CMake package export (west)<a class="hash-link" href="#zephyr-cmake-package-export-west" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-包-导出-lisa"></a>Zephyr CMake 包 导出 (Lisa)<a class="hash-link" href="#zephyr-cmake-包-导出-lisa" title="Direct link to heading">#</a></h2><p>When installing <a href="https://zephyr-docs.listenai.com/getting_started/index.html#get-the-code" target="_blank" rel="noopener noreferrer">Zephyr using west</a> then it is recommended to export Zephyr using <code>west zephyr-export</code>.</p><p>使用 <code>Lisa Zephyr</code> 插件安装 Zephyr 时，建议使用 <code>lisa zep zephyr-export</code>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-package-export-without-west"></a>Zephyr CMake package export (without west)<a class="hash-link" href="#zephyr-cmake-package-export-without-west" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-包-导出-无-lisa"></a>Zephyr CMake 包 导出 (无 Lisa)<a class="hash-link" href="#zephyr-cmake-包-导出-无-lisa" title="Direct link to heading">#</a></h2><p>Zephyr CMake package is exported to the CMake user package registry using the following commands:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cmake -P </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token environment constant" style="color:rgb(100, 102, 149)">PATH</span><span class="token plain">-TO-ZEPHYR</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">/share/zephyr-package/cmake/zephyr_export.cmake</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>This will export the current Zephyr to the CMake user package registry.</p><p>使用以下命令将 Zephyr CMake 包导出到 CMake 用户包注册表:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cmake -P </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token environment constant" style="color:rgb(100, 102, 149)">PATH</span><span class="token plain">-TO-ZEPHYR</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">/share/zephyr-package/cmake/zephyr_export.cmake</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这会将当前的 Zephyr 导出到 CMake 用户包注册表中。</p><p>To also export the Zephyr Unittest CMake package, run the following command in addition:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cmake -P </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token environment constant" style="color:rgb(100, 102, 149)">PATH</span><span class="token plain">-TO-ZEPHYR</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">/share/zephyrunittest-package/cmake/zephyr_export.cmake</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>要导出 Zephyr 单元测试 CMake 包，需要运行以下命令:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cmake -P </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token environment constant" style="color:rgb(100, 102, 149)">PATH</span><span class="token plain">-TO-ZEPHYR</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">/share/zephyrunittest-package/cmake/zephyr_export.cmake</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-base-environment-setting"></a>Zephyr Base Environment Setting<a class="hash-link" href="#zephyr-base-environment-setting" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-基础环境设置"></a>Zephyr 基础环境设置<a class="hash-link" href="#zephyr-基础环境设置" title="Direct link to heading">#</a></h2><p>The Zephyr CMake package search functionality allows for explicitly specifying a Zephyr base using an environment variable.</p><p>To do this, use the following <code>find_package()</code> syntax:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>This syntax instructs CMake to first search for Zephyr using the Zephyr base environment setting <code>ZEPHYR_BASE</code> and then use the normal search paths.</p><p>Zephyr CMake 包搜索功能允许使用环境变量指定 Zephyr base。</p><p>为此，使用以下 <code>find_package()</code> 语法:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>此语法说明 CMake 先使用 <code>ZEPHYR_BASE</code> 的环境变量搜索 Zephyr，然后再使用标准的搜索路径。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-package-search-order"></a>Zephyr CMake Package Search Order<a class="hash-link" href="#zephyr-cmake-package-search-order" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-包搜索顺序"></a>Zephyr CMake 包搜索顺序<a class="hash-link" href="#zephyr-cmake-包搜索顺序" title="Direct link to heading">#</a></h2><p>When Zephyr base environment setting is not used for searching, the Zephyr installation matching the following criteria will be used:</p><p>当 Zephyr base 环境变量不用于搜索时，Zephyr 将使用以下条件匹配:</p><ul><li>A Zephyr repository application will use the Zephyr in which it is located. For example:</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace/zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── samples</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── hello_world</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><ul><li>Zephyr workspace application will use the Zephyr that share the same workspace. For example:</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── my_applications</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">     └── my_first_app</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>in this example, <code>my_first_app</code> will use <code>&lt;projects&gt;/zephyr-workspace/zephyr</code> as this Zephyr is located in the same workspace as the Zephyr workspace application.</p><ul><li>Zephyr 集成式应用将使用共同 Zephyr SDK 目录。例如:</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── my_applications</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">     └── my_first_app</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在本例中，<code>my_first_app</code> 将使用 <code>&lt;projects&gt;/zephyr-workspace/zephyr</code> 目录作为 Zephyr SDK。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The root of a Zephyr workspace is identical to west topdir if the workspace was installed using west
如果 Zephyr SDK 使用 <code>Lisa Zephyr</code> 插件安装，Zephyr SDK 的根目录与 <code>lisa zep topdir</code> 打印的目录相同。</p></div></div><ul><li>Zephyr freestanding application will use the Zephyr registered in the CMake user package registry. For example:</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Not exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;home&gt;/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── CMakeLists.txt</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── prj.conf</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── src</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── main.c</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>in this example, only <code>&lt;projects&gt;/zephyr-workspace-2/zephyr</code> is exported to the CMake package registry and therefore this Zephyr will be used by the Zephyr freestanding application <code>&lt;home&gt;/app</code>.</p><p>If user wants to test the application with <code>&lt;projects&gt;/zephyr-workspace-1/zephyr</code>, this can be done by using the Zephyr Base environment setting, meaning set <code>ZEPHYR_BASE=&lt;projects&gt;/zephyr-workspace-1/zephyr</code>, before running CMake.</p><ul><li>Zephyr 集成式应用将使用 CMake 用户包注册表中的 Zephyr。例如:</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Not exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-2</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;home&gt;/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── CMakeLists.txt</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── prj.conf</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── src</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── main.c</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>该示例中，只有 <code>&lt;projects&gt;/zephyr-workspace-2/zephyr</code> 被导出到 CMake 用户包注册表中，因此该 Zephyr 将用于 <code>&lt;home&gt;/app</code> 的 Zephyr 集成式应用。</p><p>如果用户想用 <code>&lt;projects&gt;/zephyr-workspace-1/zephyr</code> 来测试应用，在运行 CMake 之前，你可以通过 <code>ZEPHYR_BASE=&lt;projects&gt;/zephyr-workspace-1/zephyr</code> 来设置 Zephyr Base 环境变量。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The Zephyr package selected on the first CMake invocation will be used for all subsequent builds. To change the Zephyr package, for example to test the application using Zephyr base environment setting, then it is necessary to do a pristine build first (See <a href="https://docs.zephyrproject.org/latest/develop/application/index.html#application-rebuild" target="_blank" rel="noopener noreferrer">Rebuilding an Application</a>).</p><p>在第一次 CMake 运行中选择的 Zephyr 包将用于所有后续构建。要更改 Zephyr 包，例如使用 Zephyr base 环境设置测试应用，则需要先进行原始构建（请参阅<a href="https://docs.zephyrproject.org/latest/develop/application/index.html#application-rebuild" target="_blank" rel="noopener noreferrer">Rebuilding an Application</a>）。</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-package-version"></a>Zephyr CMake Package Version¶<a class="hash-link" href="#zephyr-cmake-package-version" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-包版本"></a>Zephyr CMake 包版本<a class="hash-link" href="#zephyr-cmake-包版本" title="Direct link to heading">#</a></h2><p>When writing an application then it is possible to specify a Zephyr version number <code>x.y.z</code> that must be used in order to build the application.</p><p>Specifying a version is especially useful for a Zephyr freestanding application as it ensures the application is built with a minimal Zephyr version.</p><p>It also helps CMake to select the correct Zephyr to use for building, when there are multiple Zephyr installations in the system.</p><p>在编写应用程序时，可以指定一个 <code>x.y.z</code> 的版本，在指定版本后，必须用该版本进行编译。</p><p>指定版本号对于 Zephyr 独立式应用特别有用，因为它确保应用程序使用最小的 Zephyr 版本构建的。</p><p>当系统中有多个 Zephyr 时，它还有助于 CMake 选择正确的 Zephyr 用于构建。</p><p>For example:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.2.0)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>例如:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.2.0)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>will require <code>app</code> to be built with Zephyr 2.2.0 as minimum. CMake will search all exported candidates to find a Zephyr installation which matches this version criteria.</p><p>Thus it is possible to have multiple Zephyr installations and have CMake automatically select between them based on the version number provided, see <a href="https://cmake.org/cmake/help/latest/command/find_package.html#version-selection" target="_blank" rel="noopener noreferrer">CMake package version</a> for details.</p><p>这样至少需要 <code>app</code> 使用 Zephyr 2.2.0 构建。CMake 将搜索所有导出的版本，以找到符合此版本 Zephyr SDK。</p><p>因此，可以有多个 Zephyr，并让 CMake 根据提供的版本号在它们之间自动选择，有关详细信息，请参阅<a href="https://cmake.org/cmake/help/latest/command/find_package.html#version-selection" target="_blank" rel="noopener noreferrer">CMake 包版本</a>。</p><p>For example:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-2.a</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-2.b</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;home&gt;/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── CMakeLists.txt</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── prj.conf</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── src</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── main.c</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>in this case, there are two released versions of Zephyr installed at their own workspaces. Workspace 2.a and 2.b, corresponding to the Zephyr version.</p><p>例如：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-2.a</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace-2.b</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── zephyr                       (Exported to CMake)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;home&gt;/app</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── CMakeLists.txt</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── prj.conf</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── src</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── main.c</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在这种情况下，有两个发布版本的 Zephyr SDK 已经安装在自己的电脑上。zephyr-workspace 2.a 和 2.b，对应于 Zephyr 版本。</p><p>To ensure <code>app</code> is built with minimum version <code>2.a</code> the following <code>find_package</code> syntax may be used:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.a)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>Note that both <code>2.a</code> and <code>2.b</code> fulfill this requirement.</p><p>为了确保 <code>app</code> 使用最小版本 2.a 构建，可以使用以下 <code>find_package</code> 语法:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.a)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><strong>请注意</strong> <code>2.a</code> 和 <code>2.b</code> 版本都满足此要求。</p><p>CMake also supports the keyword <code>EXACT</code>, to ensure an exact version is used, if that is required. In this case, the application CMakeLists.txt could be written as:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.a EXACT)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>CMake 还支持关键字 <code>EXACT</code>，如果需要精确的版本，可以使用这个关键字。在这种情况下，应用 CMakeLists.txt 可以写成:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.a EXACT)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>In case no Zephyr is found which satisfies the version required, as example, the application specifies</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.z)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>如果没找到满足所需版本的 Zephyr，例如：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr 2.z)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>then an error similar to below will be printed:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Could not find a configuration file for package &quot;Zephyr&quot; that is compatible</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">with requested version &quot;2.z&quot;.</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">The following configuration files were considered but not accepted:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  &lt;projects&gt;/zephyr-workspace-2.a/zephyr/share/zephyr-package/cmake/ZephyrConfig.cmake, version: 2.a.0</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  &lt;projects&gt;/zephyr-workspace-2.b/zephyr/share/zephyr-package/cmake/ZephyrConfig.cmake, version: 2.b.0</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>然后将会打印类似以下的错误：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Could not find a configuration file for package &quot;Zephyr&quot; that is compatible</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">with requested version &quot;2.z&quot;.</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">The following configuration files were considered but not accepted:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  &lt;projects&gt;/zephyr-workspace-2.a/zephyr/share/zephyr-package/cmake/ZephyrConfig.cmake, version: 2.a.0</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  &lt;projects&gt;/zephyr-workspace-2.b/zephyr/share/zephyr-package/cmake/ZephyrConfig.cmake, version: 2.b.0</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>It can also be beneficial to specify a version number for Zephyr repository applications and Zephyr workspace applications. Specifying a version in those cases ensures the application will only build if the Zephyr repository or workspace is matching. This can be useful to avoid accidental builds when only part of a workspace has been updated.</p><p>为 Zephyr 集成式应用指定版本号也是有好处的，指定版本号可确保应用仅在 Zephyr 集成式应用匹配时才会构建。当更新了部分 Zephyr SDK 的代码时，这能有效的避免出现意外的构建。</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="multiple-zephyr-installations-zephyr-workspace"></a>Multiple Zephyr Installations (Zephyr workspace)<a class="hash-link" href="#multiple-zephyr-installations-zephyr-workspace" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="多个-zephyr"></a>多个 Zephyr<a class="hash-link" href="#多个-zephyr" title="Direct link to heading">#</a></h2><p>Testing out a new Zephyr version, while at the same time keeping the existing Zephyr in the workspace untouched is sometimes beneficial.</p><p>Or having both an upstream Zephyr, Vendor specific, and a custom Zephyr in same workspace.</p><p>For example:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr-vendor</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr-custom</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── my_applications</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">     └── my_first_app</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>测试新的 Zephyr 版本，同时保持已经现有的 Zephyr 不变是有好处的。</p><p>或者在电脑上同时拥有最新的 Zephyr，供应商特定和自定义的 Zephyr。</p><p>例如：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;projects&gt;/zephyr-workspace</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr-vendor</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── zephyr-custom</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── my_applications</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">     └── my_first_app</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>in this setup, <code>find_package(Zephyr)</code> has the following order of precedence for selecting which Zephyr to use:</p><ul><li>Project name: <code>zephyr</code></li><li>First project, when Zephyr projects are ordered lexicographical, in this case.<ul><li><code>zephyr-custom</code></li><li><code>zephyr-vendor</code></li></ul></li></ul><p>This means that <code>my_first_app</code> will use <code>&lt;projects&gt;/zephyr-workspace/zephyr</code>.</p><p>It is possible to specify a Zephyr preference list in the application.</p><p>在此设置中，<code>find_package(Zephyr)</code> 选择哪个 Zephyr 具有一下优先顺序：</p><ul><li>项目名称：<code>zephyr</code></li><li>当 Zephyr 项目按字母顺序排列时：<ul><li><code>zephyr-custom</code></li><li><code>zephyr-vendor</code></li></ul></li></ul><p>这种情况下， <code>my_first_app</code> 将使用 <code>&lt;projects&gt;/zephyr-workspace/zephyr</code>。</p><p>可以在应用中指定 Zephyr 偏好列表。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZEPHYR_PREFER &quot;zephyr-custom&quot; &quot;zephyr-vendor&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(my_first_app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>the <code>ZEPHYR_PREFER</code> is a list, allowing for multiple Zephyrs. If a Zephyr is specified in the list, but not found in the system, it is simply ignored and <code>find_package(Zephyr)</code> will continue to the next candidate.</p><p><code>ZEPHYR_PREFER</code> 是一个列表，允许有多个 Zephyr。如果列表中指定了 Zephyr，但在系统中未找到，则忽略该 Zephyr，并且 <code>find_package(Zephyr)</code> 会继续查找下一个。 </p><p>This allows for temporary creation of a new Zephyr release to be tested, without touching current Zephyr. When testing is done, the <code>zephyr-test</code> folder can simply be removed. Such a CMakeLists.txt could look as:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZEPHYR_PREFER &quot;zephyr-test&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(my_first_app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这允许临时创建一个新的 Zephyr 版本进行测试，而不需要修改当前 Zephyr。当测试完成后，可以简单地删除 <code>zephyr-test</code> 目录，那么 CMakeLists.txt 如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZEPHYR_PREFER &quot;zephyr-test&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">project(my_first_app)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-build-configuration-cmake-package-freestanding-application"></a>Zephyr Build Configuration CMake package (Freestanding application)<a class="hash-link" href="#zephyr-build-configuration-cmake-package-freestanding-application" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-构建配置-cmake-包独立应用"></a>Zephyr 构建配置 CMake 包(独立应用)<a class="hash-link" href="#zephyr-构建配置-cmake-包独立应用" title="Direct link to heading">#</a></h2><p>The Zephyr Build Configuration CMake package can be located outside a Zephyr workspace, for example located with a <a href="https://docs.zephyrproject.org/latest/develop/application/index.html#zephyr-freestanding-app" target="_blank" rel="noopener noreferrer">Zephyr freestanding application</a>.</p><p>Zephyr 构建配置 CMake 包可以位于 Zephyr SDK 之外，例如位于 Zephyr <a href="https://docs.zephyrproject.org/latest/develop/application/index.html#zephyr-freestanding-app" target="_blank" rel="noopener noreferrer">独立应用</a>中。</p><p>Create the build configuration as described in the previous section, and then refer to the location of your Zephyr Build Configuration CMake package using the CMake variable <code>ZephyrBuildConfiguration_ROOT</code>.</p><p>如上一节所述的创建构建配置，然后使用 CMake 变量 <code>ZephyrBuildConfiguration_ROOT</code> 引用你的 Zephyr 构建配置 CMake 包的位置。</p><p>1.At the CMake command line, like this:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cmake -DZephyrBuildConfiguration_ROOT</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">path-to-build-config</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">..</span><span class="token plain">.</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>1.在 CMake 命令行中，如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv bash"><pre tabindex="0" class="prism-code language-bash codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cmake -DZephyrBuildConfiguration_ROOT</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">path-to-build-config</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">..</span><span class="token plain">.</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>2.At the top of your application’s top level <code>CMakeLists.txt</code>, like this:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZephyrBuildConfiguration_ROOT &lt;path-to-build-config&gt;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>If you choose this option, make sure to set the variable <strong>before</strong> calling <code>find_package(Zephyr ...)</code>, as shown above.</p><p>2.在你的应用项目的根目录 <code>CMakeLists.txt</code> 中，如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZephyrBuildConfiguration_ROOT &lt;path-to-build-config&gt;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>如果选择了此选项，请确保在调用 <code>find_package(Zephyr ...)</code> 之前设置变量，如上所示。</p><p>3.In a separate CMake script which is pre-loaded to populate the CMake cache, like this:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># Put this in a file with a name like &quot;zephyr-settings.cmake&quot;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZephyrBuildConfiguration_ROOT &lt;path-to-build-config&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    CACHE STRING &quot;pre-cached build config&quot;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>3.在预先加载以填充 CMake 缓存的单独 CMake 脚本中，如下所示：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv cmake"><pre tabindex="0" class="prism-code language-cmake codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 将此文件放在一个名为 &quot;zephyr-settings.cmake&quot; 的文件中</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZephyrBuildConfiguration_ROOT &lt;path-to-build-config&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    CACHE STRING &quot;pre-cached build config&quot;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>You can tell the build system to use this file by adding <code>-C zephyr-settings.cmake</code> to your CMake command line. This principle is useful when not using west as both this setting and Zephyr modules can be specified using the same file. See <a href="https://docs.zephyrproject.org/latest/develop/modules.html#modules-without-west" target="_blank" rel="noopener noreferrer">Zephyr module Without West</a>.</p><p>你可以通过添加 <code>-C zephyr-settings.cmake</code> 到 CMake 命令来告诉构建系统使用此文件。
此原则在不使用 <code>Lisa Zephyr</code>插件时很有用，因为可以使用同一个文件指定此设置和 Zephyr 模块。请参阅没有 <code>Lisa Zephyr</code> 插件的 <a href="https://docs.zephyrproject.org/latest/develop/modules.html#modules-without-west" target="_blank" rel="noopener noreferrer">Zephyr 模块</a>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-package-source-code"></a>Zephyr CMake package source code<a class="hash-link" href="#zephyr-cmake-package-source-code" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr-cmake-包源代码"></a>Zephyr CMake 包源代码<a class="hash-link" href="#zephyr-cmake-包源代码" title="Direct link to heading">#</a></h2><p>The Zephyr CMake package source code in <code>&lt;PATH-TO-ZEPHYR&gt;/share/zephyr-package/cmake</code> contains the CMake config package which is used by CMake <code>find_package</code> function.</p><p><code>&lt;PATH-TO-ZEPHYR&gt;/share/Zephyr-package/CMake</code> 中的 Zephyr CMake 包源代码包含 CMake <code>find_package</code> 函数使用的 CMake 配置包。</p><p>It also contains code for exporting Zephyr as a CMake config package.</p><p>它还包含将 Zephyr 导出为 CMake 配置包的代码。</p><p>The following is an overview of those files</p><p>以下是这些文件的描述</p><p><code>CMakeLists.txt</code></p><ul><li><p>The CMakeLists.txt file for the CMake build system which is responsible for exporting Zephyr as a package to the CMake user package registry. </p></li><li><p>CMake 构建系统的 CMakeLists.txt 文件，负责将 Zephyr 作为包导出到 CMake 用户包注册表。</p></li></ul><p><code>ZephyrConfigVersion.cmake</code></p><ul><li><p>The Zephyr package version file. This file is called by CMake to determine if this installation fulfils the requirements specified by user when calling <code>find_package(Zephyr ...)</code>. It is also responsible for detection of Zephyr repository or workspace only installations.</p></li><li><p>Zephyr 包版本文件。这个文件被 CMake 调用来确定这个安装是否满足用户在调用 <code>find_package(Zephyr ...)</code> 时指定的要求。它也负责检测 Zephyr 库或 Zephyr SDK 只安装。</p></li></ul><p><code>ZephyrUnittestConfigVersion.cmake</code></p><ul><li><p>Same responsibility as <code>ZephyrConfigVersion.cmake</code>, but for unit tests. Includes <code>ZephyrConfigVersion.cmake</code>.</p></li><li><p>与 <code>ZephyrConfigVersion.cmake</code> 相同，但是用于单元测试。包含 <code>ZephyrConfigVersion.cmake</code>。</p></li></ul><p><code>ZephyrConfig.cmake</code></p><ul><li><p>The Zephyr package file. This file is called by CMake to for the package meeting which fulfils the requirements specified by user when calling <code>find_package(Zephyr ...)</code>. This file is responsible for sourcing of boilerplate code.</p></li><li><p>Zephyr 包文件。这个文件被 CMake 调用来确定这个安装是否满足用户在调用 <code>find_package(Zephyr ...)</code> 时指定的要求。这个文件负责获取样板代码。</p></li></ul><p><code>ZephyrUnittestConfig.cmake</code></p><ul><li><p>Same responsibility as <code>ZephyrConfig.cmake</code>, but for unit tests. Includes <code>ZephyrConfig.cmake</code>.</p></li><li><p>与 <code>ZephyrConfig.cmake</code> 相同，但是用于单元测试。包含 <code>ZephyrConfig.cmake</code>。</p></li></ul><p><code>zephyr_package_search.cmake</code></p><ul><li><p>Common file used for detection of Zephyr repository and workspace candidates. Used by <code>ZephyrConfigVersion.cmake</code> and <code>ZephyrConfig.cmake</code> for common code.</p></li><li><p>用于检测 Zephyr SDK 下符合要求的 CMake 包的通用文件。由 <code>ZephyrConfigVersion.cmake</code> 和 <code>ZephyrConfig.cmake</code> 用于公共代码。</p></li></ul><p><code>pristine.cmake</code></p><ul><li><p>Pristine file for removing all files created by CMake during configure and generator time when exporting Zephyr CMake package. Running pristine keeps all package related files mentioned above.</p></li><li><p>导出 Zephyr CMake 包时，用于删除 CMake 在配置和生成期间创建的所有文件的原始文件。运行 pristine 会保留上面提到的所有与包相关的文件。</p></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/build/cmake/index"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 构建系统（ CMake ）</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/build/dts/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">设备树概述 »</div></a></div></nav><div class="gitalk-wrapper"><ul class="gitalk-option"><li class="like"><i class="icon like-icon"></i> <span id="like_num">有帮助  0</span></li><li class="unlike"><i class="icon unlike-icon"></i> <span id="unlike_num">没帮助 0</span></li><li>文档反馈</li></ul></div></div></div><div class="col col--3" style="padding-left:0px"><div class="tableOfContents_k96L thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#zephyr-cmake-package-export-west" class="table-of-contents__link">Zephyr CMake package export (west)</a></li><li><a href="#zephyr-cmake-包-导出-lisa" class="table-of-contents__link">Zephyr CMake 包 导出 (Lisa)</a></li><li><a href="#zephyr-cmake-package-export-without-west" class="table-of-contents__link">Zephyr CMake package export (without west)</a></li><li><a href="#zephyr-cmake-包-导出-无-lisa" class="table-of-contents__link">Zephyr CMake 包 导出 (无 Lisa)</a></li><li><a href="#zephyr-base-environment-setting" class="table-of-contents__link">Zephyr Base Environment Setting</a></li><li><a href="#zephyr-基础环境设置" class="table-of-contents__link">Zephyr 基础环境设置</a></li><li><a href="#zephyr-cmake-package-search-order" class="table-of-contents__link">Zephyr CMake Package Search Order</a></li><li><a href="#zephyr-cmake-包搜索顺序" class="table-of-contents__link">Zephyr CMake 包搜索顺序</a></li><li><a href="#zephyr-cmake-package-version" class="table-of-contents__link">Zephyr CMake Package Version¶</a></li><li><a href="#zephyr-cmake-包版本" class="table-of-contents__link">Zephyr CMake 包版本</a></li><li><a href="#multiple-zephyr-installations-zephyr-workspace" class="table-of-contents__link">Multiple Zephyr Installations (Zephyr workspace)</a></li><li><a href="#多个-zephyr" class="table-of-contents__link">多个 Zephyr</a></li><li><a href="#zephyr-build-configuration-cmake-package-freestanding-application" class="table-of-contents__link">Zephyr Build Configuration CMake package (Freestanding application)</a></li><li><a href="#zephyr-构建配置-cmake-包独立应用" class="table-of-contents__link">Zephyr 构建配置 CMake 包(独立应用)</a></li><li><a href="#zephyr-cmake-package-source-code" class="table-of-contents__link">Zephyr CMake package source code</a></li><li><a href="#zephyr-cmake-包源代码" class="table-of-contents__link">Zephyr CMake 包源代码</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 安徽聆思智能科技有限公司皖ICP备05001217号</div></div></div></footer></div>
<script src="/docs-csk6/assets/js/runtime~main.3a2fc554.js"></script>
<script src="/docs-csk6/assets/js/main.3e06e6a1.js"></script>
<script>!function(e,n,s,t,d){e[s]=e[s]||function(){(e[s].a=e[s].a||[]).push(arguments)},(d=n.createElement("script")).async=!0,d.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",n.body.appendChild(d)}(window,document,"simplemde")</script></body>
</html>