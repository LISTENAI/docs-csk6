<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">模块 | 聆思文档中心</title><meta data-react-helmet="true" property="og:url" content="https://github.com/LISTENAI/docs-csk6/chips/600X/application/modules"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="模块 | 聆思文档中心"><meta data-react-helmet="true" name="description" content="zephyr依赖与几个外部维护项目的源码，以免重复造轮子，在有用的情况下尽可能重用成熟的代码。在zephyr的构建系统中，这些称为模块。这些模块必须于zephyr构建系统集成，本章节其他部分将对它进行更详细的描述。"><meta data-react-helmet="true" property="og:description" content="zephyr依赖与几个外部维护项目的源码，以免重复造轮子，在有用的情况下尽可能重用成熟的代码。在zephyr的构建系统中，这些称为模块。这些模块必须于zephyr构建系统集成，本章节其他部分将对它进行更详细的描述。"><link data-react-helmet="true" rel="shortcut icon" href="/docs-csk6/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/LISTENAI/docs-csk6/chips/600X/application/modules"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/application/modules" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/chips/600X/application/modules" hreflang="x-default"><link rel="stylesheet" href="/docs-csk6/assets/css/styles.55351b3e.css">
<link rel="preload" href="/docs-csk6/assets/js/runtime~main.7e57cda1.js" as="script">
<link rel="preload" href="/docs-csk6/assets/js/main.5686a861.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_vO2r">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a><a class="navbar__item navbar__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a><a class="navbar__item navbar__link" href="/docs-csk6/tools/LStudio">工具</a><a class="navbar__item navbar__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a><a class="navbar__item navbar__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs-csk6/FAQ/faq">FAQ</a><a class="navbar__item navbar__link" href="/docs-csk6/school/school">视频课程</a><a class="navbar__item navbar__link" href="/docs-csk6/workorder/workorder">工单</a><div class="react-toggle displayOnlyInLargeViewport_a-w0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_8pH0"><img src="/docs-csk6/img/light.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/unlight.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div><div class="react-toggle-track-x"><span class="toggle_8pH0"><img src="/docs-csk6/img/undark.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/dark.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/tools/LStudio">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/FAQ/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/school/school">视频课程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/workorder/workorder">工单</a></li></ul></div></div></div></nav><nav class="navbar subnavbar--fixed-top sub-navbar"><div class="navbar__inner subnavbar__inner"><div class="navbar__items"><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/4002/Chip_information_4002">CSK4002</a><a aria-current="page" class="subnavbar__item subnavbar__link subnavbar__link--active" dirname="/chips" href="/docs-csk6/chips/600X/overview/chips">CSK600X</a><a class="subnavbar__item subnavbar__link" dirname="/chips" href="/docs-csk6/chips/micropython/index">MicroPython</a></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_Ol8-"><aside class="docSidebarContainer_UfDv"><div class="sidebar_OMtR"><nav class="menu menu--responsive thin-scrollbar menu_2y2e menuWithAnnouncementBar_Lwkw" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_IcOF" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">简介</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/chips">芯片</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">开发套件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_introduction">NanoKit开发套件</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">CSK6 NanoKit开发板</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_csk6002_9s_nano">csk6002-9s-nano</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_csk6011a_9s_nano">csk6011a-9s-nano</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">NanoKit 功能扩展板</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/nanokit/nanokit_audio">语音功能板 v1</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/overview/system">系统与软件</a></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--first menu__link--sublist menu__link--active" type="first" href="#!">开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/application/getting_start">快速开始</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/chips/600X/application/application_development">应用开发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">烧录与调试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/csk6_load">CSK6 烧录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-daplink">基于 DAPLink 的 GDB 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/gdbdebug/gdbdebug-jlink">基于 J-Link 的 GDB 调试</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">lisa zephyr 命令行工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/install">安装开发工具</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/basic">基础命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/command_detail">内置命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/config">配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/build_flash_debug">编译 烧录 调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/filesystem">文件系统相关</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/application_project">应用级提货单</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/trouble_shooting">疑难解答</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/release_note">lisa zephyr 更新日志</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs-csk6/chips/600X/application/modules">模块</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">使用示例</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">外设驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/overview">外设驱动的使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/gpio">GPIO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/pwm">PWM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/UART">UART</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/I2C">I2C</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/spi">SPI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/ADC">SAR ADC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/RTC">RTC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/peripheral/samples/watchdog">WatchDog</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/timer">Timer定时器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/multithread">多线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_semaphore">信号量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_mutex">互斥量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/kernel/sync_poll">轮询</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/logger">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/usb_class">USB 模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/display_kscan">显示&amp;触摸</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/modules/lvgl">LVGL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/shell_sample">Shell 的使用</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">音频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record">录音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_playback">播音</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/audio/audio_record_play">录音和播音示例</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">网络</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/wifi_connect">WIFI连接</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/network/net_socket">网络连接</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义驱动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/customdriver/custom-driver-video">添加自定义驱动</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">自定义板型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/application/board">添加自定义板型</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">内核</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/threads">线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/system_threads">系统线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/workqueue">工作队列线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/interrupts">中断</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/semaphores">信号量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/kernel/timing/timers">定时器</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">系统服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/index">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/shell">Shell</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/service/storage/nvs">非易失性存储 (NVS)</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">构建与配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/cmake/index">构建系统（ CMake ）</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">设备树</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/intro">设备树概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/design">设计目标</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/bindings">设备树绑定</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/howtos">设备树操作指引</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/api_usage">在 C/C++ 中访问设备树</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/troubleshooting">问题排查</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/dts/dt_vs_kconfig">设备树 VS Kconfig</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="-1">Kconfig配置系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_gui">Kconfig交互界面</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_configuration">设置Kconfig配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_tips_and_demo">小贴士与最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_custom">自定义 Kconfig 预处理函数</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/kconfig/Kconfig_extension">Kconfig 拓展</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/build/zephyr_cmake_package">Zephyr CMake Package(包)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">硬件支持</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/hardware/pinctrl">引脚控制</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">疑难解答</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/FAQ/index">FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/chips/600X/quick_start/doc_issue">反馈</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">引用</a><ul class="menu__list"><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/doxygen/html/index.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Zephyr API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/kconfig.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Kconfig 检索<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://zephyr-docs.listenai.com/reference/devicetree/bindings.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>设备树绑定索引<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qQrU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_dRYS"><div class="container padding-top--md padding-bottom--lg center-container"><div class="row"><div class="col docItemCol_+xOG"><div class="docItemContainer_c+5G"><article><div class="markdown"><header><h1 class="h1Heading_5RMM">模块</h1></header><p>zephyr依赖与几个外部维护项目的源码，以免重复造轮子，在有用的情况下尽可能重用成熟的代码。在zephyr的构建系统中，这些称为模块。这些模块必须于zephyr构建系统集成，本章节其他部分将对它进行更详细的描述。</p><p>zephyr包括但不限于依赖这些模块：</p><ul><li>调试器集成</li><li>芯片供应商硬件抽象层（HAL）</li><li>密码库</li><li>文件系统</li><li>进程间通讯（IPC）库</li></ul><p>本章节总结了一系列如何更好地组织zephyr模块中工作流的策略和最佳实践列表。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="模块代码仓库"></a><span id="moduleRep">模块代码仓库</span><a class="hash-link" href="#模块代码仓库" title="Direct link to heading">#</a></h2><ul><li><p>默认清单包含的所有模块都应托管在 <a href="https://cloud.listenai.com/zephyr" target="_blank" rel="noopener noreferrer">zephyr cloud.listenai.com</a> 结构下的代码仓库中。</p></li><li><p>默认代码仓库代码库应在代码仓库根目录<code>zephyr/</code>文件夹中包含一个module.yml文件。</p></li><li><p>模块代码仓库名称应遵循使用小写字母和破折号（而不是下横线）的约定。此规则适用于所有新模块代码仓库，除了直接跟踪外部项目（托管在git代码仓库中）的代码仓库；这些模块可以命名为它们的外部项目产物。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>不符合上述约定的现有模块代码仓库不需要为了符合上述约定而重新命名。</p></div></div></li><li><p>模块应使用 &quot;zephyr&quot; 作为代码仓库主要分支的默认名称。用于特定目的的分支，例如LTS zephyr版本的模块分支，名称应该以&quot;zephyr_&quot;前缀开头。</p></li><li><p>如果模块有一个外部（上游）项目代码仓库，那么模块代码仓库应该保留上游代码仓库的文件夹结构。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>不需要维护一个与外部代码仓库主分支成镜像关系的“master”分支，之所以不建议这样去做，因为这可能会使模块的主分支产生混乱，它应在zephyr分支。</p></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="文件要求"></a><span id="docrequirements">文件要求</span><a class="hash-link" href="#文件要求" title="Direct link to heading">#</a></h2><p>所有zephyr模块代码仓库都包含一个.rst文件，其中记录：</p><ul><li>模块的范围和目的</li><li>模块如何和zephyr集成</li><li>模块代码仓库的所有者</li><li>与外部项目（提交、SHA、版本等）的同步信息</li><li><a href="#">许可证要求和政策</a>中所述的许可信息</li></ul><p>该文件是包含模块所必需的，而且它(所包含)的信息应该保持最新</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="在zephyr构建系统中集成模块"></a><span id="moduleRep">在zephyr构建系统中集成模块</span><a class="hash-link" href="#在zephyr构建系统中集成模块" title="Direct link to heading">#</a></h2><p>构建系统变量 <strong>ZEPHYR_MODULES</strong> 是包含zephyr模块目录绝对路径的<a href="https://cmake.org/cmake/help/latest/manual/cmake-language.7.html#lists" target="_blank" rel="noopener noreferrer">CMake</a>列表。这些模块分别包含描述如何构建和配置它们的<code>CMakeLists.txt</code>和<code>Kconfig</code>文件。使用CMake的<a href="https://cmake.org/cmake/help/latest/command/add_subdirectory.html" target="_blank" rel="noopener noreferrer">add_subdirectory()</a>命令把<code>Kconfig</code>模块的<code>CMakeLists.txt</code>文件添加到构建中，<code>Kconfig</code>文件包含在构建的Kconfig菜单树中。</p><p>如果你安装了<a href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/install">lisa zep</a>命令行工具，则无需担心如何定义此变量，除非你添加一个新的模块。构建系统需要知道如何使用 lisa zephyr 设置的  <strong>ZEPHYR_MODULES</strong>。你可以通过设置 <strong>ZEPHYR_EXTRA_MODULES</strong> CMake 变量或添加 <strong>ZEPHYR_EXTRA_MODULES</strong> 行来把其他模块添加到<code>.zephyrrc</code>列表中。(有关详情信息，请参考 <a href="https://docs.zephyrproject.org/2.7.0/application/index.html#env-vars" target="_blank" rel="noopener noreferrer">设置变量</a>部分)。它有利于你想通过保存在west中找到的模块列表并添加自的模块列表。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>如果模块 <code>FOO</code> 是由 <a href="https://docs.zephyrproject.org/2.7.0/guides/west/index.html#west" target="_blank" rel="noopener noreferrer">west</a> 提供的，但也是由 <code>-DZEPHYR_EXTRA_MODULES=/&lt;path&gt;/foo</code> 提供的，那么命令行变量 <code>ZEPHYR_EXTRA_MODULES</code> 给出的模块将优先。它允许你在构建时使用自定义版本的 <code>FOO</code> ，并且仍然使用west提供的其他zephyr模块。例如，它可用于特殊的测试目的。</p></div></div><p>有关 west 工作空间的更多信息，请查看<a href="https://docs.zephyrproject.org/2.7.0/guides/west/basics.html#west-basics" target="_blank" rel="noopener noreferrer">Basics</a>。</p><p>最后，你还可以通过各种方式自己指定模块列表，如果你的应用程序不需要，则不需要使用模块。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="模块yaml文件说明"></a><span id="myfd">模块yaml文件说明</span><a class="hash-link" href="#模块yaml文件说明" title="Direct link to heading">#</a></h2><p>可以使用名为 <code>zephyr/module.yml</code> 的文件描述模块：</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="模块名称"></a><span id="mn">模块名称</span><a class="hash-link" href="#模块名称" title="Direct link to heading">#</a></h3><p>每个zephyr模块都有一个名称，可以在构建系统中引用它。</p><p>名称可以在 <code>zephyr/module.yml</code> 文件中指定：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">name: &lt;name&gt;</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在 CMake 中，zephyr模块的位置可以使用 CMake 变量 <code>ZEPHYR_&lt;MODULE_NAME&gt;_MODULE_DIR</code> 引用，变量 <code>ZEPHYR_&lt;MODULE_NAME&gt;_CMAKE_DIR</code> 保存包含模块的 <code>CMakeLists.txt</code> 文件的目录位置。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>当用于CMake和Kconfig变量时，模块名称中的所有字母都转换为大写，所有非字母数字字符都转换为下划线（_）。例如，在CMake和Kconfig中，模块<code>foo-bar</code>需要转换为<code>ZEPHYR_FOO_BAR_MODULE_DIR</code>引用。</p></div></div><p>这是zephyr模块的示例foo:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">name:foo</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>如果未指定<code>name</code>字段， 则zephyr模块名称将被设置为模块文件夹的名称。例如，如果在 <code>zephyr/module.yml</code> 中没有指定任何内容， 在 <code>&lt;workspace&gt;/modules/bar</code> 中的 zephyr模块将使用<code>bar</code>作为模块名称。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="模块集成文件模块内"></a><span id="mn">模块集成文件(模块内)</span><a class="hash-link" href="#模块集成文件模块内" title="Direct link to heading">#</a></h3><p>包含构建文件<code>CMakeLists.txt</code>和<code>kconfig</code>可以描述为：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">build:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  cmake: &lt;cmake-directory&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  kconfig: &lt;directory&gt;/Kconfig</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p><code>cmake: &lt;cmake-directory&gt;</code> 部分指定 <code>&lt;cmake-directory&gt;</code> 包含要使用的 <code>CMakeLists.txt</code> 。<code>kconfig: &lt;directory&gt;/Kconfig</code>部分指定要使用的Kconfig文件。不需要<code>cmake</code>默认为<code>zephyr</code>和kconfig默认为<code>zephyr/Kconfig</code>。</p><p>这是一个 <code>module.yml</code> 文件的示例。它引用了模块根目录的 <code>CMakeLists.txt</code> 和 <code>Kconfig</code> 文件：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">build:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  cmake: .</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  kconfig: Kconfig</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="构建系统集成"></a><span id="bsi">构建系统集成</span><a class="hash-link" href="#构建系统集成" title="Direct link to heading">#</a></h3><p>当一个模块有一个 <code>module.yml</code> 文件时，它会自动包含在zephyr构建系统中。然后，可以通过 Kconfig 和 CMake 变量访问模块的路径。</p><p>在 Kconfig 和 CMake 中，变量 <code>ZEPHYR_&lt;MODULE_NAME&gt;_MODULE_DIR</code> 包含模块的绝对路径。</p><p>在CMake中，<code>ZEPHYR_&lt;MODULE_NAME&gt;_CMAKE_DIR</code> 包含了 CMake 构建系统中的 <code>CMakeLists.txt</code> 文件目录的绝对路径。如果 module.yml 文件没有指定CMakeLists.txt, 那么该变量的值为空。</p><p>要读取名 <code>foo</code> 的zephyr模块的这些变量：</p><ul><li><p>在 CMake 中: <code>${ZEPHYR_FOO_MODULE_DIR}</code>用于模块的顶部目录，包含它的<code>CMakeLists.txt</code>的目录使用<code>${ZEPHYR_FOO_CMAKE_DIR}</code>。</p></li><li><p>在 Kconfig: 使用 <code>$(ZEPHYR_FOO_MODULE_DIR)</code> 做为模块的顶部目录。</p></li></ul><p>注意在CMake和Kconfig中，小写模块名<code>foo</code>是如何大写为<code>FOO</code>的。</p><p>这些变量还可用于测试给定模块是否存在。例如，要验证<code>foo</code>是否为zephyr模块的名称：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">if(ZEPHYR_FOO_MODULE_DIR)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # Do something if FOO exists.</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">endif()</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在Kconfig中，该变量可用于查找要包含的其他文件。例如，要在模块<code>foo</code>中包含文件<code>some/Kconfig</code>：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">source &quot;$(ZEPHYR_FOO_MODULE_DIR)/some/Kconfig&quot;</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在每个Zephyr模块的CMake处理过程中，还可以使用以下两个变量：</p><ul><li>当前模块的顶部目录：<code>${ZEPHYR_CURRENT_MODULE_DIR}</code></li><li>当前模块的<code>CMakeLists.txt</code>目录：<code>${ZEPHYR_CURRENT_CMAKE_DIR}</code></li></ul><p>这样就不需要Zephyr模块在CMake处理过程中知道自己的名称。该模块可以使用这些 <code>CURRENT</code> 变量来获取其他CMake文件。例如：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">include(${ZEPHYR_CURRENT_MODULE_DIR}/cmake/code.cmake)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>可以从模块的第一个 CMakeLists.txt 文件向 Zephyr CMake 列表变量追加值。为此，将该值附加到列表，然后在 CMakeLists.txt 文件的 PARENT_SCOPE 中设置列表。例如，要将 <code>bar</code> 附加到 Zephyr CMakeLists.txt 作用域中的 <code>FOO_LIST</code> 变量:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">list(APPEND FOO_LIST bar)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(FOO_LIST ${FOO_LIST} PARENT_SCOPE)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>Zephyr列表的一个示例是，在<code>SYSCALL_INCLUDE_DIRS</code>列表中添加其他目录时很有用。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr模块依赖"></a><span id="zmdz">zephyr模块依赖</span><a class="hash-link" href="#zephyr模块依赖" title="Direct link to heading">#</a></h3><p>一个zephyr模块可能依赖于其他模块。或者，由于某些CMake目标的依赖性，给定的zephyr模块必须在另一个zephyr模块之后处理。</p><p>这样的依赖关系可以使用 <code>dependency</code> 字段来描述。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">build:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  depends:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    - &lt;module&gt;</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>以下是zephyr模块示例 <code>foo</code> , 它依赖于 <code>bar</code> 构建系统中存在的zephyr模块：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">name: foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">build:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  depends:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  - bar</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这个例子将确保当<code>foo</code>包含到构建系统中时，<code>bar</code>需要存在，并且它还将确保在<code>foo</code>之前处理<code>bar</code>。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="模块集成文件外部"></a><span id="mife">模块集成文件(外部)</span><a class="hash-link" href="#模块集成文件外部" title="Direct link to heading">#</a></h3><p>模块集成文件可以位于 zephyr 模块本身的外部。<code>MODULE_EXT_ROOT</code> 变量包含一个根列表，其中包含位于 zephyr 模块外部的集成文件。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="zephyr中的模块集成文件"></a><span id="mifiz">zephyr中的模块集成文件</span><a class="hash-link" href="#zephyr中的模块集成文件" title="Direct link to heading">#</a></h4><p>Zephyr 代码仓库包含某些已知 Zephyr 模块的 <code>CMakeLists.txt</code> 和 <code>Kconfig</code> 构建文件。</p><p>这些文件位于</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;ZEPHYR_BASE&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── modules</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── &lt;module_name&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ├── CMakeLists.txt</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        └── Kconfig</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="自定义位置中的模块集成文件"></a><span id="mifiacl">自定义位置中的模块集成文件</span><a class="hash-link" href="#自定义位置中的模块集成文件" title="Direct link to heading">#</a></h4><p>你可以为其他模块创建类似的 <code>MODULE_EXT_ROOT</code> ，并且让 zephyr 构建系统知道这些模块。</p><p>使用以下结构创建<code>MODULE_EXT_ROOT</code>：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;MODULE_EXT_ROOT&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── modules</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ├── modules.cmake</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── &lt;module_name&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ├── CMakeLists.txt</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        └── Kconfig</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>然后通过向 CMake 构建系统指定 <code>-DMODULE_EXT_ROOT</code> 参数来构建应用程序。<code>MODULE_EXT_ROOT</code> 接受根的 CMake 列表作为参数。</p><p>可以使用模块描述文件 <code>Zephyr/module.yml</code> 将 zephyr 模块自动添加到 <code>MODULE_EXT_ROOT</code> 列表中，请参考<a href="#bs">构建设置</a>。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>注意</h5></div><div class="admonition-content"><p><code>ZEPHYR_BASE</code> 始终作为优先级最低的 <code>MODULE_EXT_ROOT</code> 添加。这样允许了你使用自己的<code>MODULE_EXT_ROOT</code>实现来否决<code>&lt;ZEPHYR_BASE&gt;/modules/&lt;module_name&gt;</code>下的任何集成文件。</p></div></div><p><code>modules.cmake</code> 文件必须包含通过专门命名的 CMake 变量为 Zephyr 模块指定集成文件的逻辑。</p><p>若要包含模块的 CMake 文件，请将变量<code>ZEPHYR_&lt;MODULE_NAME&gt;_CMAKE_DIR</code> 设置为包含 CMake 文件的路径。</p><p>若要包含模块的 Kconfig 文件，请将变量 <code>ZEPHYR_&lt;MODULE_NAME&gt;_KCONFIG</code> 设置为 KCONFIG 文件的路径。</p><p>下面是一个关于如何添加对 <code>FOO</code> 模块的支持的示例。</p><p>创建以下示例：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;MODULE_EXT_ROOT&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── modules</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ├── modules.cmake</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    └── foo</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ├── CMakeLists.txt</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        └── Kconfig</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>在 <code>modules.cmake</code> 文件中，添加以下内容</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZEPHYR_FOO_CMAKE_DIR ${CMAKE_CURRENT_LIST_DIR}/foo)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">set(ZEPHYR_FOO_KCONFIG   ${CMAKE_CURRENT_LIST_DIR}/foo/Kconfig)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="模块集成文件zephyrmoduleyml"></a><span id="mif">模块集成文件(zephyr/Module.yml)</span><a class="hash-link" href="#模块集成文件zephyrmoduleyml" title="Direct link to heading">#</a></h4><p>模块描述文件 <code>zephyr/Module.yml</code> 可用于指定构建文件 <code>CMakeLists.txt</code> 和 <code>Kconfig</code> 位于模块集成文件(外部)中。</p><p><code>MODULE_EXT_ROOT</code> 中的构建文件可以描述为：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">build:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  cmake-ext: True</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  kconfig-ext: True</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>这允许在zephyr模块外部描述构建包含的控制。</p><p>zephyr 代码仓库本身始终作为 zephyr 模块 ext 根目录添加。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="构建设置"></a><span id="bs">构建设置</span><a class="hash-link" href="#构建设置" title="Direct link to heading">#</a></h3><p>可以指定在将模块包含到生成系统中时必须使用的其他生成设置。</p><p>所有<code>root</code>设置都相对于模块的根。</p><p><code>module.yml</code> 文件中支持的构建设置如下：</p><ul><li><code>board_root</code> : 包含用于生成系统的其他板。其他板必须位于 <code>&lt;board_root&gt;/boards</code> 文件夹中。</li><li><code>dts_root</code> : 包含与体系结构/soc 系列相关的其他 dts 文件，其他 dts 文件必须位于 <code>&lt;dts_root&gt;/dts</code> 文件夹中。</li><li><code>soc_root</code> : 包含构建系统可用的其他 SoC。其他 SoC 必须位于 <code>&lt;soc_root&gt;/soc</code> 文件夹中。</li><li><code>arch_root</code> : 包含可用于生成系统的其他架构。其他架构必须位于 <code>&lt;arch_root&gt;/arch</code> 文件夹中。</li><li><code>module_ext_root</code> : 包含 Zephyr 模块的 CMakeLists.txt 和 Kconfig 文件 , 请参考<a href="#mife">模块集成文件(外部)</a></li></ul><p>包含附加根的文件的示例<code>module.yaml</code>，以及相应的文件系统布局。</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">build:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  settings:</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    board_root: .</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    dts_root: .</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    soc_root: .</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    arch_root: .</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    module_ext_root: .</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>需要以下文件夹结构:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&lt;zephyr-module-root&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── arch</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── boards</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── dts</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">├── modules</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└── soc</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="包含模块"></a><span id="mi">包含模块</span><a class="hash-link" href="#包含模块" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="使用west"></a><span id="uw">使用west</span><a class="hash-link" href="#使用west" title="Direct link to heading">#</a></h4><p>如果 west 已安装，<strong>ZEPHYR_MODULES</strong> 尚未设置，则构建系统将查找你的 <code>west安装</code> 中的所有模块并使用这些模块。它通过运行 <code>west list</code> 获取安装中所有项目的路径，然后将结果过滤到具有必要模块元数据文件的项目。</p><p><code>west list</code> 中的每个项目都经过如下测试：  </p><ul><li>如果项目包含一个名为 <code>zephyr/module.yml</code> 的文件，那么将使用该文件的内容来确定应该将哪些文件添加到构建中，如前一节所述。</li><li>否则(即如果项目没有 <code>zephyr/module.yml</code>) ，构建系统将在项目中查找 <code>zephyr/CMakeLists.txt</code> 和 <code>zephyr/Kconfig</code> 文件。如果两者都存在，则将项目视为模块，并将这些文件添加到构建中。</li><li>如果这两个检查都没有成功，那么项目就不被认为是一个模块，也不会被添加到 <strong>ZEPHYR_MODULES</strong> 中。</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="没有使用west"></a><span id="wuw">没有使用west</span><a class="hash-link" href="#没有使用west" title="Direct link to heading">#</a></h4><p>如果你没有安装 west，或者不希望构建系统使用它来查找 zephyr 模块，可以使用下列选项之一自己设置 <strong>ZEPHYR_MODULES</strong>。列表中的每个目录必须包含 <code>zephyr/module.yml</code> 文件或者 <code>zephyr/CMakeLists.txt</code> 和 <code>Kconfig</code> 文件，如前一节所述。</p><ol><li><p>在 CMake 命令行中，如下所示:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cmake -DZEPHYR_MODULES=&lt;path-to-module1&gt;[;&lt;path-to-module2&gt;[...]] ...</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div></li><li><p>在应用程序的顶级 <code>CMakeLists.txt</code> 的顶部，如下所示:  </p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"> set(ZEPHYR_MODULES &lt;path-to-module1&gt; &lt;path-to-module2&gt; [...])</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>如果选择此选项，请确保在调用 <code>find_package(Zephyr ...)</code> <strong>之前</strong>设置变量，如上所示。</p></li><li><p>在一个单独的 CMake 脚本中，该脚本被预先加载来填充 CMake 缓存，如下所示:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># Put this in a file with a name like &quot;zephyr-modules.cmake&quot;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> set(ZEPHYR_MODULES &lt;path-to-module1&gt; &lt;path-to-module2&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   CACHE STRING &quot;pre-cached modules&quot;)</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p> 你可以通过在 CMake 命令行中添加 <code>-C zephyr-modules.cmake</code> 来告诉构建系统使用这个文件。</p></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="没有使用模块"></a><span id="num">没有使用模块</span><a class="hash-link" href="#没有使用模块" title="Direct link to heading">#</a></h4><p>如果你没有安装 west，也没有自己指定 <strong>ZEPHYR_MODULES</strong>则不会向构建添加其他模块。你仍然可以构建任何不需要在外部代码仓库中定义代码或 Kconfig 选项的应用程序。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/tool/lisa_plugin_zephyr/release_note"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« lisa zephyr 更新日志</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-csk6/chips/600X/application/peripheral/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">外设驱动的使用 »</div></a></div></nav><div class="gitalk-wrapper"><ul class="gitalk-option"><li class="like"><i class="icon like-icon"></i> <span id="like_num">有帮助  0</span></li><li class="unlike"><i class="icon unlike-icon"></i> <span id="unlike_num">没帮助 0</span></li><li>文档反馈</li></ul></div></div></div><div class="col col--3" style="padding-left:0px"><div class="tableOfContents_k96L thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#模块代码仓库" class="table-of-contents__link"><span id="moduleRep">模块代码仓库</span></a></li><li><a href="#文件要求" class="table-of-contents__link"><span id="docrequirements">文件要求</span></a></li><li><a href="#在zephyr构建系统中集成模块" class="table-of-contents__link"><span id="moduleRep">在zephyr构建系统中集成模块</span></a></li><li><a href="#模块yaml文件说明" class="table-of-contents__link"><span id="myfd">模块yaml文件说明</span></a><ul><li><a href="#模块名称" class="table-of-contents__link"><span id="mn">模块名称</span></a></li><li><a href="#模块集成文件模块内" class="table-of-contents__link"><span id="mn">模块集成文件(模块内)</span></a></li><li><a href="#构建系统集成" class="table-of-contents__link"><span id="bsi">构建系统集成</span></a></li><li><a href="#zephyr模块依赖" class="table-of-contents__link"><span id="zmdz">zephyr模块依赖</span></a></li><li><a href="#模块集成文件外部" class="table-of-contents__link"><span id="mife">模块集成文件(外部)</span></a></li><li><a href="#构建设置" class="table-of-contents__link"><span id="bs">构建设置</span></a></li><li><a href="#包含模块" class="table-of-contents__link"><span id="mi">包含模块</span></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 安徽聆思智能科技有限公司皖ICP备05001217号</div></div></div></footer></div>
<script src="/docs-csk6/assets/js/runtime~main.7e57cda1.js"></script>
<script src="/docs-csk6/assets/js/main.5686a861.js"></script>
<script>!function(e,n,s,t,d){e[s]=e[s]||function(){(e[s].a=e[s].a||[]).push(arguments)},(d=n.createElement("script")).async=!0,d.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",n.body.appendChild(d)}(window,document,"simplemde")</script></body>
</html>