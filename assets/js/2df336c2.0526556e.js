"use strict";(self.webpackChunkls_docs_web=self.webpackChunkls_docs_web||[]).push([[2833],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>k});var i=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=i.createContext({}),s=function(e){var n=i.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=s(e.components);return i.createElement(c.Provider,{value:n},e.children)},o={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},u=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),u=s(t),k=r,m=u["".concat(c,".").concat(k)]||u[k]||o[k]||a;return t?i.createElement(m,l(l({ref:n},d),{},{components:t})):i.createElement(m,l({ref:n},d))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,l=new Array(a);l[0]=u;var p={};for(var c in n)hasOwnProperty.call(n,c)&&(p[c]=n[c]);p.originalType=e,p.mdxType="string"==typeof e?e:r,l[1]=p;for(var s=2;s<a;s++)l[s]=t[s];return i.createElement.apply(null,l)}return i.createElement.apply(null,t)}u.displayName="MDXCreateElement"},21107:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>p,toc:()=>c});var i=t(87462),r=(t(67294),t(3905));const a={},l="\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8",p={unversionedId:"chips/600X/application/customdriver/custom-driver-video",id:"chips/600X/application/customdriver/custom-driver-video",isDocsHomePage:!1,title:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8",description:"\u6982\u8ff0",source:"@site/docs/chips/600X/application/customdriver/custom-driver-video.md",sourceDirName:"chips/600X/application/customdriver",slug:"/chips/600X/application/customdriver/custom-driver-video",permalink:"/docs-csk6/chips/600X/application/customdriver/custom-driver-video",version:"current",frontMatter:{},sidebar:"docs/chips/600X",previous:{title:"\u7f51\u7edc\u8fde\u63a5",permalink:"/docs-csk6/chips/600X/application/network/net_socket"},next:{title:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u677f\u578b",permalink:"/docs-csk6/chips/600X/application/board"}},c=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",children:[]},{value:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8\u6587\u4ef6",id:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8\u6587\u4ef6",children:[{value:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684 CMake \u6587\u4ef6",id:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684-cmake-\u6587\u4ef6",children:[]},{value:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684 Kconfig \u6587\u4ef6",id:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684-kconfig-\u6587\u4ef6",children:[]},{value:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6(.yaml)",id:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6yaml",children:[]}]},{value:"\u5e94\u7528\u9879\u76ee\u914d\u7f6e",id:"\u5e94\u7528\u9879\u76ee\u914d\u7f6e",children:[{value:"CMake\u6587\u4ef6\u6307\u5b9a\u7f16\u8bd1\u81ea\u5b9a\u4e49\u9a71\u52a8",id:"cmake\u6587\u4ef6\u6307\u5b9a\u7f16\u8bd1\u81ea\u5b9a\u4e49\u9a71\u52a8",children:[]},{value:"\u8bbe\u5907\u6811\u914d\u7f6e",id:"\u8bbe\u5907\u6811\u914d\u7f6e",children:[]},{value:"\u5e94\u7528\u7ec4\u4ef6\u914d\u7f6e",id:"\u5e94\u7528\u7ec4\u4ef6\u914d\u7f6e",children:[]},{value:"\u5e94\u7528\u4ee3\u7801\u4e2d\u5f15\u7528\u6444\u50cf\u5934\u8bbe\u5907",id:"\u5e94\u7528\u4ee3\u7801\u4e2d\u5f15\u7528\u6444\u50cf\u5934\u8bbe\u5907",children:[]}]},{value:"\u9a71\u52a8\u6269\u5c55",id:"\u9a71\u52a8\u6269\u5c55",children:[]},{value:"\u81ea\u5b9a\u4e49\u9a71\u52a8\u793a\u4f8b",id:"\u81ea\u5b9a\u4e49\u9a71\u52a8\u793a\u4f8b",children:[]}],s={toc:c};function d(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,i.Z)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8"},"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8"),(0,r.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,r.kt)("p",null,"\u5728\u5b9e\u9645\u9879\u76ee\u7684\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u5f00\u53d1\u8005\u5f80\u5f80\u9700\u8981\u57fa\u4e8eCSK6\u63a5\u5165\u65b0\u7684\u786c\u4ef6\u5916\u8bbe\uff0c\u4f8b\u5982\u6444\u50cf\u5934\u3001\u663e\u793a\u5c4f\u3001\u89e6\u6478\u5c4f\u7b49\uff0c\u9700\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8\u3002csk6 sdk\u652f\u6301\u5f00\u53d1\u8005\u5728app\u5e94\u7528\u76ee\u5f55\u4e0b\u589e\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8\uff0c\u672c\u7ae0\u8282\u4ee5\u589e\u52a0\u578b\u53f7\u4e3a BF30A2 \u6444\u50cf\u5934\u9a71\u52a8\u4e3a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u5728app\u5e94\u7528\u9879\u76ee\u4e0b\u5b8c\u6210\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u6dfb\u52a0\u3002"),(0,r.kt)("h2",{id:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8\u6587\u4ef6"},"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a71\u52a8\u6587\u4ef6"),(0,r.kt)("p",null,"\u5728Zephyr\u5e94\u7528\u7a0b\u5e8f\u76ee\u5f55\u4e0b\u5efa\u7acb\u9a71\u52a8\u76ee\u5f55drivers\uff0c\u5e76\u6dfb\u52a0 BF30A2 \u6444\u50cf\u5934\u9a71\u52a8\u7684.c\u6587\u4ef6\uff0c\u5177\u4f53\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"app\n\u251c\u2500\u2500 drivers\n|    \u251c\u2500\u2500 video\n|    |    \u251c\u2500\u2500 CMakeLists.txt\n|    |    \u251c\u2500\u2500 Kconfig.bf30a2\n|    |    \u2514\u2500\u2500 bf30a2.c\n|    \u251c\u2500\u2500 CMakeLists.txt\n|    \u2514\u2500\u2500 Kconfig.drivers\n\u2514\u2500\u2500 dts\n    \u2514\u2500\u2500bindings\n        \u2514\u2500\u2500video\n            \u251c\u2500\u2500 vendor-prefixes.txt\n            \u2514\u2500\u2500 byd,bf30a2.yaml\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"drivers \u76ee\u5f55\u4e0b\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a\u9a71\u52a8\u6587\u4ef6\u76ee\u5f55\uff0c\u4f8b\u5982\u672c\u793a\u4f8b\u4e2d\u9700\u8981\u6dfb\u52a0\u6444\u50cf\u5934\u9a71\u52a8\uff0c\u5219\u65b0\u589e video \u6587\u4ef6\u5939\uff0c\u6dfb\u52a0\u663e\u793a\u5c4f\u9a71\u52a8\u65f6\u53ef\u589e\u52a0display\u6587\u4ef6\u5939\u3002"),(0,r.kt)("li",{parentName:"ul"},"dts \u76ee\u5f55\u5b58\u653e\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6(byd,bf30a2.yaml)\u548c\u5382\u5546\u4fe1\u606f\u6587\u4ef6(vendor-prefixes.txt)\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8be5",(0,r.kt)("inlineCode",{parentName:"li"},"drivers"),"\u76ee\u5f55\u4e0e",(0,r.kt)("inlineCode",{parentName:"li"},"zephyr/drivers"),"\u76ee\u5f55\u7ed3\u6784\u76f8\u5bf9\u5e94")),(0,r.kt)("h3",{id:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684-cmake-\u6587\u4ef6"},"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684 CMake \u6587\u4ef6"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u6dfb\u52a0\u7684\u81ea\u5b9a\u4e49\u9a71\u52a8\u4fee\u6539 drivers/video \u76ee\u5f55\u4e0b\u7684CMakeLists.txt\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"# SPDX-License-Identifier: Apache-2.0\nzephyr_library_sources_ifdef(CONFIG_VIDEO_BF30A2    bf30a2.c)\n")),(0,r.kt)("p",null,"CONFIG_VIDEO_BF30A2 \u4e3a\u81ea\u5b9a\u6dfb\u52a0\u9a71\u52a8\u7684\u914d\u7f6e\u540d\u79f0\uff0cbf30a2.c\u4e3a\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684.c\u6587\u4ef6\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728drivers\u6839\u76ee\u5f55\u4e0b\u7684CMakeLists.txt\u6587\u4ef6\uff0c\u5c06\u81ea\u5b9a\u4e49\u9a71\u52a8\u6587\u4ef6\u5939\u6dfb\u52a0\u5230CMakeLists\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"add_subdirectory_ifdef(CONFIG_VIDEO_BF30A2 video)\n")),(0,r.kt)("h3",{id:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684-kconfig-\u6587\u4ef6"},"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684 Kconfig \u6587\u4ef6"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684Kconfig\u6587\u4ef6")),(0,r.kt)("p",null,"Kconfig.bf30a2\u662f\u6444\u50cf\u5934\u9a71\u52a8\u4ee3\u7801bf30a2.c\u4e2d\u8981\u4f7f\u7528\u7684\u914d\u7f6e\u9009\u9879\uff0c\u5177\u4f53\u53ef\u53c2\u8003csk6sdk/driver\u76ee\u5f55\u4e0b\u5bf9\u5e94\u7c7b\u578b\u9a71\u52a8\u7684Kconfig\u6587\u4ef6\u6765\u5b8c\u6210\u4fee\u6539\uff0c\u4ee5\u4e0b\u662fBF30A2\u7684Kconfig\u5185\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'# BF30A2 driver\n\n# Copyright (c) 2022 listenai\n# SPDX-License-Identifier: Apache-2.0\n\nconfig VIDEO_BF30A2\n    bool "1/15 inch QVGA CMOS Image Sensor BF30A2"\n    help\n      Enable driver for BF30A2 CMOS digital image sensor device.\n\nconfig VIDEO_BF30A2_RECEIVE_BUF_NUM\n    int "Must be greater than or equal to 2"\n    default 2\n    help\n      Config the number of buffers that the bf30a2 driver receives raw data.\n\nconfig VIDEO_BF30A2_RECEIVE_THREAD_PRIORITY\n    int "the priority of thread"\n    default -15\n    help\n      Config the priority of thread.\n\nconfig VIDEO_BF30A2_TIMER_TIMEOUT\n    int "timeout of ms"\n    default 5\n    help\n      Config the timeout value for timer.\n\nconfig VIDEO_BF30A2_INIT_PRIORITY\n    int "Init priority"\n    default 80\n    help\n      BF30A2 driver initialization priority.\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728drivers\u6839\u76ee\u5f55\u4e0b\u7684Kconfig.drivers\u6587\u4ef6\u4e2d\u5f15\u7528\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684Kconfig:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'rsource "video/Kconfig.bf30a2"\n')),(0,r.kt)("h3",{id:"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6yaml"},"\u4fee\u6539\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6(.yaml)"),(0,r.kt)("p",null,"\u4e3a\u4e86\u786c\u4ef6\u4e0a\u7684\u7075\u6d3b\u6027\uff0cZephyr\u5f15\u5165\u4e86\u8bbe\u5907\u6811\uff0c\u901a\u8fc7\u8bbe\u5907\u6811\u7ed1\u5b9a\u7684\u65b9\u5f0f\u5c06\u8bbe\u5907\u6811\u8f6c\u6362\u4e3aC\u5b8f\u6765\u4f7f\u7528\u3002Zephyr\u7684\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6\u53ef\u80fd\u4e0d\u5305\u542b\u6211\u4eec\u8981\u7528\u7684\u786c\u4ef6\u8bbe\u5907\uff0c\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u81ea\u5df1\u6dfb\u52a0\u3002\u540c\u6837\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6\u4e5f\u53ef\u4ee5\u7eb3\u5165app\u7684\u76ee\u5f55\u8fdb\u884c\u7ba1\u7406\uff0c\u5728app\u76ee\u5f55\u4e0b\u6dfb\u52a0dts\u76ee\u5f55\uff0c\u91cc\u9762\u653e\u7f6e\u8bbe\u5907\u6811\u7ed1\u5b9a\u6587\u4ef6\u3002",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},".yaml"),"\u6587\u4ef6\u53ef\u53c2\u8003",(0,r.kt)("inlineCode",{parentName:"p"},"csk6sdk/dts/bindings/video/"),"\u76ee\u5f55\u4e0b\u5bf9\u5e94\u7c7b\u578b\u9a71\u52a8\u7684.yaml\u6587\u4ef6\u6765\u5b8c\u6210\u4fee\u6539\uff0c\u4ee5\u4e0b\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"byd,bf30a2.yaml"),"\u6587\u4ef6\u5185\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'# Copyright (c) 2022, listenai\n# SPDX-License-Identifier: Apache-2.0\n\ndescription: 1/15 inch QVGA CMOS Image Sensor\n\ncompatible: "byd,bf30a2"\n\nproperties:\n    pd-gpios:\n      type: phandle-array\n      required: false\n      description: pd-gpios\n    pwr-gpios:\n      type: phandle-array\n      required: false\n      description: power-gpios\n    product-id:\n      type: int\n      required: false\n      description: product-id\n    csk6-spec:\n      type: boolean\n      required: false\n      description: csk6-spec\n    label:\n      type: string\n      required: true\n      description: label\n    reg :\n      type: array\n      required: true\n      description: reg\n    spi:\n      type: phandle\n      required: false\n      description: spi-bus\n    pwms:\n      type: phandle-array\n      required: false\n      description: pwm output to xclk\n    xclk-freq:\n      type: int\n      required: false\n      description: xclk-freq\n    xclk-gpios:\n      type: phandle-array\n      required: false\n      description: xclk-gpios\n\n\ninclude: i2c-device.yaml\n')),(0,r.kt)("p",null,"vendor-prefixes.txt\u4e3a\u4f9b\u5e94\u5546\u524d\u7f00\u6ce8\u518c\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"newvision    NEWVISION Microelectronics Co., Ltd.\n")),(0,r.kt)("h2",{id:"\u5e94\u7528\u9879\u76ee\u914d\u7f6e"},"\u5e94\u7528\u9879\u76ee\u914d\u7f6e"),(0,r.kt)("h3",{id:"cmake\u6587\u4ef6\u6307\u5b9a\u7f16\u8bd1\u81ea\u5b9a\u4e49\u9a71\u52a8"},"CMake\u6587\u4ef6\u6307\u5b9a\u7f16\u8bd1\u81ea\u5b9a\u4e49\u9a71\u52a8"),(0,r.kt)("p",null,"\u5728app\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684CMakeLists.txt\u6587\u4ef6\u4e2d\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"add_subdirectory(drivers)"),"\u6765\u6307\u5b9a\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u9a71\u52a8(drivers)\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"app\n\u2514\u2500\u2500 CMakeLists.txt\n")),(0,r.kt)("p",null,"CMakeLists\u4fee\u6539\u540e\u7684\u5185\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"# SPDX-License-Identifier: Apache-2.0\n\ncmake_minimum_required(VERSION 3.20.0)\n\nfind_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})\nproject(hello_world)\ntarget_sources(app PRIVATE src/main.c)\n\n# \u5f15\u7528\u81ea\u5b9a\u4e49\u9a71\u52a8\nadd_subdirectory(drivers)\n")),(0,r.kt)("h3",{id:"\u8bbe\u5907\u6811\u914d\u7f6e"},"\u8bbe\u5907\u6811\u914d\u7f6e"),(0,r.kt)("p",null,"\u5728\u5e94\u7528\u6839\u76ee\u5f55",(0,r.kt)("inlineCode",{parentName:"p"},"/boards/csk6002_9s_nano.overlay"),"\u6dfb\u52a0\u6444\u50cf\u5934I2C\u548cSPI\u5f15\u811a\u5bf9\u5e94\u7684\u8bbe\u5907\u6811\u914d\u7f6e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'&csk6002_9s_nano_pinctrl{\n                pinctrl_i2c0_scl_default: i2c0_scl_default{\n                        pinctrls = <&pinmuxb 2 8>;\n                };\n\n                pinctrl_i2c0_sda_default: i2c0_sda_default{\n                        pinctrls = <&pinmuxb 3 8>;\n                };\n\n                pinctrl_spi1_sclk_default: spi1_sclk_default {\n                    pinctrls = < &pinmuxb 0 7 >;\n                };\n\n                pinctrl_spi1_mosi_default: spi1_mosi_default {\n                    pinctrls = < &pinmuxb 1 7 >;\n                };\n\n                pinctrl_spi1_cs_default: spi1_cs_default {\n                    pinctrls = < &pinmuxa 9 7 >;\n                };\n};\n\n&gpt0 {\n    status = "okay";\n};\n\n&spi0 {\n    status = "disabled";\n};\n\n&spi1 {\n    status = "okay";\n    spi-max-frequency = <100000000>;\n    pinctrl-0 = <&pinctrl_spi1_sclk_default &pinctrl_spi1_mosi_default &pinctrl_spi1_cs_default>;\n    pinctrl-names = "default";\n};\n\n&i2c0 {\n        status = "okay";\n        pinctrl-0 = <&pinctrl_i2c0_scl_default &pinctrl_i2c0_sda_default>;\n        pinctrl-names = "default";\n\n        bf30a2: bf30a2@6e {\n            compatible = "byd,bf30a2";\n            status = "okay";\n            label = "VIDEO";\n            reg = <0x6e>;\n            product-id = <0x3b02>;\n            spi = <&spi1>;\n        xclk-gpios = <&gpioa 11 0>;\n        };\n};\n\n')),(0,r.kt)("h3",{id:"\u5e94\u7528\u7ec4\u4ef6\u914d\u7f6e"},"\u5e94\u7528\u7ec4\u4ef6\u914d\u7f6e"),(0,r.kt)("p",null,"\u5728\u5e94\u7528\u8ddf\u76ee\u5f55\u4e0b",(0,r.kt)("inlineCode",{parentName:"p"},"prj.conf"),"\u7ec4\u4ef6\u914d\u7f6e\u6587\u4ef6\u91cc\u589e\u52a0video\u914d\u7f6e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"# video\nCONFIG_SPI=y\nCONFIG_I2C=y\nCONFIG_DMA=y\nCONFIG_PWM=y\nCONFIG_VIDEO=y\nCONFIG_VIDEO_BF30A2=y\nCONFIG_VIDEO_BUFFER_POOL_SZ_MAX=25600\nCONFIG_SCHED_MULTIQ=y\n")),(0,r.kt)("h3",{id:"\u5e94\u7528\u4ee3\u7801\u4e2d\u5f15\u7528\u6444\u50cf\u5934\u8bbe\u5907"},"\u5e94\u7528\u4ee3\u7801\u4e2d\u5f15\u7528\u6444\u50cf\u5934\u8bbe\u5907"),(0,r.kt)("p",null,"\u4e0a\u8ff0\u914d\u7f6e\u5b8c\u6210\u4e86\u81ea\u5b9a\u4e49\u9a71\u52a8\u6240\u9700\u8981\u7684\u64cd\u4f5c\uff0c\u5f00\u53d1\u8005\u5373\u53ef\u5728\u5e94\u7528\u4ee3\u7801\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u9a71\u52a8\uff0c\u4f7f\u7528\u7684\u65b9\u5f0f\u548csdk\u9ed8\u8ba4\u652f\u6301\u7684\u8bbe\u5907\u9a71\u52a8\u65b9\u5f0f\u4e00\u6837\uff0c\u8fd9\u91cc\u4e0d\u5c55\u5f00\u8bf4\u660e\uff0c\u4ee5\u4e0b\u662fBF30A2\u4f7f\u7528\u793a\u4f8b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'#define VIDEO_DEV DT_LABEL(DT_INST(0, byd_bf30a2))\nconst struct device *video = device_get_binding(VIDEO_DEV);\n\nif (!device_is_ready(video)) {\n        LISA_LOGE(TAG, "ipm device is null.\\n");\n        return;\n    }\n\n')),(0,r.kt)("h2",{id:"\u9a71\u52a8\u6269\u5c55"},"\u9a71\u52a8\u6269\u5c55"),(0,r.kt)("p",null,"\u672c\u7ae0\u8282\u4ec5\u4ee5BF30A2\u81ea\u5b9a\u4e49\u9a71\u52a8\u4e3a\u4f8b\u8bf4\u660e\uff0c\u5f00\u53d1\u8005\u5728\u5b9e\u9645\u9879\u76ee\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u8fd8\u4f1a\u9047\u5230\u663e\u793a\u5c4f\u3001\u89e6\u6478\u5c4f\u7b49\u5916\u8bbe\u9a71\u52a8\u7684\u81ea\u5b9a\u4e49\u5f00\u53d1\uff0c\u53ef\u53c2\u8003\u672c\u7ae0\u8282\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u8bf4\u660e\uff0c\u4ee5\u53casdk\u9ed8\u8ba4\u9a71\u52a8\u793a\u4f8b\u5b8c\u6210\u81ea\u5b9a\u4e49\u9a71\u52a8\u7684\u6dfb\u52a0\u3002\nsdk\u9ed8\u8ba4\u652f\u6301\u7684\u663e\u793a\u5c4f\u9a71\u52a8(sdk/driver/display)\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"display_ili9xxx(ili9340\u3001ili9341\u3001ili9488\u7b49)"),(0,r.kt)("li",{parentName:"ul"},"display_st7789v")),(0,r.kt)("p",null,"sdk\u9ed8\u8ba4\u652f\u6301\u7684\u89e6\u6478\u5c4f\u9a71\u52a8(sdk/driver/kscan)\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"kscan_ft5336"),(0,r.kt)("li",{parentName:"ul"},"kscan_bl6xxx")),(0,r.kt)("p",null,"sdk\u9ed8\u8ba4\u652f\u6301\u7684\u6444\u50cf\u5934\u9a71\u52a8(sdk/driver/video)\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ov9655")),(0,r.kt)("h2",{id:"\u81ea\u5b9a\u4e49\u9a71\u52a8\u793a\u4f8b"},"\u81ea\u5b9a\u4e49\u9a71\u52a8\u793a\u4f8b"),(0,r.kt)("h4",{id:"\u51c6\u5907\u5de5\u4f5c"},"\u51c6\u5907\u5de5\u4f5c"),(0,r.kt)("p",null,"\u672c\u793a\u4f8b\u57fa\u4e8eCSK6-NanoKit\u5f00\u53d1\u677f\u6765\u5b9e\u73b0\uff0c\u9700\u8981\u505a\u5982\u4e0b\u51c6\u5907\u5de5\u4f5c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u51c6\u5907\u4e00\u4e2aCSK6-NanoKit\u5f00\u53d1\u677f\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u51c6\u5907\u4e00\u4e2a\u5e26BF30A2\u6444\u50cf\u5934\u7684\u6269\u5c55\u677f\uff0c\u901a\u8fc7SPI\u63a5\u53e3\u548cI2C\u63a5\u53e3\u8fde\u63a5\u5230CSK6-NanoKit\u4e0a\u3002")),(0,r.kt)("h4",{id:"\u83b7\u53d6sample\u9879\u76ee"},"\u83b7\u53d6sample\u9879\u76ee"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"CSK6 SDK"),"\u63d0\u4f9b\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"bf30a2 camera"),"\u81ea\u5b9a\u4e49\u9a71\u52a8\u96c6\u6210\u7684\u793a\u4f8b\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u83b7\u53d6\u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"lisa zep create\n")),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(17943).Z})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"boards\u2192 csk6 \u2192 drivers \u2192 vidoe \u2192 bf30a2 \u2192 sample ")),(0,r.kt)("p",null,"bf30a2 sample\u521b\u5efa\u6210\u529f\u3002"),(0,r.kt)("h4",{id:"\u7f16\u8bd1\u548c\u70e7\u5f55"},"\u7f16\u8bd1\u548c\u70e7\u5f55"),(0,r.kt)("h5",{id:"\u7f16\u8bd1"},"\u7f16\u8bd1"),(0,r.kt)("p",null,"\u5728sample\u6839\u76ee\u5f55\u4e0b\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u5b8c\u6210\u7f16\u8bd1\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"lisa zep build -b csk6002_9s_nano\n")),(0,r.kt)("h5",{id:"\u70e7\u5f55"},"\u70e7\u5f55"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"csk6002_9s_nano"),"\u901a\u8fc7USB\u8fde\u63a5PC\uff0c\u901a\u8fc7\u70e7\u5f55\u6307\u4ee4\u70e7\u5f55\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"lisa zep flash --runner pyocd\n")))}d.isMDXComponent=!0},17943:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/liza_zep_create-2b31c9953e388e8804c8d3c9f7efa66f.png"}}]);