"use strict";(self.webpackChunkls_docs_web=self.webpackChunkls_docs_web||[]).push([[23],{3905:(t,n,e)=>{e.d(n,{Zo:()=>c,kt:()=>k});var a=e(67294);function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function l(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function _(t,n){if(null==t)return{};var e,a,r=function(t,n){if(null==t)return{};var e,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)e=i[a],n.indexOf(e)>=0||(r[e]=t[e]);return r}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)e=i[a],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(r[e]=t[e])}return r}var p=a.createContext({}),o=function(t){var n=a.useContext(p),e=n;return t&&(e="function"==typeof t?t(n):l(l({},n),t)),e},c=function(t){var n=o(t.components);return a.createElement(p.Provider,{value:n},t.children)},N={inlineCode:"code",wrapper:function(t){var n=t.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(t,n){var e=t.components,r=t.mdxType,i=t.originalType,p=t.parentName,c=_(t,["components","mdxType","originalType","parentName"]),d=o(e),k=r,s=d["".concat(p,".").concat(k)]||d[k]||N[k]||i;return e?a.createElement(s,l(l({ref:n},c),{},{components:e})):a.createElement(s,l({ref:n},c))}));function k(t,n){var e=arguments,r=n&&n.mdxType;if("string"==typeof t||r){var i=e.length,l=new Array(i);l[0]=d;var _={};for(var p in n)hasOwnProperty.call(n,p)&&(_[p]=n[p]);_.originalType=t,_.mdxType="string"==typeof t?t:r,l[1]=_;for(var o=2;o<i;o++)l[o]=e[o];return a.createElement.apply(null,l)}return a.createElement.apply(null,e)}d.displayName="MDXCreateElement"},54801:(t,n,e)=>{e.r(n),e.d(n,{contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>_,toc:()=>p});var a=e(87462),r=(e(67294),e(3905));const i={},l="WIFI\u8fde\u63a5",_={unversionedId:"chips/600X/application/network/wifi_connect",id:"chips/600X/application/network/wifi_connect",isDocsHomePage:!1,title:"WIFI\u8fde\u63a5",description:"\u6982\u8ff0",source:"@site/docs/chips/600X/application/network/wifi_connect.md",sourceDirName:"chips/600X/application/network",slug:"/chips/600X/application/network/wifi_connect",permalink:"/docs-csk6/chips/600X/application/network/wifi_connect",version:"current",frontMatter:{},sidebar:"docs/chips/600X",previous:{title:"\u6982\u8ff0",permalink:"/docs-csk6/chips/600X/application/network/overview"},next:{title:"\u5185\u6838",permalink:"/docs-csk6/chips/600X/kernel/index"}},p=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",children:[]},{value:"WiFi API\u63a5\u53e3",id:"wifi-api\u63a5\u53e3",children:[]},{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b",children:[{value:"\u5b9e\u73b0\u903b\u8f91",id:"\u5b9e\u73b0\u903b\u8f91",children:[]},{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",children:[]},{value:"\u83b7\u53d6sample\u9879\u76ee",id:"\u83b7\u53d6sample\u9879\u76ee",children:[]},{value:"\u793a\u4f8b\u9879\u76ee\u7ec4\u4ef6\u914d\u7f6e",id:"\u793a\u4f8b\u9879\u76ee\u7ec4\u4ef6\u914d\u7f6e",children:[]},{value:"\u5e94\u7528\u5b9e\u73b0",id:"\u5e94\u7528\u5b9e\u73b0",children:[]},{value:"\u7f16\u8bd1\u548c\u70e7\u5f55",id:"\u7f16\u8bd1\u548c\u70e7\u5f55",children:[]}]}],o={toc:p};function c(t){let{components:n,...i}=t;return(0,r.kt)("wrapper",(0,a.Z)({},o,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"wifi\u8fde\u63a5"},"WIFI\u8fde\u63a5"),(0,r.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,r.kt)("p",null,"CSK6-NanoKit\u5f00\u53d1\u677f\u63d0\u4f9b\u4e86WiFi\u7f51\u7edc\u8fde\u63a5\u7684\u80fd\u529b\uff0c\u672c\u7ae0\u8282\u901a\u8fc7\u793a\u4f8b\u4ecb\u7ecdWiFi\u7f51\u7edc\u8fde\u63a5API\u63a5\u53e3\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\u3002"),(0,r.kt)("h2",{id:"wifi-api\u63a5\u53e3"},"WiFi API\u63a5\u53e3"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"CSK WiFi \u9a71\u52a8\u521d\u59cb\u5316")," "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"int csk_wifi_init(void);\n")),(0,r.kt)("p",null,"\u53c2\u6570\u8bf4\u660e\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u8fd4\u56de\u503c"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u521d\u59cb\u5316\u6210\u529f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5176\u4ed6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8be6\u89c1WiFi\u63a5\u53e3\u8fd4\u56de\u72b6\u6001\u8868")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u518cWiFi\u56de\u8c03\u4e8b\u4ef6")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"int csk_wifi_add_callback(csk_wifi_event_cb_t *wifi_event_cb);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570\u8bf4\u660e\uff1a")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"wifi_event_cb"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5e94\u7528\u7a0b\u5e8f\u7684\u56de\u8c03\u7ed3\u6784\u6307\u9488")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u9500WiFi\u56de\u8c03\u4e8b\u4ef6")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"int csk_wifi_remove_callback(csk_wifi_event_cb_t *wifi_event_cb);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570\u8bf4\u660e")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"wifi_event_cb"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5e94\u7528\u7a0b\u5e8f\u7684\u56de\u8c03\u7ed3\u6784\u6307\u9488")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u626b\u63cf\u9644\u8fd1\u7684AP\u8bbe\u5907")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"int csk_wifi_scan_ap(csk_wifi_scan_info_t **ap_info, csk_wifi_result_t *result, k_timeout_t timeout);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570\u8bf4\u660e\uff1a")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ap_info"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5411 WiFi AP \u4fe1\u606f\u7ed3\u6784\u7684\u6307\u9488")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"result"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5411WIFI\u64cd\u4f5c\u7ed3\u679c\u7684\u6307\u9488")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"timeout"),(0,r.kt)("td",{parentName:"tr",align:null},"\u626b\u63cf\u8d85\u65f6\u65f6\u95f4")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5efa\u7acbWiFi\u8fde\u63a5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"int csk_wifi_sta_connect(csk_wifi_sta_config_t *sta_config, csk_wifi_result_t *result, k_timeout_t timeout);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570\u8bf4\u660e\uff1a")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sta_config"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5411WIFI Station\u914d\u7f6e\u7ed3\u6784\u7684\u6307\u9488")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"result"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5411WIFI\u64cd\u4f5c\u7ed3\u679c\u7684\u6307\u9488")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"timeout"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u65ad\u5f00WiFi\u8fde\u63a5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"int csk_wifi_sta_disconnect(csk_wifi_result_t *result, k_timeout_t timeout);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570\u8bf4\u660e\uff1a")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sta_config"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5411WIFI Station\u914d\u7f6e\u7ed3\u6784\u7684\u6307\u9488")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"result"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5411WIFI\u64cd\u4f5c\u7ed3\u679c\u7684\u6307\u9488")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"timeout"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"WiFi API\u63a5\u53e3\u72b6\u6001\u5217\u8868\uff1a")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u72b6\u6001\u7c7b\u578b"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_SUCCESS"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI operation successful")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_ERR_STA_FAILED"),(0,r.kt)("td",{parentName:"tr",align:null},"Unknown Station exception, will be raised in Station mode. TODO: remove it")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_ERR_AP_FAILED"),(0,r.kt)("td",{parentName:"tr",align:null},"Unknown SoftAP exception, will be raised in SoftAP mode. TODO: remove it")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_ERR_AP_NOT_FOUND"),(0,r.kt)("td",{parentName:"tr",align:null},"AP ssid not found, will be raised in Station mode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_ERR_INVALID_PASSWORD"),(0,r.kt)("td",{parentName:"tr",align:null},"Invalid WIFI password, will be raised in Station mode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_ERR_SCAN_FAILED"),(0,r.kt)("td",{parentName:"tr",align:null},"WiFi scan neighboring AP devices failed")))),(0,r.kt)("br",null),(0,r.kt)("p",null,"\u66f4\u591aWiFi API\u63a5\u53e3\u63cf\u8ff0\u8bf7\u67e5\u770bCSK6 SDK wifi\u5934\u6587\u4ef6\u63cf\u8ff0\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://cloud.listenai.com/zephyr/zephyr/-/blob/master/drivers/wifi/csk6/include/csk6/csk_wifi.h"},(0,r.kt)("inlineCode",{parentName:"a"},"drivers\\wifi\\csk6\\include\\csk6\\csk_wifi.h")),"\u3002"),(0,r.kt)("h2",{id:"\u4f7f\u7528\u793a\u4f8b"},"\u4f7f\u7528\u793a\u4f8b"),(0,r.kt)("h3",{id:"\u5b9e\u73b0\u903b\u8f91"},"\u5b9e\u73b0\u903b\u8f91"),(0,r.kt)("p",null,"\u672c\u793a\u4f8b\u5b9e\u73b0\u4ee5\u4e0b\u4e1a\u52a1\u903b\u8f91\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fde\u63a5\u4e00\u4e2aAP\u70ed\u70b9\uff0c\u5e76\u83b7\u53d6\u5730\u5740\u4fe1\u606f\uff0c\u70ed\u70b9\u914d\u7f6e\uff1assid: lisatenai pwd: a123456789\u3002")),(0,r.kt)("h3",{id:"\u51c6\u5907\u5de5\u4f5c"},"\u51c6\u5907\u5de5\u4f5c"),(0,r.kt)("p",null,"\u672c\u793a\u4f8b\u57fa\u4e8eCSK6-NanoKit\u5f00\u53d1\u677f\u5b9e\u73b0WiFi\u8fde\u63a5\uff0c\u5e76\u83b7\u53d6WiFi\u8fde\u63a5\u4fe1\u606f\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CSK6-NanoKit\u5f00\u53d1\u677f"),(0,r.kt)("li",{parentName:"ul"},"\u624b\u673a\u6216\u8def\u7531\u5668\u8bbe\u7f6e\u4e00\u4e2aWiFi\u70ed\u70b9\uff0c\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528\u70ed\u70b9(ssid: lisatenai\uff0cpwd: a123456789)\u7684\u505a\u6d4b\u8bd5\u3002")),(0,r.kt)("h3",{id:"\u83b7\u53d6sample\u9879\u76ee"},"\u83b7\u53d6sample\u9879\u76ee"),(0,r.kt)("p",null,"\u901a\u8fc7Lisa\u547d\u4ee4\u521b\u5efa\u9879\u76ee\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"lisa zep create\n")),(0,r.kt)("p",null,(0,r.kt)("img",{src:e(27713).Z}),"\n\u6309\u4ee5\u4e0b\u76ee\u5f55\u9009\u62e9\u5b8c\u6210sample\u521b\u5efa\uff1a  "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"boards \u2192 csk6 \u2192 network \u2192 wifi_sta")),(0,r.kt)("p",null,"sample \u521b\u5efa\u5b8c\u6210\u3002"),(0,r.kt)("h3",{id:"\u793a\u4f8b\u9879\u76ee\u7ec4\u4ef6\u914d\u7f6e"},"\u793a\u4f8b\u9879\u76ee\u7ec4\u4ef6\u914d\u7f6e"),(0,r.kt)("p",null,"\u7ec4\u4ef6\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"sample/prj.conf")),(0,r.kt)("p",null,"\u672c\u793a\u4f8b\u9700\u8981\u6253\u5f00\u4ee5\u4e0b\u4ef6\u7ec4\u4ef6\u914d\u7f6e:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# \u6253\u5f00WiFi\u9a71\u52a8\u914d\u7f6e\nCONFIG_WIFI=y\nCONFIG_CSK_WIFI_STATION=y\nCONFIG_NET_L2_ETHERNET=y\n\n# \u6253\u5f00NET\u7f51\u7edc\u914d\u7f6e\nCONFIG_NETWORKING=y\nCONFIG_NET_DHCPV4=y\nCONFIG_NET_IPV4=y\nCONFIG_NET_SOCKETS=y\nCONFIG_TEST_RANDOM_GENERATOR=y\nCONFIG_NET_SOCKETS_POSIX_NAMES=y\n\n# \u7f51\u7edc\u7ba1\u7406\u914d\u7f6e\nCONFIG_NET_MGMT=y\nCONFIG_NET_MGMT_EVENT=y\nCONFIG_NET_MGMT_EVENT_STACK_SIZE=4096\n\n# \u7f51\u7edc\u7ebf\u7a0b\u6808\u914d\u7f6e\nCONFIG_NET_RX_STACK_SIZE=2048\nCONFIG_NET_TX_STACK_SIZE=2048\n# \u7f51\u7edc\u7684\u5185\u5b58\u6c60\u914d\u7f6e\nCONFIG_NET_PKT_RX_COUNT=16\nCONFIG_NET_PKT_TX_COUNT=16\nCONFIG_NET_BUF_RX_COUNT=64\nCONFIG_NET_BUF_TX_COUNT=64\nCONFIG_NET_CONTEXT_NET_PKT_POOL=y\n\n# \u5f15\u7528\u540d\u4e3anewlib\u7684libc\u6807\u51c6\u5e93\nCONFIG_NEWLIB_LIBC=y\n\n# SYSTEM WORKQUEU\u7ebf\u7a0b\u6808\nCONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048\n# \u7cfb\u7edf\u5806\uff0c\u5206\u914d\u5185\u5b58\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u914d\u7f6e\nCONFIG_HEAP_MEM_POOL_SIZE=35840\nCONFIG_MAIN_STACK_SIZE=4096\nCONFIG_INIT_STACKS=y\n\n# \u6253\u5f00LOG\u914d\u7f6e\nCONFIG_LOG=y\nCONFIG_WIFI_LOG_LEVEL_DBG=y\n")),(0,r.kt)("h3",{id:"\u5e94\u7528\u5b9e\u73b0"},"\u5e94\u7528\u5b9e\u73b0"),(0,r.kt)("h4",{id:"\u4e3b\u51fd\u6570\u5b9e\u73b0"},"\u4e3b\u51fd\u6570\u5b9e\u73b0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'void main(void)\n{\n    /* CSK WiFi \u9a71\u52a8\u521d\u59cb\u5316 */\n    csk_wifi_init();\n\n    /* \u914d\u7f6eWiFi\u56de\u8c03\u4e8b\u4ef6\u53c2\u6570 */\n    wifi_event_cb.handler = &wifi_event_handler;\n    wifi_event_cb.events = CSK_WIFI_EVT_STA_CONNECTED | CSK_WIFI_EVT_STA_DISCONNECTED;\n    wifi_event_cb.arg = NULL;\n\n    /* \u6ce8\u518cWiFi\u56de\u8c03\u4e8b\u4ef6 */\n    csk_wifi_add_callback(&wifi_event_cb);\n\n    /* WiFi\u53c2\u6570\u8dd1\u914d\u7f6e */\n    csk_wifi_sta_config_t sta_config = {\n        .ssid = "listenai",\n        .pwd = "a123456789",\n        .encryption_mode = CSK_WIFI_AUTH_WPA2_PSK\n    };\n\n    int retry_count = 0;\n    csk_wifi_result_t wifi_result;\n    do {\n        printk("connecting to wifi: %s ...\\n", sta_config.ssid);\n        /* \u8fde\u63a5WiFi */\n        int ret = csk_wifi_sta_connect(&sta_config, &wifi_result, K_FOREVER);\n        if (ret == 0) {\n            break;\n        } else {\n            if (wifi_result == CSK_WIFI_ERR_STA_FAILED) {\n                retry_count++;\n                printk("retry to connecting wifi ... %d\\n", retry_count);\n            } else {\n                printk("AP not found or invalid password\\n");\n                return;\n            }\n        }\n    } while (retry_count < 10);\n\n    /* \u6253\u5370\u5df2\u8fde\u63a5WiFi\u4fe1\u606f */\n    printk("--------------------------Current AP info-------------------------------\\n");\n    printk("ssid: %s  pwd: %s  bssid: %s  channel: %d  rssi: %d\\n",\n        sta_config.ssid, sta_config.pwd, sta_config.bssid, sta_config.channel,\n        sta_config.rssi);\n    printk("------------------------------------------------------------------------\\n");\n    /* \u521d\u59cb\u5316\u5e76\u6ce8\u518c DHCP BOUND \u4e8b\u4ef6\uff0c\u8bbe\u5907\u83b7\u53d6 ipv4 \u5730\u5740\u540e\u4ea7\u751f\u56de\u8c03 */\n    net_mgmt_init_event_callback(&dhcp_cb, handler_cb, NET_EVENT_IPV4_DHCP_BOUND);\n    net_mgmt_add_event_callback(&dhcp_cb);\n    struct net_if *iface = net_if_get_default();\n    if (!iface) {\n        printk("wifi interface not available");\n        return;\n    }\n    /* \u5f00\u542fdhcp client\uff0cDHCP \u7528\u6765\u5206\u914d IP */\n    net_dhcpv4_start(iface);\n}\n')),(0,r.kt)("h4",{id:"wifi\u8fde\u63a5\u7684\u56de\u8c03"},"WiFi\u8fde\u63a5\u7684\u56de\u8c03"),(0,r.kt)("p",null,"WiFi\u8fde\u63a5\u56de\u8c03\uff0c\u56de\u8c03\u7531\u4e8b\u4ef6\u89e6\u53d1\uff0c\u8fd9\u91cc\u7684\u4e8b\u4ef6\u53ef\u80fd\u662f\u8fde\u63a5\u6210\u529f\u3001\u8fde\u63a5\u5931\u8d25\u7b49\u7b49\u3002\u66f4\u5177\u4f53\u7684\u4e8b\u4ef6\u7c7b\u578b\u53ef\u4ee5\u53c2\u8003\u4e0b\u6587\u7684\u4e8b\u4ef6\u7c7b\u578b\u63cf\u8ff0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'static void wifi_event_handler(csk_wifi_event_t events, void *event_data, uint32_t data_len, void *arg)\n{\n    if (events & CSK_WIFI_EVT_STA_CONNECTED) {\n        printk("[WiFi sta] connected\\n");\n    } else if (events & CSK_WIFI_EVT_STA_DISCONNECTED) {\n        printk("[WiFi sta] disconnected\\n");\n    } else {\n        abort();\n    }\n}\n')),(0,r.kt)("p",null,"WiFi\u56de\u8c03\u4e8b\u4ef6\u5217\u8868\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u72b6\u6001\u7c7b\u578b"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_EVT_STA_CONNECTED"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI-Station connected event bit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_EVT_STA_DISCONNECTED"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI-Station disconnected event bit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_EVT_AP_STARTED"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI-SoftAP stared event bit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_EVT_AP_STOPPED"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI-SoftAP stopped event bit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_EVT_AP_STACONNECTED"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI-SoftAP station connected event bit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_EVT_AP_STADISCONNECTED"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI-SoftAP station disconnected event bit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CSK_WIFI_EVT_SCAN_DONE"),(0,r.kt)("td",{parentName:"tr",align:null},"WIFI-SoftAP scan done event bit")))),(0,r.kt)("h3",{id:"\u7f16\u8bd1\u548c\u70e7\u5f55"},"\u7f16\u8bd1\u548c\u70e7\u5f55"),(0,r.kt)("h4",{id:"\u7f16\u8bd1"},"\u7f16\u8bd1"),(0,r.kt)("p",null,"\u5728app\u6839\u76ee\u5f55\u4e0b\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u5b8c\u6210\u7f16\u8bd1\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"lisa zep build -b csk6002_9s_nano\n")),(0,r.kt)("h4",{id:"\u70e7\u5f55"},"\u70e7\u5f55"),(0,r.kt)("p",null,"CSK6-NanoKit\u901a\u8fc7USB\u8fde\u63a5PC\uff0c\u901a\u8fc7\u70e7\u5f55\u6307\u4ee4\u5f00\u59cb\u70e7\u5f55\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"lisa zep flash --runner pyocd\n")),(0,r.kt)("h4",{id:"\u67e5\u770b\u7ed3\u679c"},"\u67e5\u770b\u7ed3\u679c"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u67e5\u770b\u65e5\u5fd7\uff1a")),(0,r.kt)("p",null,"CSK6-NanoKit\u901a\u8fc7\u677f\u8f7dDAPlink\u865a\u62df\u4e32\u53e3\u8fde\u63a5\u7535\u8111\uff0c\u6216\u8005\u5c06CSK6-NanoKit\u7684\u65e5\u5fd7\u4e32\u53e3",(0,r.kt)("inlineCode",{parentName:"p"},"A03 TX A02 RX"),"\u5916\u63a5\u4e32\u53e3\u677f\u5e76\u8fde\u63a5\u7535\u8111\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u7535\u8111\u7aef\u4f7f\u7528\u4e32\u53e3\u8c03\u8bd5\u52a9\u624b\u67e5\u770b\u65e5\u5fd7\uff0c\u9ed8\u8ba4\u6ce2\u7279\u7387\u4e3a115200\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"*** Booting Zephyr OS build 1ecc9604fbc0  ***\nwifi test\nxradio_generate_random_mac_addr, 11, generate random mac addr\nmac_addr: '44:29:04:e9:84:69'\n[xr_taskqueue_start_thread , 132]+-+0x8ae68 :umac,8192\n[00:00:00.006,000] \x1b[0m<dbg> csk_wifi.wifi_obj_set_sm: (91)STA_SM: current[WIFI_SM_ON_STARTUP], next[WIFI_SM_ON_STARTUP]\x1b[0m\n\nwlan information ===================================================\nfirmware:\n    version : R0-XR_C07.08.52.65_02.65 Mar  5 2021 11:45:46 \n    buffer  : 30\ndriver:\n    version : XR_V02.05_20220524v1\nmac address:\n    in use        : 44:29:04:e9:84:69\n    in use        : 44:29:04:e9:84:6a\n====================================================================\n\nwlan_sta_set_autoconnect enable :0 \nconnecting to wifi: TP-LINK_LINGSI ...\n[00:00:00.902,000] \x1b[0m<dbg> csk_wifi.wlan_event_handler: Got wlan event [WLAN_EVENT_FW_STARTUP_DONE], current state[WIFI_SM_ON_STARTUP]\x1b[0m\n[00:00:00.902,000] \x1b[0m<dbg> csk_wifi.wifi_obj_set_sm: (91)STA_SM: current[WIFI_SM_ON_STARTUP], next[WIFI_SM_STARTUP_DONE]\x1b[0m\n[00:00:00.902,000] \x1b[0m<inf> csk_wifi: WiFi module startup done\x1b[0m\n[00:00:00.941,000] \x1b[0m<dbg> csk_wifi.wifi_obj_set_sm: (91)STA_SM: current[WIFI_SM_STARTUP_DONE], next[WIFI_SM_STA_ON_CONNECT_SCAN]\x1b[0m\nEVENT NOTIFY WLAN_EVENT_SCAN_SUCCESS\nsta: Trying to associate with 0a:dd:a8:7f:59:60 (SSID='TP-LINK_LINGSI' freq=2462 MHz)\nsta: Associated with 0a:dd:a8:7f:59:60\nsta: WPA: Key negotiation completed with 0a:dd:a8:7f:59:60 [PTK=CCMP GTK=CCMP]\nsta: CTRL-EVENT-CONNECTED - Connection to 0a:dd:a8:7f:59:60 completed [id=0 id_str=]\n[WiFi sta] connected\n--------------------------Current AP info-------------------------------\nssid: TP-LINK_LINGSI  pwd: a123456789  bssid: 0a:dd:a8:7f:59:60  channel: 11  rssi: -57\n------------------------------------------------------------------------\n[00:00:05.001,000] \x1b[0m<dbg> csk_wifi.wlan_event_handler: Got wlan event [WLAN_EVENT_SCAN_SUCCESS], current state[WIFI_SM_STA_ON_CONNECT_SCAN]\x1b[0m\n[00:00:05.001,000] \x1b[0m<inf> csk_wifi: STA_SM[WIFI_SM_STA_ON_CONNECT_SCAN]: scan success\x1b[0m\n[00:00:05.001,000] \x1b[0m<dbg> csk_wifi.wifi_obj_set_sm: (91)STA_SM: current[WIFI_SM_STA_ON_CONNECT_SCAN], next[WIFI_SM_STA_ON_CONNECT]\x1b[0m\n[00:00:05.228,000] \x1b[0m<dbg> csk_wifi.wlan_event_handler: Got wlan event [WLAN_EVENT_CONNECTED], current state[WIFI_SM_STA_ON_CONNECT]\x1b[0m\n[00:00:05.228,000] \x1b[0m<inf> csk_wifi: STA_SM[WIFI_SM_STA_ON_CONNECT]: connected\x1b[0m\n[00:00:05.228,000] \x1b[0m<dbg> csk_wifi.wifi_obj_set_sm: (91)STA_SM: current[WIFI_SM_STA_ON_CONNECT], next[WIFI_SM_STA_CONNECTED]\x1b[0m\nYour address: 192.168.43.71\nLease time: 3599 seconds\nSubnet: 255.255.255.0\nRouter: 192.168.43.1\n\n")),(0,r.kt)("p",null,"\u5982\u65e5\u5fd7\u6240\u793a\uff0cCSK6-NanoKit\u6210\u529f\u8fde\u63a5\u70ed\u70b9\u5e76\u83b7\u53d6IP\u5730\u5740\u3002"))}c.isMDXComponent=!0},27713:(t,n,e)=>{e.d(n,{Z:()=>a});const a=e.p+"assets/images/liza_zep_create-2b31c9953e388e8804c8d3c9f7efa66f.png"}}]);