"use strict";(self.webpackChunkls_docs_web=self.webpackChunkls_docs_web||[]).push([[1623],{3905:(t,e,n)=>{n.d(e,{Zo:()=>k,kt:()=>c});var a=n(67294);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e){if(null==t)return{};var n,a,l=function(t,e){if(null==t)return{};var n,a,l={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}var d=a.createContext({}),o=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},k=function(t){var e=o(t.components);return a.createElement(d.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},s=a.forwardRef((function(t,e){var n=t.components,l=t.mdxType,i=t.originalType,d=t.parentName,k=p(t,["components","mdxType","originalType","parentName"]),s=o(n),c=l,u=s["".concat(d,".").concat(c)]||s[c]||m[c]||i;return n?a.createElement(u,r(r({ref:e},k),{},{components:n})):a.createElement(u,r({ref:e},k))}));function c(t,e){var n=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var i=n.length,r=new Array(i);r[0]=s;var p={};for(var d in e)hasOwnProperty.call(e,d)&&(p[d]=e[d]);p.originalType=t,p.mdxType="string"==typeof t?t:l,r[1]=p;for(var o=2;o<i;o++)r[o]=n[o];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},75177:(t,e,n)=>{n.r(e),n.d(e,{contentTitle:()=>r,default:()=>k,frontMatter:()=>i,metadata:()=>p,toc:()=>d});var a=n(87462),l=(n(67294),n(3905));const i={},r="\u8bbe\u5907\u6811 API",p={unversionedId:"chips/600X/build/dts/api/api",id:"chips/600X/build/dts/api/api",isDocsHomePage:!1,title:"\u8bbe\u5907\u6811 API",description:"\u8fd9\u662f `` API \u7684\u53c2\u8003\u9875\u9762\u3002\u6b64 API \u662f\u57fa\u4e8e\u5b8f\u7684\u3002\u4f7f\u7528\u8fd9\u4e9b\u5b8f\u5bf9\u8c03\u5ea6\u6ca1\u6709\u6027\u80fd\u5f71\u54cd\u3002\u5b83\u4eec\u53ef\u4ee5\u5728\u4efb\u4f55\u8c03\u7528\u4e0a\u4e0b\u6587\u6216\u6587\u4ef6\u8303\u56f4\u5185\u4f7f\u7528\u3002",source:"@site/docs/chips/600X/build/dts/api/api.md",sourceDirName:"chips/600X/build/dts/api",slug:"/chips/600X/build/dts/api/api",permalink:"/docs-csk6/chips/600X/build/dts/api/api",version:"current",frontMatter:{},sidebar:"docs/chips/600X",previous:{title:"\u6982\u8ff0",permalink:"/docs-csk6/chips/600X/build/dts/api/index"},next:{title:"\u7ed1\u5b9a\u7d22\u5f15",permalink:"/docs-csk6/chips/600X/build/dts/api/bindings"}},d=[{value:"\u901a\u7528 APIs",id:"devicetree-generic-apis",children:[{value:"\u8282\u70b9 id \u4e0e\u5e2e\u52a9\u7c7b",id:"\u8282\u70b9-id-\u4e0e\u5e2e\u52a9\u7c7b",children:[]},{value:"\u8bbf\u95ee\u5c5e\u6027",id:"devicetree-property-access",children:[]},{value:"<code>ranges</code> \u5c5e\u6027",id:"devicetree-ranges-property",children:[]},{value:"<code>reg</code> \u5c5e\u6027",id:"devicetree-reg-property",children:[]},{value:"<code>interrupts</code> \u5c5e\u6027",id:"devicetree-interrupts-property",children:[]},{value:"For-each \u5b8f",id:"for-each-\u5b8f",children:[]},{value:"\u68c0\u67e5\u662f\u5426\u5b58\u5728",id:"\u68c0\u67e5\u662f\u5426\u5b58\u5728",children:[]},{value:"\u8282\u70b9\u95f4\u4f9d\u8d56",id:"devicetree-dep-ord",children:[]},{value:"\u603b\u7ebf\u5e2e\u52a9\u7c7b",id:"\u603b\u7ebf\u5e2e\u52a9\u7c7b",children:[]}]},{value:"\u57fa\u4e8e\u5b9e\u4f8b\u7684 API",id:"devicetree-inst-apis",children:[]},{value:"\u7279\u5b9a\u4e8e\u786c\u4ef6\u7684 API",id:"devicetree-hw-api",children:[{value:"CAN",id:"devicetree-can-api",children:[]},{value:"Clocks",id:"clocks",children:[]},{value:"DMA",id:"dma",children:[]},{value:"\u56fa\u5b9a flash \u5206\u533a",id:"devicetree-flash-api",children:[]},{value:"GPIO",id:"devicetree-gpio-api",children:[]},{value:"IO \u901a\u9053",id:"io-\u901a\u9053",children:[]},{value:"MBOX",id:"devicetree-mbox-api",children:[]},{value:"Pinctrl (\u5f15\u811a\u63a7\u5236)",id:"devicetree-pinctrl-api",children:[]},{value:"PWM",id:"pwm",children:[]},{value:"\u590d\u4f4d\u63a7\u5236\u5668",id:"\u590d\u4f4d\u63a7\u5236\u5668",children:[]},{value:"SPI",id:"spi",children:[]}]},{value:"\u9009\u5b9a\u8282\u70b9",id:"devicetree-chosen-nodes",children:[]},{value:"Zephyr \u7279\u5b9a\u7684\u9009\u5b9a\u8282\u70b9",id:"zephyr-\u7279\u5b9a\u7684\u9009\u5b9a\u8282\u70b9",children:[]}],o={toc:d};function k(t){let{components:e,...n}=t;return(0,l.kt)("wrapper",(0,a.Z)({},o,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u8bbe\u5907\u6811-api"},"\u8bbe\u5907\u6811 API"),(0,l.kt)("p",null,"\u8fd9\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"<devicetree.h>")," API \u7684\u53c2\u8003\u9875\u9762\u3002\u6b64 API \u662f\u57fa\u4e8e\u5b8f\u7684\u3002\u4f7f\u7528\u8fd9\u4e9b\u5b8f\u5bf9\u8c03\u5ea6\u6ca1\u6709\u6027\u80fd\u5f71\u54cd\u3002\u5b83\u4eec\u53ef\u4ee5\u5728\u4efb\u4f55\u8c03\u7528\u4e0a\u4e0b\u6587\u6216\u6587\u4ef6\u8303\u56f4\u5185\u4f7f\u7528\u3002"),(0,l.kt)("p",null,"\u5176\u4e2d\u4e00\u4e9b API \u9700\u8981\u5728\u4f7f\u7528\u4e4b\u524d\u5b9a\u4e49\u4e00\u4e2a\u540d\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \u7684\u7279\u6b8a\u5b8f\uff1b\u4e0b\u6587\u5c06\u5355\u72ec\u8ba8\u8bba\u6b64\u60c5\u51b5\u3002\u8fd9\u4e9b\u5b8f\u901a\u5e38\u662f\u5728\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\uff0c\u5c3d\u7ba1\u5b83\u4eec\u53ef\u4ee5\u5728\u9a71\u52a8\u7a0b\u5e8f\u4e4b\u5916\u4f7f\u7528\uff0c\u4f46\u5f53\u4f60\u8fd9\u4e48\u505a\u65f6\u9700\u8981\u5c0f\u5fc3\u8c28\u614e\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_INST")," \u5b8f\u8981\u6c42\u4f60\u5148\u58f0\u660e ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \uff0c\u4f60\u53ef\u4ee5\u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u58f0\u660e\u4e00\u4e2a\u5e94\u7528\u7ea7\u522b\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \uff0c\u8fd9\u6837\u5b50 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_INST")," \u5c31\u53ef\u4ee5\u83b7\u53d6\u6307\u5b9a compatible \u7684\u8bbe\u5907\u5b9e\u4f8b\uff0c\u4f46\u8fd9\u6837\u7684\u884c\u4e3a\u901a\u5e38\u4f1a\u8ba9\u4f7f\u5f97\u4f60\u7684\u5e94\u7528\u4e0e\u67d0\u4e2a\u8bbe\u5907\u5f3a\u8026\u5408\uff0c\u6211\u4eec\u5e76\u4e0d\u63a8\u8350\u8fd9\u6837\u7684\u505a\u6cd5\uff09\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u6ce8\u610f ")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u672c\u6587\u6863\u65e8\u5728\u89e3\u91ca\u5404\u4e2a API \u5206\u7c7b\u7684\u6982\u5ff5\u6027\u4ecb\u7ecd\u4ee5\u53ca\u4e3b\u8981\u4f5c\u7528\uff0c\u5bf9\u4e8e\u5177\u4f53\u7684\u5355\u4e2a API \u7684\u5b9a\u4e49\u548c\u7528\u6cd5\uff0c\u5219\u5f15\u7528\u5230 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree.html"},"Zephyr \u5b98\u65b9\u6587\u6863")," \u3002"))),(0,l.kt)("h2",{id:"devicetree-generic-apis"},"\u901a\u7528 APIs"),(0,l.kt)("p",null,"\u672c\u8282\u4e2d\u7684 API \u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u4f7f\u7528\uff0c\u4e0d\u9700\u8981\u5b9a\u4e49 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \u3002"),(0,l.kt)("h3",{id:"\u8282\u70b9-id-\u4e0e\u5e2e\u52a9\u7c7b"},"\u8282\u70b9 id \u4e0e\u5e2e\u52a9\u7c7b"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/docs-csk6/chips/600X/build/dts/api_usage#%E8%8A%82%E7%82%B9-id"},(0,l.kt)("em",{parentName:"a"},"\u8282\u70b9 id\uff08 node id \uff09"))," \u662f\u5f15\u7528\u8bbe\u5907\u6811\u8282\u70b9\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u5b83\u5728 C \u9884\u5904\u7406\u5668\u9636\u6bb5\u751f\u6548\u3002\u867d\u7136\u8282\u70b9 id \u4e0d\u662f C \u503c\uff08\u53c2\u8003 ",(0,l.kt)("a",{parentName:"p",href:"/docs-csk6/chips/600X/build/dts/api_usage#%E8%8A%82%E7%82%B9-id-%E5%B9%B6%E4%B8%8D%E6%98%AF%E5%80%BC"},"\u8282\u70b9 id \u4e0d\u662f C \u503c")," \uff09\uff0c\u4f46\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u6765\u8bbf\u95ee C \u53f3\u503c\uff08 rvalue \uff09\u5f62\u5f0f\u7684\u8bbe\u5907\u6811\u6570\u636e\uff0c\u4f8b\u5982\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-property-access"},"\u8bbf\u95ee\u5c5e\u6027 API")," \u3002"),(0,l.kt)("p",null,"\u8282\u70b9 id ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_ROOT")," \u6307\u5411\u6839\u8282\u70b9 ",(0,l.kt)("inlineCode",{parentName:"p"},"/")," \u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_path"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PATH()"))," \u3001 ",(0,l.kt)("a",{parentName:"p",href:"#dt_nodelabellabel"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NODELABEL()"))," \u3001 ",(0,l.kt)("a",{parentName:"p",href:"#dt_aliasalias"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_ALIAS()"))," \u548c ",(0,l.kt)("a",{parentName:"p",href:"#dt_instinst-compat"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST()"))," \u4e3a\u5176\u4ed6\u8bbe\u5907\u6811\u8282\u70b9\u521b\u5efa\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u82e5\u8981\u4e3a\u7ed9\u5b9a\u8282\u70b9\u7684\u7236\u8282\u70b9\u6216\u7279\u5b9a\u5b50\u8282\u70b9\u521b\u5efa\u8282\u70b9 id \uff0c\u53ef\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_parentnode_id"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PARENT()"))," \u548c ",(0,l.kt)("a",{parentName:"p",href:"#dt_childnode_id-child"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_CHILD()"))," \u5b8f\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_invalid_node-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_INVALID_NODE ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u65e0\u6548\u8282\u70b9 id \u7684\u540d\u79f0\u3002"),(0,l.kt)("p",null,"\u8fd9\u652f\u6301\u53ef\u4ee5\u4ece\u8bbe\u5907\u6811\u6570\u636e\u53ef\u80fd\u6216\u53ef\u80fd\u4e0d\u53ef\u7528\u7684\u8def\u5f84\u8c03\u7528\u5206\u89e3\u5b8f\u7684\u60c5\u51b5\u3002\u5b83\u662f\u4e00\u4e2a\u4e0e\u4efb\u4f55\u6709\u6548\u7684\u8bbe\u5907\u6811\u8282\u70b9 id \u90fd\u4e0d\u5339\u914d\u7684\u9884\u5904\u7406\u5668\u6807\u8bc6\u7b26\u3002")),(0,l.kt)("h5",{id:"-dt_root-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_ROOT ")),(0,l.kt)("div",{style:{paddingLeft:16}},"\u8bbe\u5907\u6811\u4e2d\u6839\u8282\u70b9 id \u3002"),(0,l.kt)("h5",{id:"-dt_path-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PATH(...) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u6839\u636e\u8bbe\u5907\u6811\u8def\u5f84\u83b7\u53d6\u5bf9\u5e94\u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\uff08\u6b64\u5b8f\u7528\u4e8e\u4ece\u8def\u5f84\u7ec4\u4ef6\u8fd4\u56de\u8282\u70b9 id \u3002\u8981\u4ece\u8282\u70b9 id \u83b7\u53d6\u8def\u5f84\u5b57\u7b26\u4e32\uff0c\u8bf7\u6539\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_NODE_PATH"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NODE_PATH()"))," \u3002\uff09"),(0,l.kt)("p",null,"\u6b64\u5b8f\u7684\u53c2\u6570\u662f\u7531\u4e00\u7ec4\u540d\u79f0\u7ec4\u6210\u7684\u2014\u2014\u4ece\u6839\u8282\u70b9\uff08\u4e0d\u5305\u62ec\uff09\u5f00\u59cb\uff0c\u5230\u8fbe\u6240\u9700\u8282\u70b9\uff0c\u6240\u9700\u7684\u6240\u6709\u975e\u6839\u8282\u70b9\u7684\u540d\u79f0\u3002\u6bcf\u4e2a\u540d\u79f0\u4e2d\u7684\u975e\u5b57\u6bcd\u6570\u5b57\u5b57\u7b26\u5fc5\u987b\u8f6c\u6362\u4e3a\u4e0b\u5212\u7ebf\u4ee5\u5f62\u6210\u6709\u6548\u7684 C \u6807\u8bb0\uff0c\u5e76\u4e14\u5b57\u6bcd\u5fc5\u987b\u5c0f\u5199\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'/ {\n        soc {\n                serial1: serial@40001000 {\n                        status = "okay";\n                        current-speed = <115200>;\n                        ...\n                };\n        };\n};\n')),(0,l.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_PATH(soc, serial_40001000)"),' \u83b7\u53d6 serial@40001000 \u7684\u8282\u70b9 id \u3002\u8282\u70b9\u6807\u7b7e\uff08\u5982 "serial1" \uff09\u4e0d\u80fd\u7528\u4f5c ',(0,l.kt)("a",{parentName:"p",href:"#dt_path"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PATH()"))," \u53c2\u6570\uff1b\u4f5c\u4e3a\u4ee3\u66ff\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_nodelabel"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NODELABEL()"))," \u3002"),(0,l.kt)("p",null,"\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_prop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PROP()"))," \u83b7\u53d6 ",(0,l.kt)("inlineCode",{parentName:"p"},"current-speed")," \u5c5e\u6027\u7684\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_PROP(DT_PATH(soc, serial_40001000), current_speed) // 115200\n")),(0,l.kt)("p",null,"\uff08\u4f7f\u7528\u6b64 API \u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"current-speed")," \u5c5e\u6027\u4e5f\u5e94\u662f\u201c\u5c0f\u5199\u548c\u4e0b\u5212\u7ebf\u201d\u5f62\u5f0f\u3002\uff09"),(0,l.kt)("p",null,"\u5728\u786e\u5b9a ",(0,l.kt)("a",{parentName:"p",href:"#dt_path"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PATH()"))," \u7684\u53c2\u6570\u65f6\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},'\u7b2c\u4e00\u4e2a\u53c2\u6570\u5bf9\u5e94\u4e8e\u6839\u7684\u4e00\u4e2a\u5b50\u8282\u70b9\uff08\u5728\u4e0a\u4f8b\u4e2d\u5219\u662f "soc" \uff09'),(0,l.kt)("li",{parentName:"ul"},'\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5bf9\u5e94\u4e8e\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u5b50\u8282\u70b9\uff08\u5728\u4e0a\u4f8b\u4e2d\u5219\u662f "',(0,l.kt)("inlineCode",{parentName:"li"},"serial_40001000"),'" \uff0c\u5b83\u662f\u4ece\u8282\u70b9\u540d\u79f0 "',(0,l.kt)("inlineCode",{parentName:"li"},"serial@40001000"),'" \u8f6c\u6210\u5c0f\u5199\u5e76\u5c06\u7279\u6b8a\u5b57\u7b26 "',(0,l.kt)("inlineCode",{parentName:"li"},"@"),'" \u66f4\u6539\u4e3a "',(0,l.kt)("inlineCode",{parentName:"li"},"_"),'" \u5f97\u51fa\u7684\uff09'),(0,l.kt)("li",{parentName:"ul"},"\u4f9d\u6b64\u7c7b\u63a8\uff0c\u4ee5\u83b7\u53d6\u6240\u9700\u8282\u70b9\u8def\u5f84\u4e2d\u7684\u66f4\u6df1\u8282\u70b9")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"... - \u6cbf\u8282\u70b9\u8def\u5f84\u7684\u5c0f\u5199\u548c\u4e0b\u5212\u7ebf\u8282\u70b9\u540d\u79f0\uff0c\u6bcf\u4e2a\u540d\u79f0\u4f5c\u4e3a\u5355\u72ec\u7684\u53c2\u6570\u7ed9\u51fa")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5177\u6709\u8be5\u8def\u5f84\u7684\u7684\u8282\u70b9 id")))),(0,l.kt)("h5",{id:"-dt_nodelabellabel-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_NODELABEL(label) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u6839\u636e\u8282\u70b9\u6807\u7b7e\u83b7\u53d6\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u5c06\u8282\u70b9\u6807\u7b7e\u4e2d\u7684\u975e\u5b57\u6bcd\u6570\u5b57\u7684\u5b57\u7b26\u8f6c\u6362\u4e3a\u4e0b\u5212\u7ebf\uff0c\u5e76\u5c06\u6240\u6709\u5b57\u6bcd\u5c0f\u5199\uff0c\u4ee5\u5f62\u6210\u6709\u6548\u7684 C \u6807\u8bb0\u3002\u8bf7\u6ce8\u610f\uff0c\u8282\u70b9\u6807\u7b7e\u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"label")," \u5c5e\u6027\u5e76\u4e0d\u76f8\u5173\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'serial1: serial@40001000 {\n        label = "UART_0";\n        status = "okay";\n        current-speed = <115200>;\n        ...\n};\n')),(0,l.kt)("p",null,'\u6b64\u793a\u4f8b\u4e2d\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\u6807\u7b7e "serial1" \u3002'),(0,l.kt)("p",null,'\u5b57\u7b26\u4e32 "UART_0" ',(0,l.kt)("em",{parentName:"p"},"\u4e0d\u662f")," \u8282\u70b9\u6807\u7b7e\uff1b\u5b83\u662f\u4e00\u4e2a\u540d\u4e3a label \u7684\u5c5e\u6027\u503c\u3002"),(0,l.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_nodelabellabel"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NODELABEL(serial1)"))," \u83b7\u53d6 ",(0,l.kt)("inlineCode",{parentName:"p"},"serial@40001000")," \u7684\u8282\u70b9 id \u3002\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_propnode_id-prop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PROP()"))," \u83b7\u53d6 ",(0,l.kt)("inlineCode",{parentName:"p"},"current-speed")," \u5c5e\u6027\u7684\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_PROP(DT_NODELABEL(serial1), current_speed) // 115200\n")),(0,l.kt)("p",null,"\u53e6\u4e00\u4e2a\u8bbe\u5907\u6811\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"cpu@0 {\n       L2_0: l2-cache {\n               cache-level = <2>;\n               ...\n       };\n};\n")),(0,l.kt)("p",null,"\u83b7\u53d6 ",(0,l.kt)("inlineCode",{parentName:"p"},"cache-level")," \u5c5e\u6027\u7684\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_PROP(DT_NODELABEL(l2_0), cache_level) // 2\n")),(0,l.kt)("p",null,"\u8bf7\u6ce8\u610f ",(0,l.kt)("a",{parentName:"p",href:"#dt_nodelabellabel"},"DT_NODELABEL()"),' \u53c2\u6570\u4e2d\u7684 "l2_0" \uff0c\u662f\u4ece\u8bbe\u5907\u6811\u4e2d\u7684 "L2_0" \u8f6c\u4e3a\u5c0f\u5199\u5f97\u51fa\u7684\u3002'),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"label")," \u2013 \u8282\u70b9\u6807\u7b7e\u540d\u79f0\uff0c\u8868\u793a\u4e3a\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,(0,l.kt)("p",null,"\u5177\u6709\u8be5\u6807\u7b7e\u7684\u7684\u8282\u70b9 id  "))))),(0,l.kt)("h5",{id:"-dt_aliasalias-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_ALIAS(alias) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u4ece ",(0,l.kt)("inlineCode",{parentName:"p"},"/aliases")," \u7684\u522b\u540d\u83b7\u53d6\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u5b8f\u7684\u53c2\u6570\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"/aliases")," \u8282\u70b9\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u5b83\u8fd4\u56de\u522b\u540d\u7684\u8282\u70b9 id \u3002\u5c06 ",(0,l.kt)("inlineCode",{parentName:"p"},"alias")," \u5c5e\u6027\u4e2d\u7684\u975e\u5b57\u6bcd\u6570\u5b57\u5b57\u7b26\u8f6c\u6362\u4e3a\u4e0b\u5212\u7ebf\uff0c\u5e76\u5c06\u6240\u6709\u5b57\u6bcd\u5c0f\u5199\uff0c\u4ee5\u5f62\u6210\u6709\u6548\u7684 C \u6807\u8bb0\uff0c\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'/ {\n        aliases {\n                my-serial = &serial1;\n        };\n\n        soc {\n                serial1: serial@40001000 {\n                        status = "okay";\n                        current-speed = <115200>;\n                        ...\n                };\n        };\n};\n')),(0,l.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_aliasalias"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_ALIAS(my_serial)"))," \u83b7\u53d6 serial@40001000 \u7684\u8282\u70b9 id \u3002\u8bf7\u6ce8\u610f\u8bbe\u5907\u6811\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"my-serial")," \u5728 ",(0,l.kt)("a",{parentName:"p",href:"#dt_aliasalias"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_ALIAS()"))," \u53c2\u6570\u4e2d\u5982\u4f55\u8f6c\u6210 ",(0,l.kt)("inlineCode",{parentName:"p"},"my_serial")," \u3002\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_propnode_id-prop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PROP()"))," \u83b7\u53d6 ",(0,l.kt)("inlineCode",{parentName:"p"},"current-speed")," \u5c5e\u6027\u7684\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_PROP(DT_ALIAS(my_serial), current_speed) // 115200\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"alias")," - \u522b\u540d\uff0c\u8868\u793a\u4e3a\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5177\u6709\u8be5\u522b\u540d\u7684\u8282\u70b9 id")))),(0,l.kt)("h5",{id:"-dt_instinst-compat-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_INST(inst, compat) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6 compatible \u5bf9\u5e94\u5b9e\u4f8b\u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u5177\u6709\u7279\u5b9a compatible \u5c5e\u6027\u503c\u7684\u6240\u6709\u8282\u70b9\u90fd\u5206\u914d\u6709\u5b9e\u4f8b\u7f16\u53f7\uff0c\u8fd9\u4e9b\u5b9e\u4f8b\u7f16\u53f7\u662f\u7279\u5b9a\u4e8e\u8be5 compatible \u7684\u4ece\u96f6\u5f00\u59cb\u7684\u7d22\u5f15\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5411 ",(0,l.kt)("a",{parentName:"p",href:"#dt_instinst-compat"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST()")),' \u4f20\u9012\u5b9e\u4f8b\u7f16\u53f7 "inst" \u4ee5\u53ca compatible \u7684\u5c0f\u5199\u548c\u4e0b\u5212\u7ebf\u7248\u672c "compat" \u6765\u83b7\u53d6\u8fd9\u4e9b\u8282\u70b9\u7684 id \u3002'),(0,l.kt)("p",null,"\u5b9e\u4f8b\u7f16\u53f7\u5177\u6709\u4ee5\u4e0b\u5c5e\u6027\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u6bcf\u4e2a compatible \uff0c\u5b9e\u4f8b\u7f16\u53f7\u4ece 0 \u5f00\u59cb\u5e76\u4e14\u662f\u8fde\u7eed\u7684"),(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u5177\u6709 compatible \u7684\u8282\u70b9\u90fd\u4f1a\u88ab\u5206\u914d\u4e00\u4e2a\u5b9e\u4f8b\u7f16\u53f7\uff0c",(0,l.kt)("strong",{parentName:"li"},"\u5305\u62ec\u672a\u542f\u7528\uff08 disabled \uff09\u7684\u8282\u70b9")),(0,l.kt)("li",{parentName:"ul"},'\u542f\u7528\uff08 enabled \uff09\u7684\u8282\u70b9\uff08 status \u5c5e\u6027\u4e3a "okay" \u6216\u672a\u58f0\u660e status \uff09\u5206\u914d\u7684\u5b9e\u4f8b\u7f16\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u672a\u542f\u7528\u8282\u70b9\u7684\u5b9e\u4f8b\u7f16\u53f7\u5927\u4e8e\u4efb\u4f55\u542f\u7528\u8282\u70b9\u7684\u5b9e\u4f8b\u7f16\u53f7')),(0,l.kt)("p",null,"\u4e0d\u4f5c\u4efb\u4f55\u5176\u4ed6\u4fdd\u8bc1\u3002\u5c24\u5176\u662f\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u8282\u70b9\u4e2d\u5df2\u5b58\u5728\u7684\u6570\u5b57\u8868\u793a\uff0c\u4f8b\u5982\u5728 SoC \u6587\u6863\u4e2d\u63d0\u5230\u7684\u3001\u8282\u70b9\u6807\u7b7e\u3001\u5355\u5143\u5730\u5740\u6216 ",(0,l.kt)("inlineCode",{parentName:"li"},"/aliases")," \u8282\u70b9\u5c5e\u6027\u4e2d\u7684\u4efb\u4f55\u6570\u5b57\uff0c\u5b9e\u4f8b\u7f16\u53f7\u4e0e\u4ed6\u4eec ",(0,l.kt)("strong",{parentName:"li"},"\u6ca1\u6709\u5bf9\u5e94\u5173\u7cfb"),"\uff08\u8fd9\u4e9b\u573a\u666f\u4e2d\u5e94\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"#dt_nodelabellabel"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NODELABEL()"))," \u6216 ",(0,l.kt)("a",{parentName:"li",href:"#dt_aliasalias"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_ALIAS()"))," \uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u65e0\u6cd5\u4fdd\u8bc1")," \u540c\u4e00\u8282\u70b9\u5728\u6784\u5efa\u4e4b\u95f4\u5177\u6709\u76f8\u540c\u7684\u5b9e\u4f8b\u7f16\u53f7\uff0c\u5373\u4f7f\u4f60\u5728\u540c\u4e00 build \u76ee\u5f55\u4e2d\u518d\u6b21\u6784\u5efa\u76f8\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u4e5f\u4e00\u6837")),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'serial1: serial@40001000 {\n        compatible = "vnd,soc-serial";\n        status = "disabled";\n        current-speed = <9600>;\n        ...\n};\n\nserial2: serial@40002000 {\n        compatible = "vnd,soc-serial";\n        status = "okay";\n        current-speed = <57600>;\n        ...\n};\n\nserial3: serial@40003000 {\n        compatible = "vnd,soc-serial";\n        current-speed = <115200>;\n        ...\n};\n')),(0,l.kt)("p",null,'\u5047\u8bbe\u8bbe\u5907\u6811\u4e2d\u6ca1\u6709\u5176\u4ed6\u8282\u70b9\u7684 compatible \u4e3a "vnd,soc-serial" \uff0c\u5219\u8be5 compatible \u5177\u6709\u5b9e\u4f8b\u7f16\u53f7\u4e3a 0\u30011 \u548c 2 \u7684\u8282\u70b9\u3002'),(0,l.kt)("p",null,"\u8282\u70b9 ",(0,l.kt)("inlineCode",{parentName:"p"},"serial@40002000")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"serial@40003000")," \u90fd\u662f\u542f\u7528\u8282\u70b9\uff0c\u6240\u4ee5\u5148\u628a\u5b9e\u4f8b\u53f7 0 \u548c 1 \u5206\u914d\u7ed9\u5b83\u4eec\uff0c\u4f46\u662f\u4e0d\u4fdd\u8bc1\u54ea\u4e2a\u8282\u70b9\u6709\u54ea\u4e2a\u5b9e\u4f8b\u53f7\u3002"),(0,l.kt)("p",null,"\u7531\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"serial@40001000")," \u662f\u552f\u4e00\u672a\u542f\u7528\u7684\u8282\u70b9\uff0c\u5b83\u7684\u5b9e\u4f8b\u7f16\u53f7\u4e3a 2\uff0c\u56e0\u4e3a\u672a\u542f\u7528\u7684\u8282\u70b9\u88ab\u5c06\u4ece\u6700\u5927\u7684\u5b9e\u4f8b\u7f16\u53f7\u5f00\u59cb\u5206\u914d\u3002\u6240\u4ee5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"// \u53ef\u80fd\u662f 57600 \u6216 115200 \u3002\u5e76\u6ca1\u6709\u65b9\u6cd5\u786e\u8ba4\uff1a\n// \u4e0d\u8bba serial@40002000 \u6216 serial@40003000 \u90fd\u53ef\u80fd\u7f16\u53f7\u4e3a 0 \uff0c\n// \u6240\u4ee5\u8fd9\u91cc\u7684\u5c5e\u6027\u53ef\u80fd\u662f\u4ed6\u4eec\u4efb\u4e00\u4e2a\u7684 current-speed \u5c5e\u6027\u3002\nDT_PROP(DT_INST(0, vnd_soc_serial), current_speed)\n\n// \u4e0e\u4e0a\u8ff0\u539f\u56e0\u76f8\u540c\uff0c\u8fd9\u91cc\u4e5f\u53ef\u80fd\u662f 57600 \u6216 115200 \u3002\nDT_PROP(DT_INST(1, vnd_soc_serial), current_speed)\n\n// 9600 \uff0c\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a\u672a\u542f\u7528\u8282\u70b9\uff0c\n// \u672a\u542f\u7528\u8282\u70b9\u4f4d\u4e8e\u5b9e\u4f8b\u6570\u5b57\u5217\u8868\u7684\u672b\u5c3e\u3002\nDT_PROP(DT_INST(2, vnd_soc_serial), current_speed)\n")),(0,l.kt)("p",null,"\u8bf7\u6ce8\u610f\u8bbe\u5907\u6811\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"vnd,soc-serial")," \u5728 ",(0,l.kt)("a",{parentName:"p",href:"#dt_instinst-compat"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST()"))," \u53c2\u6570\u4e2d\u5982\u4f55\u8f6c\u6210 ",(0,l.kt)("inlineCode",{parentName:"p"},"vnd_soc_serial")," \uff08\u4e0d\u5e26\u5f15\u53f7\uff09\u3002 \uff08\u50cf\u5f80\u5e38\u4e00\u6837\uff0c\u8bbe\u5907\u6811\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"current-speed")," \u4e5f\u8f6c\u6210 ",(0,l.kt)("inlineCode",{parentName:"p"},"current_speed")," \u3002\uff09"),(0,l.kt)("p",null,'\u5982\u679c\u8282\u70b9 "compatible" \u5c5e\u6027\u5177\u6709\u591a\u4e2a\u503c\uff0c\u6bcf\u4e2a compatible \u503c\u90fd\u5c06\u5206\u914d\u5b9e\u4f8b\u7f16\u53f7\uff0c\u4e92\u4e0d\u5f71\u54cd\u3002'),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"inst"),' \u2013 \u5b9e\u4f8b\u7f16\u53f7\uff0c\u5176\u4e2d\u5b9e\u4f8b\u7684 compatible \u4e3a "compat" \u53c2\u6570'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"compat")," \u2013 compatible\uff0c\u8868\u793a\u4e3a\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\uff0c\u4e0d\u5e26\u5f15\u53f7")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"node identifier for the node with that instance number and compatible",(0,l.kt)("p",null,"\u5177\u6709\u8be5\u522b\u540d\u7684\u8282\u70b9 id  "))))),(0,l.kt)("h5",{id:"-dt_parentnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PARENT(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u7236\u8282\u70b9\u7684 id \u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"parent: parent-node {\n        child: child-node {\n                ...\n        };\n};\n")),(0,l.kt)("p",null,"\u4ee5\u4e0b\u662f\u83b7\u53d6\u76f8\u540c\u8282\u70b9 id \u7684\u7b49\u6548\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_NODELABEL(parent)\nDT_PARENT(DT_NODELABEL(child))\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u7236\u8282\u70b9\u7684\u8282\u70b9 id")))),(0,l.kt)("h5",{id:"-dt_childnode_id-child-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_CHILD(node_id, child) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u5b50\u8282\u70b9\u7684 id \u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'/ {\n        soc-label: soc {\n                serial1: serial@40001000 {\n                        status = "okay";\n                        current-speed = <115200>;\n                        ...\n                };\n        };\n};\n')),(0,l.kt)("p",null,"\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_propnode_id-prop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PROP()"))," \u83b7\u53d6 serial@40001000 \u8282\u70b9 ",(0,l.kt)("inlineCode",{parentName:"p"},"status")," \u5c5e\u6027\u7684\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'#define SOC_NODE DT_NODELABEL(soc_label)\nDT_PROP(DT_CHILD(SOC_NODE, serial_40001000), status) // "okay"\n')),(0,l.kt)("p",null,'\u8282\u70b9\u6807\u7b7e\uff08\u4f8b\u5982 "serial1" \uff09\u4e0d\u80fd\u7528\u4f5c\u8fd9\u4e2a\u5b8f\u7684 "child" \u53c2\u6570\u3002\u5e94\u4f7f\u7528 ',(0,l.kt)("a",{parentName:"p",href:"#dt_nodelabellabel"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NODELABEL()"))," \u5148\u83b7\u53d6\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_foreach_childnode_id-fn"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_FOREACH_CHILD()"))," \u6765\u904d\u5386\u8282\u70b9\u6240\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9 id \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"child")," \u2013 \u5b50\u8282\u70b9\u540d\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,'\u540d\u79f0\u7531 "child" \u53c2\u6570\u5f15\u7528\u7684\u8282\u70b9 id')))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u5f15\u7528")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-generic-id.html"},"Node identifiers and helpers")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-property-access"},"\u8bbf\u95ee\u5c5e\u6027"),(0,l.kt)("p",null,"\u4ee5\u4e0b\u901a\u7528\u5b8f\u53ef\u7528\u4e8e\u8bbf\u95ee\u8282\u70b9\u5c5e\u6027\u3002\u6709\u7528\u4e8e\u8bbf\u95ee ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-ranges-property"},"ranges \u5c5e\u6027"),"\u3001 ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-reg-property"},"reg \u5c5e\u6027")," \u548c ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-interrupts-property"},"interrupts \u5c5e\u6027")," \u7684\u4e13\u7528 API \u3002"),(0,l.kt)("p",null,"\u5373\u4f7f\u8282\u70b9\u88ab\u7981\u7528\uff0c\u53ea\u8981\u5b83\u5177\u6709\u5339\u914d\u7684\u7ed1\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u5b8f\u8bfb\u53d6\u5c5e\u6027\u503c\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_propnode_id-prop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PROP(node_id, prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u4e00\u4e2a\u8bbe\u5907\u6811\u5c5e\u6027\u503c\u3002"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u7ed1\u5b9a\u5177\u6709\u4ee5\u4e0b\u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u6b64\u5b8f\u5c55\u5f00\u4e3a\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"string: \u5b57\u7b26\u4e32\u6587\u5b57"),(0,l.kt)("li",{parentName:"ul"},"boolean: ",(0,l.kt)("inlineCode",{parentName:"li"},"false")," \u5bf9\u5e94 0\uff0c ",(0,l.kt)("inlineCode",{parentName:"li"},"true")," \u5bf9\u5e94 1"),(0,l.kt)("li",{parentName:"ul"},"int: \u5c5e\u6027\u503c\u4f5c\u4e3a\u6574\u578b\u6570\u503c"),(0,l.kt)("li",{parentName:"ul"},"array, uint8-array, string-array: \u5c55\u5f00\u4e3a\u4e00\u4e2a\u521d\u59cb\u6570\u7ec4\u8868\u793a\uff0c\u5176\u4e2d\u5143\u7d20\u4e3a\u6574\u578b\u6216\u5b57\u7b26\u4e32\uff08\u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"{0, 1, 2}")," \u3001 ",(0,l.kt)("inlineCode",{parentName:"li"},'{"hello", "world"}')," \u7b49\u7b49\uff09"),(0,l.kt)("li",{parentName:"ul"},"phandle: \u5177\u6709\u8be5 phandle \u7684\u8282\u70b9 id")),(0,l.kt)("p",null,'\u5c5e\u6027\u7684\u7c7b\u578b\u901a\u5e38\u7531\u5176\u7ed1\u5b9a\u5b9a\u4e49\u3002\u5728\u67d0\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u6ca1\u6709\u53ef\u7528\u7684\u7ed1\u5b9a\uff0c\u5b83\u4e5f\u5177\u6709\u7531\u8bbe\u5907\u6811\u89c4\u8303\u5b9a\u4e49\u7684\u5047\u5b9a\u7c7b\u578b\uff1a "compatible" \u4e3a\u5b57\u7b26\u4e32\u6570\u7ec4\u7c7b\u578b\uff0c "status" \u548c "label" \u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c "interrupt-controller" \u4e3a\u5e03\u5c14\u503c\u7c7b\u578b\u3002'),(0,l.kt)("p",null,"\u5bf9\u4e8e\u4e0d\u5728\u4e0a\u8ff0\u5c5e\u6027\u7684\u5176\u4ed6\u5c5e\u6027\u6216\u5177\u6709\u672a\u77e5\u7c7b\u578b\u7684\u5c5e\u6027\uff08\u7531\u4e8e\u627e\u4e0d\u5230\u7ed1\u5b9a\uff09\uff0c\u6b64\u5b8f\u7684\u8fd4\u56de\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002"),(0,l.kt)("p",null,"\u4f7f\u7528\u793a\u4f8b\u53ef\u53c2\u8003\u4e0a\u6587\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"#dt_path"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PATH()"))," \u3001 ",(0,l.kt)("a",{parentName:"p",href:"#dt_aliasalias"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_ALIAS"))," \u3001 ",(0,l.kt)("a",{parentName:"p",href:"#dt_nodelabellabel"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NODELABEL()"))," \u548c ",(0,l.kt)("a",{parentName:"p",href:"#dt_instinst-compat"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST()"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," - \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop")," - \u5c5e\u6027\u540d\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5c5e\u6027\u503c")))),(0,l.kt)("h5",{id:"-dt_prop_lennode_id-prop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PROP_LEN(node_id, prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u5c5e\u6027\u7684\u903b\u8f91\u957f\u5ea6\u3002"),(0,l.kt)("p",null,"\u8fd9\u91cc\u7684\u201c\u957f\u5ea6\u201d\u6307\u7684\u662f\u5143\u7d20\u7684\u6570\u91cf\uff0c\u53ef\u80fd\u4e0e\u5c5e\u6027\u7528\u5b57\u8282\u8868\u793a\u7684\u5927\u5c0f\u4e0d\u540c\u3002"),(0,l.kt)("p",null,"\u8fd4\u56de\u503c\u53d6\u51b3\u4e8e\u5c5e\u6027\u7684\u7c7b\u578b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e array \u3001 string-array \u548c uint8-array \u7c7b\u578b\uff0c\u5c06\u5c55\u5f00\u4e3a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u6570\u91cf"),(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e phandles \u7c7b\u578b\uff0c\u5c06\u5c55\u5f00\u4e3a phandles \u7684\u6570\u91cf"),(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e phandle-array \u7c7b\u578b\uff0c\u5c06\u5c55\u5f00\u4e3a\u5c5e\u6027\u4e2d\u5143\u7d20\uff08\u7531 phandle \u548c\u6807\u8bc6\u7b26\u5757\u7ec4\u6210\uff09\u7684\u6570\u91cf")),(0,l.kt)("p",null,"\u4f46\u8fd9\u4e9b\u5c5e\u6027\u4f5c\u4e3a\u7279\u6b8a\u60c5\u51b5\u5904\u7406\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"reg \u5c5e\u6027: \u5e94\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"#dt_num_regsnode_id"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NUM_REGS(node_id)"))),(0,l.kt)("li",{parentName:"ul"},"interrupts \u5c5e\u6027: \u5e94\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"#dt_num_irqsnode_id"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NUM_IRQS(node_id)")))),(0,l.kt)("p",null,"\u4e0d\u5e94\u8be5\u5c06\u6b64\u5b8f\u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"range")," \u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"dma-ranges")," \u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"reg")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"p"},"interrupts")," \u5c5e\u6027\u4e00\u8d77\u4f7f\u7528\u3002"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u4e0a\u8ff0\u672a\u63d0\u53ca\u7684\u5176\u4ed6\u5c5e\u6027\uff0c\u884c\u4e3a\u672a\u5b9a\u4e49\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," - \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop")," - \u5c5e\u6027\u540d\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5c5e\u6027\u7684\u957f\u5ea6")))),(0,l.kt)("h5",{id:"-dt_labelnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_LABEL(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u7b49\u4ef7\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_propnode_id-prop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PROP(node_id, label)"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," - \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5c5e\u6027\u503c")))),(0,l.kt)("h5",{id:"-dt_enum_idxnode_id-prop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_ENUM_IDX(node_id, prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u5728\u5c5e\u6027\u503c\u4e2d\uff0c\u83b7\u53d6\u679a\u4e3e\u503c\u4e2d\u7684\u7d22\u5f15\u3002"),(0,l.kt)("p",null,"\u8fd4\u56de\u503c\u4ece\u96f6\u5f00\u59cb\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'usb1: usb@12340000 {\n        maximum-speed = "full-speed";\n};\nusb2: usb@12341000 {\n        maximum-speed = "super-speed";\n};\n')),(0,l.kt)("p",null,"\u793a\u4f8b\u7ed1\u5b9a\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'properties:\n  maximum-speed:\n    type: string\n    enum:\n       - "low-speed"\n       - "full-speed"\n       - "high-speed"\n       - "super-speed"\n')),(0,l.kt)("p",null,"\u7528\u6cd5\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_ENUM_IDX(DT_NODELABEL(usb1), maximum_speed) // 1\nDT_ENUM_IDX(DT_NODELABEL(usb2), maximum_speed) // 3\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"node_id")," - \u8282\u70b9 id")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"prop")," - \u5c5e\u6027\u540d\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a"))))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5728\u5c5e\u6027\u503c enum: list \u4e2d\u7684\u7d22\u5f15\uff0c\u4ece\u96f6\u5f00\u59cb")))),(0,l.kt)("h5",{id:"-dt_pha_by_idxnode_id-pha-idx-cell-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PHA_BY_IDX(node_id, pha, idx, cell) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6 phandle-array \u4e2d\uff0c\u5bf9\u5e94\u7d22\u5f15\u7684\u8bf4\u660e\u7b26\u5355\u5143\u683c\u503c\u3002"),(0,l.kt)("p",null,"\u4f60\u53ef\u4ee5\u5c06\u53c2\u6570\u987a\u5e8f\u7406\u89e3\u4e3a\u201cnode->phandle_array","[index]",".cell\u201d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6b64\u5b8f\u8fd4\u56de\u7684\u5355\u5143\u683c\u503c\uff0c\u6307\u7684\u662f\u5728\u201cnode_id\u201d\u7684\u201cpha\u201d\u5c5e\u6027\u4e2d\uff0c\u7d22\u5f15\u4e3a\u201cidx\u201d\u5904\u7684\u8bf4\u660e\u7b26\u5185\u7684\u5355\u5143\u683c\u503c\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"gpio0: gpio@... {\n        #gpio-cells = <2>;\n};\n\ngpio1: gpio@... {\n        #gpio-cells = <2>;\n};\n\nled: led_0 {\n        gpios = <&gpio0 17 0x1>, <&gpio1 5 0x3>;\n};\n")),(0,l.kt)("p",null,"\u793a\u4f8b\u7ed1\u5b9a\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"gpio-cells:\n  - pin\n  - flags\n")),(0,l.kt)("p",null,"\u5728\u4e0a\u4f8b\u4e2d\uff0c\u201cgpios\u201d\u6709\u4e24\u4e2a\u5143\u7d20\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7d22\u5f15 0 \u6709\u8bf4\u660e\u7b26 <17 0x1>\uff0c\u6240\u4ee5\u5b83\u7684\u201cpin\u201d\u5355\u5143\u683c\u662f 17\uff0c\u5b83\u7684\u201cflags\u201d\u5355\u5143\u683c\u662f 0x1"),(0,l.kt)("li",{parentName:"ul"},"\u7d22\u5f15 1 \u5177\u6709\u8bf4\u660e\u7b26 <5 0x3>\uff0c\u56e0\u6b64\u201cpin\u201d\u4e3a 5\uff0c\u201cflags\u201d\u4e3a 0x3  ")),(0,l.kt)("p",null,"\u7528\u6cd5\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"#define LED DT_NODELABEL(led)\n\nDT_PHA_BY_IDX(LED, gpios, 0, pin)   // 17\nDT_PHA_BY_IDX(LED, gpios, 1, flags) // 0x3\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"pha"),' \u2013 "phandle-array" \u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx"),' \u2013 "pha" \u53c2\u6570\u4e2d\u7684\u903b\u8f91\u7d22\u5f15'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cell"),' \u2013 "pha" \u4e2d\u7d22\u5f15\u4e3a "idx" \u4e3a\u5355\u5143\u683c\u540d\u79f0\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5355\u5143\u683c\u7684\u503c")))),(0,l.kt)("h5",{id:"-dt_phanode_id-pha-cell-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PHA(node_id, pha, cell) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u7b49\u4ef7\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_pha_by_idxnode_id-pha-idx-cell"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PHA_BY_IDX(node_id, pha, 0, cell)"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"pha"),' \u2013 "phandle-array" \u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cell"),' \u2013 "pha" \u4e2d\u7d22\u5f15\u4e3a "idx" \u4e3a\u5355\u5143\u683c\u540d\u79f0\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5355\u5143\u683c\u7684\u503c")))),(0,l.kt)("h5",{id:"-dt_phandle_by_namenode_id-pha-name-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PHANDLE_BY_NAME(node_id, pha, name) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u4ece phandle \u6570\u7ec4\u4e2d\uff0c\u6839\u636e\u540d\u79f0\u83b7\u53d6 phandle \u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u4f60\u53ef\u4ee5\u5c06\u53c2\u6570\u987a\u5e8f\u7406\u89e3\u4e3a\u201cnode->phandle_struct.name.phandle\u201d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cphandle \u6570\u7ec4\u88ab\u89c6\u4e3a\u5177\u6709\u547d\u540d\u5143\u7d20\u7684\u7ed3\u6784\u3002\u8fd4\u56de\u503c\u662f\u6b64\u7ed3\u6784\u5185 phandle \u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'adc1: adc@... {\n        label = "ADC_1";\n};\n\nadc2: adc@... {\n        label = "ADC_2";\n};\n\nn: node {\n        io-channels = <&adc1 10>, <&adc2 20>;\n        io-channel-names = "SENSOR", "BANDGAP";\n};\n')),(0,l.kt)("p",null,"\u4e0a\u9762\uff0c\u201cio-channels\u201d\u6709\u4e24\u4e2a\u5143\u7d20\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u540d\u4e3a\u201cSENSOR\u201d\u7684\u5143\u7d20\u5bf9\u5e94 phandle ",(0,l.kt)("inlineCode",{parentName:"li"},"&adc1")),(0,l.kt)("li",{parentName:"ul"},"\u540d\u4e3a\u201cBANDGAP\u201d\u7684\u5143\u7d20\u5bf9\u5e94 phandle ",(0,l.kt)("inlineCode",{parentName:"li"},"&adc2"))),(0,l.kt)("p",null,"\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'#define NODE DT_NODELABEL(n)\n\nDT_LABEL(DT_PHANDLE_BY_NAME(NODE, io_channels, sensor))  // "ADC_1"\nDT_LABEL(DT_PHANDLE_BY_NAME(NODE, io_channels, bandgap)) // "ADC_2"\n')),(0,l.kt)("p",null,"\u8bf7\u6ce8\u610f\u5728\u4e0a\u4f8b\u4e2d\uff0c\u8bbe\u5907\u6811\u5c5e\u6027\u548c\u540d\u79f0\u662f\u5982\u4f55\u8f6c\u4e3a\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u8868\u793a\u7684\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"pha"),' \u2013 "phandle-array" \u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"name"),' \u2013 "pha" \u4e2d\u7684\u5143\u7d20\u540d\u79f0\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u7684 phandle \u4e2d\u5bf9\u5e94\u540d\u79f0\u7684\u8282\u70b9 id")))),(0,l.kt)("h5",{id:"-dt_phandle_by_idxnode_id-prop-idx-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PHANDLE_BY_IDX(node_id, prop, idx) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u4ece phandle \u6570\u7ec4\u4e2d\uff0c\u6839\u636e\u7d22\u5f15\u83b7\u53d6 phandle \u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u5f53\u5bf9\u5e94\u903b\u8f91\u7d22\u5f15\u7684\u8282\u70b9\u503c\u5305\u542b phandle \u65f6\uff0c\u6b64\u5b8f\u8fd4\u56de\u5177\u6709\u8be5 phandle \u7684\u8282\u70b9 id\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\uff0c\u5982\u679c\u201cprop\u201d\u7684\u7c7b\u578b\u4e3a\u201cphandle\u201d\uff0c\u5219\u201cidx\u201d\u5fc5\u987b\u4e3a\u96f6\u3002 \uff08\u201cphandle\u201d\u7c7b\u578b\u88ab\u89c6\u4e3a\u56fa\u5b9a\u957f\u5ea6\u4e3a 1 \u7684\u201cphandles\u201d\uff09\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"n1: node-1 {\n        foo = <&n2 &n3>;\n};\n\nn2: node-2 { ... };\nn3: node-3 { ... };\n")),(0,l.kt)("p",null,"\u4e0a\u9762\uff0c\u201cfoo\u201d\u6709 phandles \u7c7b\u578b\u5e76\u4e14\u6709\u4e24\u4e2a\u5143\u7d20\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7d22\u5f15 0 \u6709 phandle ",(0,l.kt)("inlineCode",{parentName:"li"},"&n2")," \uff0c\u8fd9\u662f node-2 \u7684 phandle"),(0,l.kt)("li",{parentName:"ul"},"\u7d22\u5f15 1 \u6709 phandle ",(0,l.kt)("inlineCode",{parentName:"li"},"&n3")," \uff0c\u8fd9\u662f node-3 \u7684 phandle")),(0,l.kt)("p",null,"\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"#define N1 DT_NODELABEL(n1)\n\nDT_PHANDLE_BY_IDX(N1, foo, 0) // node id for node-2\nDT_PHANDLE_BY_IDX(N1, foo, 1) // node id for node-3\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop"),' \u2013 \u5728 "node_id" \u4e2d\u7684 "phandle" \u3001 "phandles" \u3001 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\u540d\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx"),' \u2013  "prop" \u53c2\u6570\u4e2d\u7684\u7d22\u5f15')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u7684 phandle \u4e2d\u5bf9\u5e94\u7d22\u5f15\u7684\u8282\u70b9 id")))),(0,l.kt)("h5",{id:"-dt_phandlenode_id-prop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PHANDLE(node_id, prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6 phandle \u5c5e\u6027\u503c\u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u7b49\u4ef7\u4e8e\u8c03\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_phandle_by_idxnode_id-prop-idx"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PHANDLE_BY_IDX(node_id, prop, 0)"))," \u3002\u5b83\u7684\u4e3b\u8981\u597d\u5904\u662f\uff0c\u5f53\u201cprop\u201d\u5177\u6709\u201cphandle\u201d\u7c7b\u578b\u65f6\uff0c\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_PHANDLE")," \u53ef\u8bfb\u6027\u66f4\u4f73\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop"),' \u2013 \u5728 "node_id" \u4e2d\u7684 "phandle" \u7c7b\u578b\u7684\u5c5e\u6027\u540d')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9 phandle \u4e2d\u5bf9\u5e94\u7684\u8282\u70b9 id")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-generic-prop.html"},"Property access")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-ranges-property"},(0,l.kt)("inlineCode",{parentName:"h3"},"ranges")," \u5c5e\u6027"),(0,l.kt)("p",null,"\u8981\u8bbf\u95ee ",(0,l.kt)("inlineCode",{parentName:"p"},"ranges")," \u5c5e\u6027\uff0c\u8bf7\u4f7f\u7528\u6b64\u5904\u7684 API \uff0c\u800c\u4e0d\u662f\u4e0a\u6587\u7684 ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-property-access"},"\u8bbf\u95ee\u5c5e\u6027")," \u3002\u56e0\u4e3a\u8fd9\u4e2a\u5c5e\u6027\u7684\u8bed\u4e49\u662f\u7531\u8bbe\u5907\u6811\u89c4\u8303\u5b9a\u4e49\u7684\uff0c\u6240\u4ee5\u8fd9\u4e9b\u5b8f\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6ca1\u6709\u5339\u914d\u7ed1\u5b9a\u7684\u8282\u70b9\u3002\u4f46\u662f\uff0c\u5f53\u8282\u70b9\u7684\u7ed1\u5b9a\u8868\u660e\u5b83\u662f PCIe \u603b\u7ebf\u8282\u70b9\u65f6\uff0c\u5b83\u4eec\u5c06\u91c7\u7528\u7279\u6b8a\u8bed\u4e49\u6765\u8bbf\u95ee\uff0c\u8fd9\u4e9b\u7279\u6b8a\u8bed\u4e49\u5728 ",(0,l.kt)("a",{parentName:"p",href:"https://www.openfirmware.info/data/docs/bus.pci.pdf"},"PCI Bus Binding to: IEEE Std 1275-1994 Standard for Boot (Initialization Configuration) Firmware")," \u4e2d\u5b9a\u4e49\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#ranges-property"},(0,l.kt)("inlineCode",{parentName:"a"},"ranges")," property")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-reg-property"},(0,l.kt)("inlineCode",{parentName:"h3"},"reg")," \u5c5e\u6027"),(0,l.kt)("p",null,"\u8981\u8bbf\u95ee ",(0,l.kt)("inlineCode",{parentName:"p"},"reg")," \u5c5e\u6027\uff0c\u8bf7\u4f7f\u7528\u6b64\u5904\u7684 API \uff0c\u800c\u4e0d\u662f\u4e0a\u6587\u7684 ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-property-access"},"\u8bbf\u95ee\u5c5e\u6027")," \u3002\u56e0\u4e3a\u8fd9\u4e2a\u5c5e\u6027\u7684\u8bed\u4e49\u662f\u7531\u8bbe\u5907\u6811\u89c4\u8303\u5b9a\u4e49\u7684\uff0c\u6240\u4ee5\u8fd9\u4e9b\u5b8f\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6ca1\u6709\u5339\u914d\u7ed1\u5b9a\u7684\u8282\u70b9\u3002\u4f46\u662f\uff0c\u5f53\u8282\u70b9\u7684\u7ed1\u5b9a\u8868\u660e\u5b83\u662f PCIe \u603b\u7ebf\u8282\u70b9\u65f6\uff0c\u5b83\u4eec\u5c06\u91c7\u7528\u7279\u6b8a\u8bed\u4e49\u6765\u8bbf\u95ee\uff0c\u8fd9\u4e9b\u7279\u6b8a\u8bed\u4e49\u5728 ",(0,l.kt)("a",{parentName:"p",href:"https://www.openfirmware.info/data/docs/bus.pci.pdf"},"PCI Bus Binding to: IEEE Std 1275-1994 Standard for Boot (Initialization Configuration) Firmware")," \u4e2d\u5b9a\u4e49\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_num_regsnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_NUM_REGS(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u5728 reg \u5c5e\u6027\u4e2d\u83b7\u53d6\u5bc4\u5b58\u5668\u5757\u7684\u6570\u91cf\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u7684\u201creg\u201d\u5c5e\u6027\u4e2d\u7684\u5bc4\u5b58\u5668\u5757\u6570\u3002")))),(0,l.kt)("h5",{id:"-dt_reg_addr_by_idxnode_id-idx-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_REG_ADDR_BY_IDX(node_id, idx) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u7d22\u5f15\u201cidx\u201d\u5904\u7684\u5bc4\u5b58\u5668\u5757\u7684\u8d77\u59cb\u5730\u5740\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx")," - \u8981\u8fd4\u56de\u5176\u5730\u5740\u7684\u5bc4\u5b58\u5668\u7684\u7d22\u5f15")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u7b2c idx \u4e2a\u5bc4\u5b58\u5668\u5757\u7684\u5730\u5740")))),(0,l.kt)("h5",{id:"-dt_reg_size_by_idxnode_id-idx-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_REG_SIZE_BY_IDX(node_id, idx) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u7d22\u5f15\u201cidx\u201d\u5904\u7684\u5bc4\u5b58\u5668\u5757\u7684\u5927\u5c0f\u3002"),(0,l.kt)("p",null,"\u6b64\u5b8f\u7528\u4e8e\u83b7\u53d6\u5355\u4e2a\u5bc4\u5b58\u5668\u5757\u7684\u5927\u5c0f\uff0c\u800c\u4e0d\u662f\u5c5e\u6027\u4e2d\u5bc4\u5b58\u5668\u5757\u7684\u603b\u6570\uff1b\u8981\u83b7\u53d6\u603b\u6570\u7684\u8bdd\u5e94\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_num_regsnode_id"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_NUM_REGS()"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx")," - \u8981\u8fd4\u56de\u5176\u5927\u5c0f\u7684\u5bc4\u5b58\u5668\u7684\u7d22\u5f15")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u7b2c idx \u4e2a\u5bc4\u5b58\u5668\u5757\u7684\u5927\u5c0f")))),(0,l.kt)("h5",{id:"-dt_reg_addrnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_REG_ADDR(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u8282\u70b9\u7684\uff08\u552f\u4e00\u7684\uff09\u5bc4\u5b58\u5668\u5757\u5730\u5740\u3002"),(0,l.kt)("p",null,"\u7b49\u6548\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_reg_size_by_idxnode_id-idx"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_REG_ADDR_BY_IDX(node_id, 0)"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u7684\u5bc4\u5b58\u5668\u5757\u5730\u5740")))),(0,l.kt)("h5",{id:"-dt_reg_sizenode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_REG_SIZE(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u8282\u70b9\u7684\uff08\u552f\u4e00\u7684\uff09\u5bc4\u5b58\u5668\u5757\u5927\u5c0f\u3002"),(0,l.kt)("p",null,"\u7b49\u6548\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_reg_size_by_idxnode_id-idx"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_REG_SIZE_BY_IDX(node_id, 0)"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u552f\u4e00\u7684\u5bc4\u5b58\u5668\u5757\u5927\u5c0f")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-reg-prop.html"},(0,l.kt)("inlineCode",{parentName:"a"},"reg")," property")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-interrupts-property"},(0,l.kt)("inlineCode",{parentName:"h3"},"interrupts")," \u5c5e\u6027"),(0,l.kt)("p",null,"\u8981\u8bbf\u95ee ",(0,l.kt)("inlineCode",{parentName:"p"},"interrupts")," \u5c5e\u6027\uff0c\u8bf7\u4f7f\u7528\u6b64\u5904\u7684 API \uff0c\u800c\u4e0d\u662f\u4e0a\u6587\u7684 ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-property-access"},"\u8bbf\u95ee\u5c5e\u6027")," \u3002"),(0,l.kt)("p",null,"\u56e0\u4e3a\u8fd9\u4e2a\u5c5e\u6027\u7684\u8bed\u4e49\u662f\u7531\u8bbe\u5907\u6811\u89c4\u8303\u5b9a\u4e49\u7684\uff0c\u6240\u4ee5\u8fd9\u4e9b\u5b8f\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6ca1\u6709\u5339\u914d\u7ed1\u5b9a\u7684\u8282\u70b9\u3002\u4f46\u8fd9\u4e0d\u9002\u7528\u4e8e\u5c06\u5355\u5143\u540d\u79f0\u4f5c\u4e3a\u53c2\u6570\u7684\u5b8f\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_num_irqsnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_NUM_IRQS(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u8282\u70b9\u7684\u4e2d\u65ad\u6e90\u6570\u91cf\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u7684\u201cinterrupts\u201d\u5c5e\u6027\u4e2d\u7684\u4e2d\u65ad\u8bf4\u660e\u7b26\u7684\u6570\u91cf\u3002")))),(0,l.kt)("h5",{id:"-dt_irq_by_idxnode_id-idx-cell-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_IRQ_BY_IDX(node_id, idx, cell) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u5728\u7d22\u5f15\u5904\u83b7\u53d6\u4e2d\u65ad\u8bf4\u660e\u7b26\u5185\u7684\u503c\u3002"),(0,l.kt)("p",null,"\u4f60\u53ef\u4ee5\u5c06\u53c2\u6570\u987a\u5e8f\u7406\u89e3\u4e3a\u201cnode->interrupts","[index]",".cell\u201d\u3002"),(0,l.kt)("p",null,"\u5f53\u8bbe\u5907\u751f\u6210\u591a\u4e2a\u4e2d\u65ad\u65f6\uff0c\u8fd9\u53ef\u7528\u4e8e\u83b7\u53d6\u6709\u5173\u5176\u4e2d\u5355\u4e2a\u4e2d\u65ad\u7684\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"my-serial: serial@... {\n        interrupts = < 33 0 >, < 34 1 >;\n};\n")),(0,l.kt)("p",null,"\u5047\u8bbe\u8282\u70b9\u7684\u4e2d\u65ad\u57df\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"p"},"#interrupt-cells = <2>;")," \u58f0\u660e\u5355\u5143\u683c\u6570\u91cf\u4e3a 2\uff0c\u5e76\u4e14\u6bcf\u4e2a\u4e2d\u65ad\u8bf4\u660e\u7b26\u4e2d\u7684\u5404\u4e2a\u5355\u5143\u547d\u540d\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"irq")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"priority")," \uff0c\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"#define SERIAL DT_NODELABEL(my_serial)\n\nExample usage                       Value\n-------------                       -----\nDT_IRQ_BY_IDX(SERIAL, 0, irq)          33\nDT_IRQ_BY_IDX(SERIAL, 0, priority)      0\nDT_IRQ_BY_IDX(SERIAL, 1, irq,          34\nDT_IRQ_BY_IDX(SERIAL, 1, priority)      1\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx")," \u2013 \u4e2d\u65ad\u8bf4\u660e\u7b26\u6570\u7ec4\u7684\u903b\u8f91\u7d22\u5f15"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cell")," - \u5355\u5143\u683c\u540d\u79f0\u8bf4\u660e\u7b26")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u7ed9\u5b9a\u7d22\u5f15\u7684\u8bf4\u660e\u7b26\u7684\u547d\u540d\u503c")))),(0,l.kt)("h5",{id:"-dt_irqnode_id-cell-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_IRQ(node_id, cell) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u7b49\u4ef7\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_irq_by_idxnode_id-idx-cell"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_IRQ_BY_IDX(node_id, 0, cell)"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cell")," - \u5355\u5143\u683c\u540d\u79f0\u8bf4\u660e\u7b26")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u7ed9\u5b9a\u7d22\u5f15\u7684\u547d\u540d\u503c")))),(0,l.kt)("h5",{id:"-dt_irqnnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_IRQN(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u8282\u70b9\uff08\u552f\u4e00\uff09\u7684 irq \u7f16\u53f7\u3002"),(0,l.kt)("p",null,"\u7b49\u6548\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_irqnode_id-cell"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_IRQ(node_id, irq)"))," \u3002\u5e38\u89c1\u60c5\u51b5\u4e0b\uff0c\u8282\u70b9\u4ec5\u751f\u6210\u4e00\u4e2a\u4e2d\u65ad\uff0c\u5e76\u4e14 IRQ \u7f16\u53f7\u4f4d\u4e8e\u540d\u4e3a\u201cirq\u201d\u7684\u5355\u5143\u683c\u4e2d\uff0c\u6b64\u65f6\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_IRQN")," \u5c31\u5f88\u65b9\u4fbf\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u552f\u4e00\u4e2d\u65ad\u7684\u4e2d\u65ad\u53f7")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-interrupts-prop.html"},(0,l.kt)("inlineCode",{parentName:"a"},"interrupts")," property")," \u3002"))),(0,l.kt)("h3",{id:"for-each-\u5b8f"},"For-each \u5b8f"),(0,l.kt)("p",null,"\u5f53\u524d\u53ea\u6709\u4e00\u4e2a\u201c\u901a\u7528\u201d\u7684 for-each \u5b8f\uff0c\u5373 ","[",(0,l.kt)("inlineCode",{parentName:"p"},"DT_FOREACH_CHILD"),"]","#dt_foreach_childnode_id-fn) \u3002\u5b83\u7528\u4e8e\u904d\u5386\u4e00\u4e2a\u8bbe\u5907\u6811\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9\u3002"),(0,l.kt)("p",null,"for-each \u5b8f\u6709\u4e00\u4e9b\u4e13\u7528\u7684\u5b8f\uff0c\u4f8b\u5982 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_INST_FOREACH_STATUS_OKAY"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST_FOREACH_STATUS_OKAY()"))," \uff0c\u4f46\u4f7f\u7528\u8fd9\u4e9b\u5b8f\u4e4b\u524d\u8981\u6c42\u5148\u5b9a\u4e49 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_foreach_childnode_id-fn-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_FOREACH_CHILD(node_id, fn) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u4e3a\u201cnode_id\u201d\u7684\u6bcf\u4e2a\u5b50\u8282\u70b9\u8c03\u7528\u201cfn\u201d\u3002"),(0,l.kt)("p",null,"\u5b8f\u201cfn\u201d\u58f0\u660e\u5fc5\u987b\u5e26\u4e00\u4e2a\u53c2\u6570\uff0c\u5373\u201cnode_id\u201d\u5b50\u8282\u70b9\u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u5b50\u8282\u70b9\u5c06\u6309\u7167\u5b83\u4eec\u5728\u6700\u7ec8\u8bbe\u5907\u6811\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f\u8fdb\u884c\u904d\u5386\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'n: node {\n        child-1 {\n                label = "foo";\n        };\n        child-2 {\n                label = "bar";\n        };\n};\n')),(0,l.kt)("p",null,"\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"#define LABEL_AND_COMMA(node_id) DT_LABEL(node_id),\n\nconst char *child_labels[] = {\n    DT_FOREACH_CHILD(DT_NODELABEL(n), LABEL_AND_COMMA)\n};\n")),(0,l.kt)("p",null,"\u8fd9\u5c06\u5c55\u5f00\u4e3a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'const char *child_labels[] = {\n    "foo", "bar",\n};\n')),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"fn")," - \u5c06\u904d\u5386\u8c03\u7528\u7684\u51fd\u6570\u5b8f")))))),(0,l.kt)("h5",{id:"-dt_foreach_child_vargsnode_id-fn--"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_FOREACH_CHILD_VARGS(node_id, fn, ...) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u4e3a\u201cnode_id\u201d\u7684\u6bcf\u4e2a\u5b69\u5b50\u8c03\u7528\u201cfn\u201d\uff0c\u5e76\u4f7f\u7528\u591a\u4e2a\u53c2\u6570\u3002"),(0,l.kt)("p",null,"\u5b8f\u201cfn\u201d\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\u3002\u4f46\u7b2c\u4e00\u4e2a\u5e94\u8be5\u662f\u5b50\u8282\u70b9\u7684 id \u3002\u5176\u4f59\u7684\u7531\u8c03\u7528\u8005\u4f20\u5165\u3002"),(0,l.kt)("p",null,"\u5b50\u8282\u70b9\u5c06\u6309\u7167\u5b83\u4eec\u5728\u6700\u7ec8\u8bbe\u5907\u6811\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f\u8fdb\u884c\u904d\u5386\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u53c2\u89c1")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("a",{parentName:"p",href:"#dt_foreach_childnode_id-fn"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_FOREACH_CHILD"))))),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"fn")," - \u5c06\u904d\u5386\u8c03\u7528\u7684\u51fd\u6570\u5b8f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"...")," - \u4f20\u9012\u7ed9 fn \u7684\u53ef\u53d8\u6570\u91cf\u7684\u53c2\u6570")))))),(0,l.kt)("h5",{id:"-dt_foreach_child_status_okaynode_id-fn-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_FOREACH_CHILD_STATUS_OKAY(node_id, fn) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,'\u5bf9 status \u4e3a "okay" \u7684\u6bcf\u4e2a\u5b50\u8282\u70b9\u4e0a\u8c03\u7528 "fn" \u3002'),(0,l.kt)("p",null,'\u5b8f "fn" \u5e94\u8be5\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u5373\u5b50\u8282\u70b9\u7684\u8282\u70b9 id \u3002'),(0,l.kt)("p",null,'\u50cf\u5f80\u5e38\u4e00\u6837\uff0c\u672a\u58f0\u660e status \u548c status \u4e3a "ok" \u72b6\u6001\u90fd\u88ab\u89c6\u4e3a "okay"\u3002'),(0,l.kt)("p",null,"\u5b50\u8282\u70b9\u5c06\u6309\u7167\u5b83\u4eec\u5728\u6700\u7ec8\u8bbe\u5907\u6811\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f\u8fdb\u884c\u904d\u5386\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"fn")," - \u5c06\u904d\u5386\u8c03\u7528\u7684\u51fd\u6570\u5b8f")))))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-generic-foreach.html"},"for-each macros")," \u3002"))),(0,l.kt)("h3",{id:"\u68c0\u67e5\u662f\u5426\u5b58\u5728"},"\u68c0\u67e5\u662f\u5426\u5b58\u5728"),(0,l.kt)("p",null,"\u672c\u8282\u6240\u8bb0\u5f55\u7684\u5b8f\uff0c\u4e3b\u8981\u7528\u4e8e\u68c0\u6d4b\u8282\u70b9\u662f\u5426\u5b58\u5728\u3001\u67d0\u79cd\u7c7b\u578b\u7684\u8282\u70b9\u5b58\u5728\u591a\u5c11\u3001\u8282\u70b9\u662f\u5426\u5177\u6709\u67d0\u4e9b\u5c5e\u6027\u7b49\u7b49\u3002\u4e00\u4e9b\u7528\u4e8e\u7279\u6b8a\u76ee\u7684\u7684\u5b8f\uff08\u4f8b\u5982 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_IRQ_HAS_IDX"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_IRQ_HAS_IDX()"))," \u548c\u6240\u6709\u9700\u8981 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \u7684\u5b8f\uff09\u5728\u6b64\u6587\u6863\u7684\u5176\u4ed6\u5730\u65b9\u8bb0\u5f55\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_node_existsnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_NODE_EXISTS(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u6d4b\u8bd5\u8282\u70b9 id \u662f\u5426\u5f15\u7528\u5b58\u5728\u7684\u8282\u70b9\uff0c\u5373\u5728\u8bbe\u5907\u6811\u4e2d\u5b9a\u4e49\u7684\u8282\u70b9\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e00\u5b8f\u5e76\u4e0d\u5173\u5fc3\uff0c\u8282\u70b9\u662f\u5426\u5177\u6709\u5339\u914d\u7684\u7ed1\u5b9a\uff0c\u6216\u8005\u8282\u70b9\u7684 status \u503c\u662f\u4ec0\u4e48\u3002\u5b83\u7eaf\u7cb9\u68c0\u67e5\u8282\u70b9\u662f\u5426\u5b58\u5728\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5982\u679c\u8282\u70b9 id \u7684\u786e\u5f15\u7528\u8282\u70b9\uff0c\u5219\u4e3a 1\uff0c\u5426\u5219\u4e3a 0\u3002")))),(0,l.kt)("h5",{id:"-dt_has_compat_status_okaycompat-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_HAS_COMPAT_STATUS_OKAY(compat) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,'\u6d4b\u8bd5\u8bbe\u5907\u6811\u662f\u5426\u6709\u4efb\u4f55\u72b6\u6001\u4e3a "okay" \u5e76\u4e14\u6ee1\u8db3\u7ed9\u5b9a compatible \u7684\u8282\u70b9\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u4e14\u4ec5\u5f53\u81f3\u5c11\u6709\u4e00\u4e2a "node_id" \u5bf9\u4e8e\u8fd9\u4e24\u4e2a\u5224\u65ad\u90fd\u8fd4\u56de 1 \u65f6\uff0c\u624d\u4f1a\u8fd4\u56de 1\uff1a'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_NODE_HAS_STATUS(node_id, okay)\nDT_NODE_HAS_COMPAT(node_id, compat)\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"compat")," \u2013 compatible \u503c\uff0c\u4ee5\u5c0f\u5199\u548c\u4e0b\u5212\u7ebf\u8868\u793a\uff0c\u4e0d\u5e26\u5f15\u53f7")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u6ee1\u8db3\u4ee5\u4e0a\u4e24\u4e2a\u6761\u4ef6\u4e3a1\uff0c\u5426\u5219\u4e3a0")))),(0,l.kt)("h5",{id:"-dt_node_has_compatnode_id-compat-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_NODE_HAS_COMPAT(node_id, compat) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u8bbe\u5907\u6811\u8282\u70b9\u662f\u5426\u5339\u914d compatible \uff1f"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'n: node {\n        compatible = "vnd,specific-device", "generic-device";\n}\n')),(0,l.kt)("p",null,"\u7ed3\u679c\u4e3a 1 \u7684\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_NODE_HAS_COMPAT(DT_NODELABEL(n), vnd_specific_device)\nDT_NODE_HAS_COMPAT(DT_NODELABEL(n), generic_device)\n")),(0,l.kt)("p",null,"\u6b64\u5b8f\u4ec5\u4f7f\u7528 compatible \u5c5e\u6027\u7684\u503c\u3002\u5b8f\u4e0d\u5173\u5fc3\u8fd9\u4e2a compatible \u662f\u5426\u5177\u6709\u5339\u914d\u7ed1\u5b9a\uff0c\u4e5f\u4e0d\u5173\u5fc3\u8282\u70b9\u7684 status \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"compat")," \u2013 compatible \u503c\uff0c\u4ee5\u5c0f\u5199\u548c\u4e0b\u5212\u7ebf\u8868\u793a\uff0c\u4e0d\u5e26\u5f15\u53f7")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5982\u679c\u8282\u70b9\u7684 compatible \u5c5e\u6027\u5305\u542b compat\uff0c\u5219\u4e3a 1\uff0c\u5426\u5219\u4e3a 0\u3002")))),(0,l.kt)("h5",{id:"-dt_node_has_propnode_id-prop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_NODE_HAS_PROP(node_id, prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u6d4b\u8bd5 node_id \u5bf9\u5e94\u7684\u8bbe\u5907\u6811\u8282\u70b9\u662f\u5426\u5b9a\u4e49\u4e86 prop \u5c5e\u6027\u3002"),(0,l.kt)("p",null,"\u8fd9\u53ea\u7528\u4e8e\u6d4b\u8bd5\u5c5e\u6027\u662f\u5426\u5df2\u5b9a\u4e49\uff0c\u800c\u4e0d\u80fd\u7528\u4e8e\u9a8c\u8bc1 boolean \u5c5e\u6027\u662f true \u8fd8\u662f false \u3002\u8981\u83b7\u53d6 boolean \u5c5e\u6027\u7684\u503c\uff0c\u8bf7\u6539\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_propnode_id-prop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PROP(node_id, prop)"))," \u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop")," - \u5c5e\u6027\u540d\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5982\u679c\u8282\u70b9\u5177\u6709\u5c5e\u6027\uff0c\u5219\u4e3a 1\uff0c\u5426\u5219\u4e3a 0\u3002")))),(0,l.kt)("h5",{id:"-dt_pha_has_cell_at_idxnode_id-pha-idx-cell-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_PHA_HAS_CELL_AT_IDX(node_id, pha, idx, cell) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u662f\u5426 phandle \u6570\u7ec4\u5728\u7d22\u5f15\u5904\u6709\u4e00\u4e2a\u547d\u540d\u7684\u5355\u5143\u683c\u8bf4\u660e\u7b26\uff1f"),(0,l.kt)("p",null,'\u5982\u679c\u8fd4\u56de 1\uff0c\u5219\u4ee3\u8868 phandle-array \u5c5e\u6027 "pha" \u5728\u7d22\u5f15 "idx" \u5904\u6709\u4e00\u4e2a\u540d\u4e3a "cell" \u7684\u5355\u5143\u683c\uff0c\u56e0\u6b64\u4e8e ',(0,l.kt)("a",{parentName:"p",href:"#dt_pha_by_idxnode_id-pha-idx-cell"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PHA_BY_IDX(node_id, pha, idx, cell)"))," \u662f\u7b49\u6548\u7684\u3002\u5982\u679c\u5b83\u8fd4\u56de 0\uff0c\u5219\u4f7f\u7528\u76f8\u540c\u7684\u53c2\u6570\u8c03\u7528 ",(0,l.kt)("a",{parentName:"p",href:"#dt_pha_by_idxnode_id-pha-idx-cell"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PHA_BY_IDX()"))," \u4e5f\u4f1a\u62a5\u9519\u7684\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"pha"),' \u2013 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx"),' \u2013 "pha" \u4e2d\u8981\u68c0\u67e5\u7684\u7d22\u5f15\u503c'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cell"),' \u2013 \u8981\u5728\u7d22\u5f15 "idx" \u5904\u68c0\u67e5\u5176\u662f\u5426\u5b58\u5728\u7684\u5355\u5143\u540d\u79f0\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5982\u679c\u547d\u540d\u5355\u5143\u683c\u5b58\u5728\u4e8e\u7d22\u5f15 idx \u5904\u7684\u8bf4\u660e\u7b26\u4e2d\uff0c\u5219\u4e3a 1\uff0c\u5426\u5219\u4e3a 0\u3002")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-generic-exist.html"},"Existence checks")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-dep-ord"},"\u8282\u70b9\u95f4\u4f9d\u8d56"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"devicetree.h")," API \u652f\u6301\u8ddf\u8e2a\u8282\u70b9\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002\u8981\u5b8c\u6210\u8ddf\u8e2a\u4f9d\u8d56\uff0c\u9700\u8981\u57fa\u4e8e\u8bbe\u5907\u6811\u8282\u70b9\u4e4b\u95f4\u7684\u4e8c\u5143\u201c\u4f9d\u8d56\u201d\u5173\u7cfb\uff0c\u6211\u4eec\u5c06\u8fd9\u5c42\u4f9d\u8d56\u5173\u7cfb\u5b9a\u4e49\u4e3a ",(0,l.kt)("a",{parentName:"p",href:"https://baike.baidu.com/item/%E4%BC%A0%E9%80%92%E9%97%AD%E5%8C%85"},"\u4f20\u9012\u95ed\u5305")," \uff0c\u5b83\u57fa\u4e8e\u4ee5\u4e0b\u201c\u76f4\u63a5\u4f9d\u8d56\u201d\u5173\u7cfb\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u975e\u6839\u8282\u70b9\u90fd\u76f4\u63a5\u4f9d\u8d56\u4e8e\u5b83\u7684\u7236\u8282\u70b9"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u5b58\u5728 phandle \u5f15\u7528\u4efb\u4f55\u5176\u4ed6\u8282\u70b9\uff0c\u90a3\u4e48\u5b83\u5c06\u76f4\u63a5\u4f9d\u8d56\u4e8e\u8fd9\u4e9b\u5f15\u7528\u7684\u8282\u70b9"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u8282\u70b9\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"interrupts")," \u5c5e\u6027\uff0c\u90a3\u4e48\u5b83\u76f4\u63a5\u4f9d\u8d56\u4e8e\u5b83\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"interrupt-parent")," ")),(0,l.kt)("p",null,"\u8bbe\u5907\u6811\u7684 ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"\u4f9d\u8d56\u987a\u5e8f"))," \u662f\u4e00\u4e2a\u7531\u5176\u8282\u70b9\u7ec4\u6210\u7684\u5217\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a\u8282\u70b9 ",(0,l.kt)("inlineCode",{parentName:"p"},"n")," \u5728\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u65f6\u95f4\uff0c\u6bd4\u4efb\u4f55\u4f9d\u8d56 ",(0,l.kt)("inlineCode",{parentName:"p"},"n")," \u7684\u8282\u70b9\u90fd\u65e9\u3002\u4e00\u4e2a\u8282\u70b9\u7684 ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"\u4f9d\u8d56\u5e8f\u53f7"))," \u5c31\u662f\u5b83\u5728\u8be5\u5217\u8868\u4e2d\u7684\u7d22\u5f15\uff08\u4ece\u96f6\u5f00\u59cb\uff09\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684\u8bbe\u5907\u6811\u8282\u70b9 ",(0,l.kt)("inlineCode",{parentName:"p"},"n1")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"n2")," \uff0c\u5047\u8bbe\u4ed6\u4eec\u7684\u5e8f\u53f7\u5206\u522b\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"d1")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"d2")," \uff0c\u6211\u4eec\u6709\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"d1 != d2")),(0,l.kt)("li",{parentName:"ul"},"\u82e5 ",(0,l.kt)("inlineCode",{parentName:"li"},"n1")," \u4f9d\u8d56 ",(0,l.kt)("inlineCode",{parentName:"li"},"n2")," \uff0c\u90a3\u4e48 ",(0,l.kt)("inlineCode",{parentName:"li"},"d1 > d2")," "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"d1 > d2")," \u5e76 ",(0,l.kt)("strong",{parentName:"li"},"\u4e0d")," \u610f\u5473\u7740 ",(0,l.kt)("inlineCode",{parentName:"li"},"n1")," \u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"n2"))),(0,l.kt)("p",null,"Zephyr \u6784\u5efa\u7cfb\u7edf\u9009\u62e9\u6700\u7ec8\u8bbe\u5907\u6811\u7684\u4f9d\u8d56\u987a\u5e8f\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u8282\u70b9\u5206\u914d\u4f9d\u8d56\u5e8f\u53f7\u3002\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5b8f\u8bbf\u95ee\u4f9d\u8d56\u5173\u7cfb\u76f8\u5173\u4fe1\u606f\u3002\u4f9d\u8d56\u987a\u5e8f\u7684\u786e\u5207\u9009\u62e9\u8fc7\u7a0b\u5c5e\u4e8e\u5b9e\u73b0\u7ec6\u8282\uff0c\u6b64\u5904\u4e0d\u4f1a\u5c55\u5f00\u4ecb\u7ecd\uff1b\u4f46\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u5982\u679c\u68c0\u6d4b\u5230\u5faa\u73af\u4f9d\u8d56\uff08\u5373 ",(0,l.kt)("inlineCode",{parentName:"p"},"a")," \u4f9d\u8d56 ",(0,l.kt)("inlineCode",{parentName:"p"},"b")," \uff0c\u800c ",(0,l.kt)("inlineCode",{parentName:"p"},"b")," \u4e5f\u4f9d\u8d56 ",(0,l.kt)("inlineCode",{parentName:"p"},"a")," \uff09\uff0c\u4f1a\u5728\u6784\u5efa\u65f6\u62a5\u9519\uff0c\u56e0\u6b64\u53ef\u4ee5\u5b89\u5168\u5730\u5047\u8bbe\u5728\u4f7f\u7528\u8fd9\u4e9b\u5b8f\u65f6\u4e0d\u5b58\u5728\u5faa\u73af\u4f9d\u8d56\u3002"),(0,l.kt)("p",null,"\u8fd8\u6709\u57fa\u4e8e\u5b9e\u4f8b\u7f16\u53f7\u7684\u4fbf\u6377\u7528\u6cd5\uff1b\u8bf7\u53c2\u9605 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_INST_DEP_ORD"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST_DEP_ORD()"))," \u548c\u540e\u7eed\u6587\u6863\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-dep-ord.html"},"Inter-node dependencies")," \u3002"))),(0,l.kt)("h3",{id:"\u603b\u7ebf\u5e2e\u52a9\u7c7b"},"\u603b\u7ebf\u5e2e\u52a9\u7c7b"),(0,l.kt)("p",null,"Zephyr \u7684\u8bbe\u5907\u6811\u7ed1\u5b9a\u8bed\u6cd5\u652f\u6301\u914d\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"bus:")," \u5b57\u6bb5\uff0c\u7b26\u5408\u7ed9\u5b9a compatible \u7684\u8282\u70b9\u4f7f\u7528\u6b64\u5b57\u6bb5\u63cf\u8ff0\u7cfb\u7edf\u603b\u7ebf\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b50\u8282\u70b9\u88ab\u8ba4\u4e3a\u5728\u7ed9\u5b9a\u7c7b\u578b\u7684\u603b\u7ebf\u4e0a\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b API\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_busnode_id-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_BUS(node_id) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u8282\u70b9\u7684\u603b\u7ebf\u63a7\u5236\u5668\u3002"),(0,l.kt)("p",null,"\u83b7\u53d6\u8282\u70b9\u7684\u603b\u7ebf\u63a7\u5236\u5668\u7684\u8282\u70b9 id \u3002\u53ef\u7528\u4e8e\u4e0e ",(0,l.kt)("a",{parentName:"p",href:"#dt_propnode_id-prop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_PROP()"))," \u4e00\u8d77\u4f7f\u7528\u6765\u83b7\u53d6\u603b\u7ebf\u63a7\u5236\u5668\u7684\u5c5e\u6027\u3002"),(0,l.kt)("p",null,"\u5f53\u5b83\u7528\u4e8e\u6ca1\u6709\u603b\u7ebf\u63a7\u5236\u5668\u7684\u8282\u70b9\u65f6\uff0c\u4f1a\u5f15\u53d1\u62a5\u9519\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'i2c@deadbeef {\n        label = "I2C_CTLR";\n        status = "okay";\n        clock-frequency = < 100000 >;\n\n        i2c_device: accelerometer@12 {\n                ...\n        };\n};\n')),(0,l.kt)("p",null,"\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_PROP(DT_BUS(DT_NODELABEL(i2c_device)), clock_frequency) // 100000\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u8282\u70b9\u603b\u7ebf\u63a7\u5236\u5668\u7684\u8282\u70b9 id")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-generic-bus.html"},"Bus helpers")," \u3002"))),(0,l.kt)("h2",{id:"devicetree-inst-apis"},"\u57fa\u4e8e\u5b9e\u4f8b\u7684 API"),(0,l.kt)("p",null,"\u5efa\u8bae\u5728\u7f16\u5199\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u65f6\u4f7f\u7528\u8fd9\u4e9b API \u3002\u8981\u4f7f\u7528\u5b83\u4eec\uff0c\u9700\u8981\u5c06 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \u5b9a\u4e49\u4e3a\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u6240\u8981\u5b9e\u73b0\u652f\u6301\u7684 compatible\uff08\u6ce8\u610f\uff0c\u8981\u6c42\u662f\u5c0f\u5199\u548c\u4e0b\u5212\u7ebf\uff09\u3002\u5047\u8bbe\u8fd9\u6837\u4e00\u4e2a\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'serial@40001000 {\n        compatible = "vnd,serial";\n        status = "okay";\n        current-speed = <115200>;\n};\n')),(0,l.kt)("p",null,"\u5047\u8bbe ",(0,l.kt)("inlineCode",{parentName:"p"},"<serial@40001000>"),' \u662f\u552f\u4e00\u542f\u7528 compatible \u4e3a \\"vnd,serial\\" \u7684\u8282\u70b9\uff0c\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\uff1a'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"#define DT_DRV_COMPAT vnd_serial\nDT_DRV_INST(0)                  // node identifier for serial@40001000\nDT_INST_PROP(0, current_speed)  // 115200\n")),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"\u8b66\u544a")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5728\u5bf9\u5b9e\u4f8b\u7f16\u53f7\u505a\u51fa\u5047\u8bbe\u9700\u8981\u5c0f\u5fc3\u3002\u8bf7\u53c2\u9605 ",(0,l.kt)("a",{parentName:"p",href:"#dt_instinst-compat"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST()"))," \u4e86\u89e3 API \u53ea\u4fdd\u8bc1\u54ea\u4e9b\u5047\u8bbe\u662f\u53ef\u884c\u7684\u3002"))),(0,l.kt)("p",null,"\u5982\u4e0a\u6240\u793a\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"DT_INST_*")," API \u4fbf\u4e8e\u6309\u5b9e\u4f8b\u7f16\u53f7\u5bf9\u8282\u70b9\u5bfb\u5740\u3002\u5b83\u4eec\u51e0\u4e4e\u90fd\u662f\u57fa\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-generic-apis"},"\u901a\u7528 API")," \u5b9a\u4e49\u7684\u3002\u5982\u679c\u60f3\u627e\u5230\u7b49\u6548\u7684\u901a\u7528 API \uff0c\u53ef\u4ee5\u901a\u8fc7\u5bf9\u8fd9\u4e9b\u5b8f\u540d\u79f0\u5220\u9664 ",(0,l.kt)("inlineCode",{parentName:"p"},"INST_")," \u6765\u67e5\u627e\u3002\u4f8b\u5982\uff0c ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_INST_PROP(inst, prop)")," \u7b49\u4ef7\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_PROP(DT_DRV_INST(inst), prop)")," \u3002\u540c\u6837\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"DT_INST_REG_ADDR(inst)")," \u7b49\u4ef7\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_REG_ADDR(DT_DRV_INST(inst))")," \uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002\u6709\u4e00\u4e9b\u4f8b\u5916\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_ANY_INST_ON_BUS_STATUS_OKAY"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_ANY_INST_ON_BUS_STATUS_OKAY()"))," \u548c ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#c.DT_INST_FOREACH_STATUS_OKAY"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_INST_FOREACH_STATUS_OKAY()"))," \u662f\u7279\u6b8a\u7528\u9014\u7684\u5e2e\u52a9\u7c7b\u5b8f\uff0c\u4e0d\u5b58\u5728\u4e0e\u4ed6\u4eec\u76f4\u63a5\u7b49\u4ef7\u7684\u901a\u7528 API \u3002"),(0,l.kt)("p",null,"\u7531\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_INST()")," \u9700\u8981\u5b9a\u4e49 ",(0,l.kt)("inlineCode",{parentName:"p"},"DT_DRV_COMPAT")," \uff0c\u56e0\u6b64\u5728\u672a\u5b9a\u4e49\u5b8f\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a API \u90fd\u5c06\u5bfc\u81f4\u62a5\u9519\u3002"),(0,l.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u4e5f\u6709\u53ef\u7528\u4e8e\u7279\u5b9a\u786c\u4ef6\u7684\u5e2e\u52a9\u7c7b\uff1b\u8fd9\u4e9b\u90fd\u8bb0\u5f55\u5728 ",(0,l.kt)("a",{parentName:"p",href:"#devicetree-hw-api"},"\u7279\u5b9a\u4e8e\u786c\u4ef6\u7279\u5b9a\u7684 API")," \u4e2d\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_drv_instinst-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_DRV_INST(inst) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"compatible \u4e3a DT_DRV_COMPAT \u7684\u5b9e\u4f8b\u7684\u8282\u70b9 id\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"inst")," \u2013 \u5b9e\u4f8b\u7f16\u53f7")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,'compatible \u4e3a DT_DRV_COMPAT \u4e14\u5b9e\u4f8b\u7f16\u53f7\u4e3a "inst" \u7684\u8282\u70b9\u7684\u8282\u70b9 id')))),(0,l.kt)("h5",{id:"-dt_inst_propinst-prop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_INST_PROP(inst, prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6 DT_DRV_COMPAT \u5b9e\u4f8b\u7684\u5c5e\u6027\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"inst")," \u2013 \u5b9e\u4f8b\u7f16\u53f7"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop")," - \u5c5e\u6027\u540d\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5bf9\u5e94\u7684\u5c5e\u6027\u503c")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-inst.html"},"Instance-based APIs")," \u3002"))),(0,l.kt)("h2",{id:"devicetree-hw-api"},"\u7279\u5b9a\u4e8e\u786c\u4ef6\u7684 API"),(0,l.kt)("p",null,"\u53ea\u9700 include ",(0,l.kt)("inlineCode",{parentName:"p"},"<devicetree.h>")," \u5373\u53ef\u4f7f\u7528\u4ee5\u4e0b API \u3002"),(0,l.kt)("h3",{id:"devicetree-can-api"},"CAN"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u53ef\u7528\u4e8e\u63cf\u8ff0 CAN \u63a7\u5236\u5668/\u6536\u53d1\u5668\u4ee5\u53ca\u4e0e\u5b83\u4eec\u76f8\u5173\u7684\u5c5e\u6027\u7684\u8282\u70b9\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#can"},"CAN")," \u3002"))),(0,l.kt)("h3",{id:"clocks"},"Clocks"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u53ef\u7528\u4e8e\u63cf\u8ff0\u65f6\u949f\u6e90\u4ee5\u53ca\u4e0e\u5176\u76f8\u5173\u7684\u5c5e\u6027\u7684\u8282\u70b9\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-clocks.html"},"Clocks")," \u3002"))),(0,l.kt)("h3",{id:"dma"},"DMA"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u7528\u4e8e\u8fd9\u6837\u7684\u8282\u70b9 \u2014\u2014 \u63cf\u8ff0 ",(0,l.kt)("em",{parentName:"p"},"\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee (direct memory\naccess)")," \u63a7\u5236\u5668\u6216\u901a\u9053\uff0c\u4e0e\u5b83\u4eec\u7684\u76f8\u5173\u5c5e\u6027\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-dmas.html"},"DMA")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-flash-api"},"\u56fa\u5b9a flash \u5206\u533a"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u7528\u4e8e\u4e13\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"fixed-partitions")," \u517c\u5bb9\uff0c\u7528\u4e8e\u5bf9\u6709\u5173\u8bbe\u5907\u6811\u4e2d flash \u5206\u533a\u7684\u4fe1\u606f\u8fdb\u884c\u7f16\u7801\u3002\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u8bf7\u53c2\u9605 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/reference/devicetree/bindings/mtd/partition.html#fixed-partitions"},(0,l.kt)("inlineCode",{parentName:"a"},"fixed-partitions")),"\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-fixed-partition.html"},"Fixed flash partitions")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-gpio-api"},"GPIO"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u7528\u4e8e\u63cf\u8ff0 GPIO \u63a7\u5236\u5668/\u5f15\u811a\u4ee5\u53ca\u4e0e\u5b83\u4eec\u76f8\u5173\u7684\u5c5e\u6027\u7684\u8282\u70b9\u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_gpio_ctlr_by_idxnode_id-gpio_pha-idx-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_GPIO_CTLR_BY_IDX(node_id, gpio_pha, idx) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u4ece gpio \u7684 phandle-array \u5c5e\u6027\u7684\u7d22\u5f15\u5904\u83b7\u53d6\u63a7\u5236\u5668 phandle \u5bf9\u5e94\u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"gpio1: gpio@... { };\n\ngpio2: gpio@... { };\n\nn: node {\n        gpios = <&gpio1 10 GPIO_ACTIVE_LOW>,\n                <&gpio2 30 GPIO_ACTIVE_HIGH>;\n};\n")),(0,l.kt)("p",null,"\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_GPIO_CTLR_BY_IDX(DT_NODELABEL(n), gpios, 1) // DT_NODELABEL(gpio2)\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"gpio_pha"),' \u2013 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx"),' \u2013 "gpio_pha" \u4e2d\u7684\u903b\u8f91\u7d22\u5f15')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,'gpio \u63a7\u5236\u5668\u4e2d\uff0c\u7d22\u5f15\u4e3a "idx" \u7684\u8282\u70b9\u6807\u8bc6\u7b26')))),(0,l.kt)("h5",{id:"-dt_gpio_ctlrnode_id-gpio_pha-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_GPIO_CTLR(node_id, gpio_pha) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u7b49\u4ef7\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_gpio_ctlr_by_idxnode_id-gpio_pha-idx"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_GPIO_CTLR_BY_IDX(node_id, gpio_pha, 0)"))),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"gpio_pha"),' \u2013 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"gpio \u63a7\u5236\u5668\u4e2d\uff0c\u7d22\u5f15\u4e3a 0 \u7684\u8282\u70b9\u6807\u8bc6\u7b26")))),(0,l.kt)("h5",{id:"-dt_gpio_flags_by_idxnode_id-gpio_pha-idx-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_GPIO_FLAGS_BY_IDX(node_id, gpio_pha, idx) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u5728\u7d22\u5f15\u5904\u7684 GPIO \u8bf4\u660e\u7b26\u7684 flag \u5355\u5143\u3002"),(0,l.kt)("p",null,"\u8be5\u5b8f\u9700\u8981\u5e26\u6709\u540d\u4e3a\u201cflags\u201d\u7684\u5355\u5143\u683c\u7684 GPIO \u8bf4\u660e\u7b26\u3002\u5982\u679c GPIO \u8bf4\u660e\u7b26\u4e2d\u6ca1\u6709\u201cflags\u201d\u5355\u5143\uff0c\u5219\u8fd4\u56de\u96f6\u3002\u5982\u6709\u5fc5\u8981\uff0c\u8bf7\u53c2\u9605\u8282\u70b9\u7684\u7ed1\u5b9a\u4ee5\u68c0\u67e5\u8bf4\u660e\u7b26\u5355\u5143\u540d\u79f0\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'gpio1: gpio@... {\n        compatible = "vnd,gpio";\n        #gpio-cells = <2>;\n};\n\ngpio2: gpio@... {\n        compatible = "vnd,gpio";\n        #gpio-cells = <2>;\n};\n\nn: node {\n        gpios = <&gpio1 10 GPIO_ACTIVE_LOW>,\n                <&gpio2 30 GPIO_ACTIVE_HIGH>;\n};\n')),(0,l.kt)("p",null,"\u5728 compatible \u4e3a vnd,gpio \u7684\u7ed1\u5b9a\u4e2d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"gpio-cells:\n  - pin\n  - flags\n")),(0,l.kt)("p",null,"\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_GPIO_FLAGS_BY_IDX(DT_NODELABEL(n), gpios, 0) // GPIO_ACTIVE_LOW\nDT_GPIO_FLAGS_BY_IDX(DT_NODELABEL(n), gpios, 1) // GPIO_ACTIVE_HIGH\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"gpio_pha"),' \u2013 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx"),' \u2013 "gpio_pha" \u4e2d\u7684\u903b\u8f91\u7d22\u5f15')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,'\u7d22\u5f15 "idx" \u5904\u7684\u6807\u5fd7\u5355\u5143\u683c\u503c\uff0c\u5982\u679c\u6ca1\u6709\u5219\u4e3a 0')))),(0,l.kt)("h5",{id:"-dt_gpio_flagsnode_id-gpio_pha-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_GPIO_FLAGS(node_id, gpio_pha) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u7b49\u4ef7\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_gpio_flags_by_idxnode_id-gpio_pha-idx"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_GPIO_FLAGS_BY_IDX(node_id, gpio_pha, 0)"))),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"gpio_pha"),' \u2013 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u7d22\u5f15 0 \u5904\u7684\u6807\u5fd7\u5355\u5143\u683c\u503c\uff0c\u5982\u679c\u6ca1\u6709\u5219\u4e3a 0")))),(0,l.kt)("h5",{id:"-dt_gpio_pin_by_idxnode_id-gpio_pha-idx-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_GPIO_PIN_BY_IDX(node_id, gpio_pha, idx) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6\u5728\u7d22\u5f15\u5904 GPIO \u8bf4\u660e\u7b26\u7684 pin \u5355\u5143\u3002"),(0,l.kt)("p",null,'\u6b64\u5b8f\u4ec5\u9002\u7528\u4e8e GPIO \u8bf4\u660e\u7b26\u5177\u6709\u540d\u4e3a "pin" \u7684\u5355\u5143\u683c\u7684\u60c5\u51b5\u3002\u5982\u6709\u5fc5\u8981\uff0c\u8bf7\u53c2\u9605\u8282\u70b9\u7684\u7ed1\u5b9a\u68c0\u67e5\u547d\u540d\u662f\u5426\u6b63\u786e\u3002'),(0,l.kt)("p",null,"\u793a\u4f8b\u8bbe\u5907\u6811\u7247\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},'gpio1: gpio@... {\n        compatible = "vnd,gpio";\n        #gpio-cells = <2>;\n};\n\ngpio2: gpio@... {\n        compatible = "vnd,gpio";\n        #gpio-cells = <2>;\n};\n\nn: node {\n        gpios = <&gpio1 10 GPIO_ACTIVE_LOW>,\n                <&gpio2 30 GPIO_ACTIVE_HIGH>;\n};\n')),(0,l.kt)("p",null,"\u5728 compatible \u4e3a vnd,gpio \u7684\u7ed1\u5b9a\u4e2d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"gpio-cells:\n  - pin\n  - flags\n")),(0,l.kt)("p",null,"\u793a\u4f8b\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"DT_GPIO_PIN_BY_IDX(DT_NODELABEL(n), gpios, 0) // 10\nDT_GPIO_PIN_BY_IDX(DT_NODELABEL(n), gpios, 1) // 30\n")),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"gpio_pha"),' \u2013 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idx"),' \u2013 "gpio_pha" \u4e2d\u7684\u903b\u8f91\u7d22\u5f15')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,'\u7d22\u5f15 "idx" \u5904\u7684 pin \u5355\u5143\u683c\u503c')))),(0,l.kt)("h5",{id:"-dt_gpio_pinnode_id-gpio_pha-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_GPIO_PIN(node_id, gpio_pha) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u7b49\u4ef7\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"#dt_gpio_pin_by_idxnode_id-gpio_pha-idx"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_GPIO_PIN_BY_IDX(node_id, gpio_pha, 0)"))),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"node_id")," \u2013 \u8282\u70b9 id"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"gpio_pha"),' \u2013 "phandle-array" \u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a')))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u7d22\u5f15 0 \u5904\u7684 pin \u5355\u5143\u683c\u503c")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e86\u90e8\u5206\u5e38\u7528 API \uff0c\u5bf9\u4e8e\u5b8c\u6574 API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-gpio.html"},"GPIO")," \u3002"))),(0,l.kt)("h3",{id:"io-\u901a\u9053"},"IO \u901a\u9053"),(0,l.kt)("p",null,"\u8fd9\u4e9b API \u901a\u5e38\u7531\u9700\u8981\u4f7f\u7528 IO \u901a\u9053\uff08\u4f8b\u5982 ADC \u6216 DAC \u901a\u9053\uff09\u8fdb\u884c\u8f6c\u6362\u7684\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-io-channels.html"},"IO channels")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-mbox-api"},"MBOX"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u53ef\u7528\u4e8e\u63cf\u8ff0 MBOX \u63a7\u5236\u5668/\u7528\u6237\u7684\u8282\u70b9\uff0c\u4ee5\u53ca\u4e0e\u5b83\u4eec\u76f8\u5173\u7684\u5c5e\u6027\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#mbox"},"MBOX")," \u3002"))),(0,l.kt)("h3",{id:"devicetree-pinctrl-api"},"Pinctrl (\u5f15\u811a\u63a7\u5236)"),(0,l.kt)("p",null,"\u8fd9\u4e9b API \u7528\u4e8e\u6309\u540d\u79f0\u6216\u7d22\u5f15\u8bbf\u95ee\u5f15\u811a\u63a7\u5236\u5c5e\u6027\u3002"),(0,l.kt)("p",null,"\u8bbe\u5907\u6811\u8282\u70b9\u53ef\u80fd\u5177\u6709\u6307\u5b9a\u5f15\u811a\u63a7\u5236\uff08\u6709\u65f6\u79f0\u4e3a pin mux \u5f15\u811a\u590d\u7528\uff09\u8bbe\u7f6e\u7684\u5c5e\u6027\u3002\u8fd9\u4e9b\u4f7f\u7528\u8282\u70b9\u5185\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"pinctrl-<index>")," \u5c5e\u6027\u8868\u793a\uff0c\u5176\u4e2d ",(0,l.kt)("inlineCode",{parentName:"p"},"<index>")," \u503c\u662f\u4ece 0 \u5f00\u59cb\u7684\u8fde\u7eed\u6574\u6570\u3002\u8fd9\u4e9b\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"pinctrl-names")," \u5c5e\u6027\u547d\u540d\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-{.DTS}"},'node {\n    ...\n    pinctrl-0 = <&foo &bar ...>;\n    pinctrl-1 = <&baz ...>;\n    pinctrl-names = "default", "sleep";\n};\n')),(0,l.kt)("p",null,"\u4e0a\u9762\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"pinctrl-0")," \u7684\u540d\u79f0\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},'"default"')," \uff0c\u800c ",(0,l.kt)("inlineCode",{parentName:"p"},"pinctrl-1")," \u7684\u540d\u79f0\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},'"sleep"')," \u3002 ",(0,l.kt)("inlineCode",{parentName:"p"},"pinctrl-<index>")," \u5c5e\u6027\u503c\u5305\u542b phandles \u3002\u5176\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"&foo")," \u3001",(0,l.kt)("inlineCode",{parentName:"p"},"&bar")," \u7b49 phandles \u5c5e\u6027\u6307\u5411\u5185\u5bb9\u56e0\u5e73\u53f0\u800c\u5f02\u7684\u8282\u70b9\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"node")," \u8282\u70b9\u901a\u8fc7\u8fd9\u4e9b\u58f0\u660e\u63cf\u8ff0\u4e86\u5f15\u811a\u914d\u7f6e\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-pinctrl.html"},"Pinctrl (pin control)")," \u3002"))),(0,l.kt)("h3",{id:"pwm"},"PWM"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u53ef\u7528\u4e8e\u63cf\u8ff0 PWM \u63a7\u5236\u5668\u53ca\u5176\u76f8\u5173\u5c5e\u6027\u7684\u8282\u70b9\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-pwms.html"},"PWM")," \u3002"))),(0,l.kt)("h3",{id:"\u590d\u4f4d\u63a7\u5236\u5668"},"\u590d\u4f4d\u63a7\u5236\u5668"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u53ef\u7528\u4e8e\u63cf\u8ff0\u590d\u4f4d\u63a7\u5236\u5668\u548c\u4e0e\u5176\u76f8\u5173\u7684\u5c5e\u6027\u7684\u8282\u70b9\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.zephyrproject.org/latest/build/dts/api/api.html#reset-controller"},"Reset Controller")," \u3002"))),(0,l.kt)("h3",{id:"spi"},"SPI"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4fbf\u6377 API \u53ef\u7528\u4e8e\u63cf\u8ff0 SPI \u63a7\u5236\u5668\u6216\u8bbe\u5907\uff08\u6839\u636e\u5177\u4f53\u60c5\u51b5\uff09\u7684\u8282\u70b9\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u5177\u4f53\u5230\u6bcf\u4e2a API \u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-spi.html"},"SPI")," \u3002"))),(0,l.kt)("h2",{id:"devicetree-chosen-nodes"},"\u9009\u5b9a\u8282\u70b9"),(0,l.kt)("p",null,"\u9009\u5b9a\u8282\u70b9\uff0c\u5373 ",(0,l.kt)("inlineCode",{parentName:"p"},"/chosen")," \u8282\u70b9\uff0c\u5b83\u5305\u542b\u7684\u5c5e\u6027\u503c\u7528\u4e8e\u63cf\u8ff0\u7cfb\u7edf\u8303\u56f4\u7684\u8bbe\u7f6e\u3002 ",(0,l.kt)("a",{parentName:"p",href:"#dt_chosenprop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_CHOSEN()"))," \u5b8f\u53ef\u7528\u4e8e\u83b7\u53d6\u6240\u9009\u8282\u70b9 id \u3002"),(0,l.kt)("b",{style:{color:"var(--ifm-link-color)"}},"Defines"),(0,l.kt)("h5",{id:"-dt_chosenprop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_CHOSEN(prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u83b7\u53d6 /chosen \u8282\u70b9\u5c5e\u6027\u7684\u8282\u70b9 id \u3002"),(0,l.kt)("p",null,"\u8c03\u7528\u8fd9\u4e2a\u5b8f\u4ec5\u5728 ",(0,l.kt)("a",{parentName:"p",href:"#dt_has_chosenprop"},(0,l.kt)("inlineCode",{parentName:"a"},"DT_HAS_CHOSEN(prop)"))," \u4e3a 1 \u65f6\u6709\u6548\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop")," - /chosen \u8282\u70b9\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u6240\u9009\u8282\u70b9\u5c5e\u6027\u7684\u8282\u70b9 id")))),(0,l.kt)("h5",{id:"-dt_has_chosenprop-"},(0,l.kt)("code",{style:{background:"var(--ifm-color-info-lightest)",color:"var(--ifm-link-color)",fontFamily:"var(--ifm-font-family-monospace)",padding:8}}," DT_HAS_CHOSEN(prop) ")),(0,l.kt)("div",{style:{paddingLeft:16}},(0,l.kt)("p",null,"\u6d4b\u8bd5\u8bbe\u5907\u6811\u662f\u5426\u6709 /chosen \u8282\u70b9\u3002"),(0,l.kt)("table",null,(0,l.kt)("tr",null,(0,l.kt)("th",{width:"12%"},"\u53c2\u6570"),(0,l.kt)("td",null,(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"prop")," - \u8bbe\u5907\u6811\u5c5e\u6027\u540d\u79f0\uff0c\u4ee5\u5c0f\u5199\u4e0e\u4e0b\u5212\u7ebf\u5f62\u5f0f\u8868\u793a")))),(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u8fd4\u56de\u503c"),(0,l.kt)("td",null,"\u5982\u679c\u6240\u9009\u5c5e\u6027\u5b58\u5728\u5e76\u5f15\u7528\u4e00\u4e2a\u8282\u70b9\uff0c\u5219\u4e3a 1\uff0c\u5426\u5219\u4e3a 0")))),(0,l.kt)("p",null,"\u4e5f\u6709\u4e00\u4e9b\u4fbf\u6377 API \u7528\u4e8e\u8bbf\u95ee ",(0,l.kt)("inlineCode",{parentName:"p"},"/chosen")," \u8282\u70b9\u7684\u5e38\u7528 zephyr \u7279\u5b9a\u5c5e\u6027\u3002"),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u8bf7\u53c2\u8003 Zephyr \u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://zephyr-docs.listenai.com/doxygen/html/group__devicetree-generic-chosen.html"},"Chosen nodes"),"  \u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"group devicetree-zephyr")," \u3002"))),(0,l.kt)("h2",{id:"zephyr-\u7279\u5b9a\u7684\u9009\u5b9a\u8282\u70b9"},"Zephyr \u7279\u5b9a\u7684\u9009\u5b9a\u8282\u70b9"),(0,l.kt)("p",null,"\u4e0b\u8868\u8bb0\u5f55\u4e86\u4e00\u4e9b\u5e38\u7528\u7684 Zephyr \u7279\u5b9a\u7684\u9009\u5b9a\u8282\u70b9\u3002"),(0,l.kt)("p",null,"\u6709\u65f6\uff0c\u4e00\u4e2a\u9009\u5b9a\u8282\u70b9\u7684\u6807\u7b7e (label) \u5c5e\u6027\u5c06\u8bbe\u4e3a\u67d0\u4e2a Kconfig \u9009\u9879\u7684\u9ed8\u8ba4\u503c\uff0c\u8be5\u9009\u9879\u53cd\u8fc7\u6765\u914d\u7f6e\u7279\u5b9a\u4e8e\u786c\u4ef6\u7684\u8bbe\u5907\u3002\u8fd9\u901a\u5e38\u662f\u4e3a\u4e86\u5411\u540e\u517c\u5bb9\uff0c\u56e0\u4e3a Kconfig \u9009\u9879\u7684\u652f\u6301\u53ef\u80fd\u65e9\u4e8e Zephyr \u4e2d\u7684\u8bbe\u5907\u6811\u3002\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8e\u6ca1\u6709 Kconfig \u9009\u9879\u7684\u573a\u666f\uff0c\u6e90\u7801\u4e2d\u76f4\u63a5\u4f7f\u7528\u8bbe\u5907\u6811\u8282\u70b9\u6765\u9009\u62e9\u8bbe\u5907\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property \u5c5e\u6027"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose \u76ee\u7684"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,bt-c2h-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u9009\u62e9\u7528\u4e8e ",(0,l.kt)("a",{parentName:"td",href:"https://docs.zephyrproject.org/latest/samples/bluetooth/hci_uart/README.html#bluetooth-hci-uart-sample"},"\u84dd\u7259: HCI UART")," \u4e2d\u7684\u4e3b\u673a\u901a\u4fe1\u7684 UART")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,bt-mon-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u7528\u4e8e\u84dd\u7259\u76d1\u89c6\u5668\u65e5\u5fd7\u8bb0\u5f55 (Bluetooth monitor logging) \u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,bt-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u84dd\u7259\u4f7f\u7528\u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,canbus"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u9ed8\u8ba4 CAN \u63a7\u5236\u5668")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,ccm"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5185\u6838\u8026\u5408\u5185\u5b58 (Core-Coupled Memory) \u8282\u70b9\uff0c\u901a\u5e38\u5728\u67d0\u4e9b STM32 SoC \u4e0a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,code-partition"),(0,l.kt)("td",{parentName:"tr",align:null},"Zephyr \u955c\u50cf\u4e2d\u7684\u6587\u672c\u533a\u57df\u5e94\u94fe\u63a5\u5230\u7684 Flash \u5206\u533a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,console"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e console \u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,display"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u9ed8\u8ba4\u7684\u663e\u793a\u63a7\u5236\u5668")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,dtcm"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6570\u636e\u7d27\u5bc6\u8026\u5408\u5185\u5b58 (Data Tightly Coupled Memory) \u8282\u70b9\uff0c\u901a\u5e38\u5728\u67d0\u4e9b Arm SoC \u4e0a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,entropy"),(0,l.kt)("td",{parentName:"tr",align:null},"\u53ef\u7528\u4f5c\u7cfb\u7edf\u8303\u56f4 ",(0,l.kt)("em",{parentName:"td"},"\u71b5")," \u6e90\u7684\u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,flash"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u8282\u70b9\uff0c\u5176 ",(0,l.kt)("inlineCode",{parentName:"td"},"reg")," \u6709\u65f6\u7528\u4e8e\u8bbe\u7f6e ",(0,l.kt)("a",{parentName:"td",href:"https://docs.zephyrproject.org/latest/kconfig.html#CONFIG_FLASH_BASE_ADDRESS"},(0,l.kt)("inlineCode",{parentName:"a"},"CONFIG_FLASH_BASE_ADDRESS"))," \u548c ",(0,l.kt)("a",{parentName:"td",href:"https://docs.zephyrproject.org/latest/kconfig.html#CONFIG_FLASH_SIZE"},(0,l.kt)("inlineCode",{parentName:"a"},"CONFIG_FLASH_SIZE"))," \u7684\u9ed8\u8ba4\u503c")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,flash-controller"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"zephyr,flash")," \u8282\u70b9\u7684 flash \u63a7\u5236\u5668\u8bbe\u5907\u5bf9\u5e94\u7684\u8282\u70b9")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,ipc"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7531 OpenAMP \u5b50\u7cfb\u7edf\u7528\u4e8e\u6307\u5b9a\u8fdb\u7a0b\u95f4\u901a\u4fe1 (IPC) \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,ipc","_","shm"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u7531 OpenAMP \u5b50\u7cfb\u7edf\u4f7f\u7528\u7684\u8282\u70b9\uff0c\u5176 ",(0,l.kt)("inlineCode",{parentName:"td"},"reg")," \u7528\u4e8e\u786e\u5b9a\u53ef\u7528\u4e8e\u8fdb\u7a0b\u95f4\u901a\u4fe1 (IPC) \u7684\u5171\u4eab\u5185\u5b58 (SHM) \u7684\u8d77\u59cb\u5730\u5740\u548c\u5927\u5c0f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,itcm"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6307\u4ee4\u7d27\u8026\u5408\u5185\u5b58 (Instruction Tightly Coupled Memory) \u8282\u70b9\uff0c\u901a\u5e38\u5728\u67d0\u4e9b Arm SoC \u4e0a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,ocm"),(0,l.kt)("td",{parentName:"tr",align:null},"Xilinx Zynq-7000 \u548c ZynqMP SoC \u4e0a\u7684\u677f\u8f7d\u5185\u5b58\u8282\u70b9")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,osdp-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e OSDP \u5b50\u7cfb\u7edf\u4f7f\u7528\u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,ot-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7531 OpenThread \u7528\u4e8e\u4e3a Spinel \u534f\u8bae\u6307\u5b9a UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,pcie-controller"),(0,l.kt)("td",{parentName:"tr",align:null},"PCIe \u63a7\u5236\u5668\u5bf9\u5e94\u7684\u8282\u70b9")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,ppp-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e PPP \u4f7f\u7528\u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,settings-partition"),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fa\u5b9a\u5206\u533a\u8282\u70b9\u3002\u5982\u679c\u5df2\u5b9a\u4e49\uff0c\u5219\u6b64\u5206\u533a\u5c06\u63d0\u4f9b NVS \u548c FCB \u8bbe\u7f6e\u540e\u7aef\u4f7f\u7528\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,shell-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u4e32\u884c shell \u540e\u7aef\u4f7f\u7528\u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,sram"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u8282\u70b9\uff0c\u5176 ",(0,l.kt)("inlineCode",{parentName:"td"},"reg")," \u8bbe\u7f6e Zephyr \u955c\u50cf\u53ef\u7528\u7684 SRAM \u5185\u5b58\u7684\u8d77\u59cb\u5730\u5740\u548c\u5927\u5c0f\uff0c\u5728\u94fe\u63a5\u671f\u95f4\u751f\u6548")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,tracing-uart"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u8ddf\u8e2a (tracing) \u5b50\u7cfb\u7edf\u4f7f\u7528\u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,uart-mcumgr"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://docs.zephyrproject.org/latest/services/device_mgmt/index.html#device-mgmt"},"\u8bbe\u5907\u7ba1\u7406")," \u6240\u7528\u7684 UART")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,uart-pipe"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u4e32\u884c\u7ba1\u9053\u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684 UART \u8bbe\u5907")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zephyr,usb-device"),(0,l.kt)("td",{parentName:"tr",align:null},"USB \u8bbe\u5907\u8282\u70b9\u3002\u5982\u679c\u5df2\u5b9a\u4e49\u4e14\u5177\u6709 ",(0,l.kt)("inlineCode",{parentName:"td"},"vbus-gpios")," \u5c5e\u6027\uff0cUSB \u5b50\u7cfb\u7edf\u5c06\u4f7f\u7528\u5b83\u4eec\u6765\u542f\u7528/\u7981\u7528 VBUS")))))}k.isMDXComponent=!0}}]);