<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">产测开发 | 聆思文档中心</title><meta data-react-helmet="true" property="og:url" content="https://github.com/LISTENAI/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/factory_config"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="产测开发 | 聆思文档中心"><meta data-react-helmet="true" name="description" content="1.说明"><meta data-react-helmet="true" property="og:description" content="1.说明"><link data-react-helmet="true" rel="shortcut icon" href="/docs-csk6/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/LISTENAI/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/factory_config"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/factory_config" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/factory_config" hreflang="x-default"><link rel="stylesheet" href="/docs-csk6/assets/css/styles.e821b6b0.css">
<link rel="preload" href="/docs-csk6/assets/js/runtime~main.fc853d62.js" as="script">
<link rel="preload" href="/docs-csk6/assets/js/main.9db9ee6c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_vO2r">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a><a class="navbar__item navbar__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a><a class="navbar__item navbar__link" href="/docs-csk6/tools/LStudio">工具</a><a class="navbar__item navbar__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a><a class="navbar__item navbar__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs-csk6/faq/faq">FAQ</a><a class="navbar__item navbar__link" href="/docs-csk6/school/school">视频课程</a><a class="navbar__item navbar__link" href="/docs-csk6/workorder/workorder">工单</a><div class="react-toggle displayOnlyInLargeViewport_a-w0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_8pH0"><img src="/docs-csk6/img/light.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/unlight.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div><div class="react-toggle-track-x"><span class="toggle_8pH0"><img src="/docs-csk6/img/undark.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/dark.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/tools/LStudio">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/faq/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/school/school">视频课程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/workorder/workorder">工单</a></li></ul></div></div></div></nav><nav class="navbar subnavbar--fixed-top sub-navbar"><div class="navbar__inner subnavbar__inner"><div class="navbar__items"><a aria-current="page" class="subnavbar__item subnavbar__link subnavbar__link--active" dirname="/AIsolution" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">离线语音</a><a class="subnavbar__item subnavbar__link" dirname="/AIsolution" href="/docs-csk6/AIsolution/dsp/readme">离在线语音</a></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_Ol8-"><aside class="docSidebarContainer_UfDv"><div class="sidebar_OMtR"><nav class="menu menu--responsive thin-scrollbar menu_2y2e menuWithAnnouncementBar_Lwkw" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_IcOF" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">快速入门</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">方案介绍</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Quick_start/Quick_start">快速开始</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Quick_start/download_firmware">体验固件下载</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">产品设计</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/design/vui">离线语音交互设计指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/design/vui2">配置唤醒词、命令词、提示语</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">硬件设计</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Hardwaredevelopment/hardware_guide">硬件参考设计</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">算法开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/algorithm/algorithm">CSK 外语资源集成说明</a></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--first menu__link--sublist menu__link--active" type="first" href="#!">软件开发</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" type="" href="#!" tabindex="0">基础开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Basic_development/config_application">源码应用配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Basic_development/config_hardware">芯片引脚功能配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Basic_development/peripheral_config">外围引脚配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Basic_development/public_uart_protocol">CSK UART标准串口通信协议</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Basic_development/audio_transmission">音频传输</a></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--sublist menu__link--active" type="" href="#!" tabindex="0">进阶开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/csk_sdk_demo">CSK SDK开发示例</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/csk_driver_demo">CSK硬件驱动开发示例</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/factory_config">产测开发</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/software_material">开发资料下载</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">调优测试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Optimization_and_testing/optimize_skills">命令词阈值调节技巧</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Optimization_and_testing/test">实验室语音效果测试指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Optimization_and_testing/auto_optimize">入门调优与自动调优</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Optimization_and_testing/abnormalcheck">效果测试异常排查</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/Optimization_and_testing/test_material">效果测试相关资料下载</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/AIsolution/ESR/FAQ/faq">常见问题</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_dRYS"><div class="container padding-top--md padding-bottom--lg center-container"><div class="row"><div class="col docItemCol_+xOG"><div class="docItemContainer_c+5G"><article><div class="markdown"><header><h1 class="h1Heading_5RMM">产测开发</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="1说明"></a>1.说明<a class="hash-link" href="#1说明" title="Direct link to heading">#</a></h2><p>CSK4002 产测模式可以对 CSK4002 核心模组进行基本硬件检测。产测代码和正常代码集成在一个固件里面，CSK4002 芯片上电后通过判断产测触发引脚的状态来决定进入产测或正常运行。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="2产测项"></a>2.产测项<a class="hash-link" href="#2产测项" title="Direct link to heading">#</a></h2><p>CSK芯片检测分为音频检测和硬件连通性检测。</p><ol><li><p>音频检测：包括以下两条通路：</p><ul><li>录音通路：MIC 音频经过 ADC 到 CSK 芯片的音频通路</li><li>播音通路：CSK 芯片通过 SPK 播放音频的通路</li></ul></li><li><p>硬件连通性检测：包含 GPIO 的连通性检测。</p></li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><code>4002离线语音方案</code>与<code>3002离线语音方案</code>产测项有所不同</p><ul><li><p><code>4002音频检测</code>：包括MIC频率检测结果，MIC一致性检测结果，REF 信号检测结果。</p></li><li><p><code>3002音频检测</code>：包括MIC频率检测结果，MIC一致性检测结果。</p></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="3产测配置"></a>3.产测配置<a class="hash-link" href="#3产测配置" title="Direct link to heading">#</a></h2><p>提供了可供用户配置的产测配置，来适应不同的产测需求。</p><p><code>hardware.lini</code>：可通过该硬件配置文件，配置产测涉及的芯片硬件引脚，如：</p><ul><li>产测触发引脚</li><li>音频检测结果输出引脚</li><li>和其他 GPIO 引脚</li></ul><p><code>application.lini</code>：可通过该软件配置文件，配置产测涉及的产测开关和触发电平，如：</p><ul><li>产测检测开关</li><li>产测触发有效电平</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="31-hardwarelini"></a>3.1 hardware.lini<a class="hash-link" href="#31-hardwarelini" title="Direct link to heading">#</a></h3><p><code>hardware.lini</code> 文件的<code>factory_gpio</code>字段就是产测引脚的硬件配置，包含下表 3 个字段:</p><table><thead><tr><th>引脚分类</th><th>说明</th></tr></thead><tbody><tr><td><code>check_enter</code></td><td>产测模式触发检测引脚：通过检测此引脚的电平来决定是否进入产测模式；只能配 1 个引脚，只能为输入</td></tr><tr><td><code>check_record</code></td><td>音频检测结果输出引脚：用来输出音频检测结果（依次为 MIC频率检测结果，MIC一致性检测结果，REF 信号检测结果）；只能配 3 个引 脚，只能为输出</td></tr><tr><td><code>check_gpios</code></td><td>GPIO连通性测试引脚：用来检测 GPIO 的硬件连通性，CSK 会控制这些引脚的电平，最多可配置 10 个引脚， 只能为输出</td></tr></tbody></table><p>下面是其中引脚的字段的说明</p><table><thead><tr><th>键名</th><th>键值</th><th>说明</th></tr></thead><tbody><tr><td><code>tag</code></td><td><code>name</code></td><td>pin脚的名字，用户可指定</td></tr><tr><td><code>pin</code></td><td><code>1~64</code></td><td>CSK芯片的引脚，具体参考Datasheet</td></tr><tr><td><code>mux</code></td><td><code>0~4</code></td><td>pin 脚的复用功能</td></tr><tr><td><code>dir</code></td><td><code>true</code><br><code>false</code></td><td>引脚设置为输出<br>引脚设置为输入</td></tr><tr><td><code>def</code></td><td><code>true</code><br><code>false</code></td><td>当引脚设为输出时，输出的逻辑电平为高<br>当pin脚设为输出时，输出的逻辑电平为低</td></tr><tr><td><code>rev</code></td><td><code>true</code><br><code>false</code></td><td>逻辑电平和物理电平一致<br>逻辑电平和物理电平相反</td></tr></tbody></table><p><code>hardware.lini</code> 的<code>factory_gpio</code>字段示例如下：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv js"><pre tabindex="0" class="prism-code language-js codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # 通过此引脚来决定是否进入产测模式；</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # 只能配</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">个引脚；</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # 只能为输入dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_enter</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;enter&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">12</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # 用来输出音频检测结果（依次为 </span><span class="token constant" style="color:rgb(100, 102, 149)">MIC</span><span class="token plain">频率检测结果</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token constant" style="color:rgb(100, 102, 149)">MIC</span><span class="token plain">一致性检测结果</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token constant" style="color:rgb(100, 102, 149)">REF</span><span class="token plain"> 信号检测结果）；只能配</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain">个引脚，只能为输出（dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">）。</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_record</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;record0&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">38</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_record</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;record1&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">47</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_record</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;record2&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">57</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  # 用来检测 </span><span class="token constant" style="color:rgb(100, 102, 149)">GPIO</span><span class="token plain"> 的硬件连通性，</span><span class="token constant" style="color:rgb(100, 102, 149)">CSK</span><span class="token plain"> 控制这些引脚的电平，最多可配置</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain">个引脚，只能为输出（dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">）。</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio0&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">46</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio1&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">42</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio2&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">24</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio3&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">26</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio4&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">35</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio5&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">55</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio6&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">56</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio7&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">59</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory_gpio</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">check_gpios</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tag </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gpio8&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  pin </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">62</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mux </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  def </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rev </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="32-applicationlini"></a>3.2 application.lini<a class="hash-link" href="#32-applicationlini" title="Direct link to heading">#</a></h3><p><code>application.lini</code> 的<code>factory</code>字段包含了<code>产测开关</code>以及<code>产测触发电平</code>的配置，如下图：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv js"><pre tabindex="0" class="prism-code language-js codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">#产测配置</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">factory</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 产测开关，决定上电是否进行产测模式检测。</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">enable </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 注意：只有产测开关打开，才会进行产测模式检查，从而有可能进入产测模式。</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 如果产测开关关闭，即便配置了产测其他字段，流程上实际也不会用到。</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 检查进入产测模式的触发电平条件，</span><span class="token boolean">false</span><span class="token plain">：低电平；</span><span class="token boolean">true</span><span class="token plain">：高电平。</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">check_enter_level </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 预留配置，暂未使用。检测进入产测模式触发电平的延迟时间。</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">check_gpios_delay </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="4量产烧录流程"></a>4.量产烧录流程<a class="hash-link" href="#4量产烧录流程" title="Direct link to heading">#</a></h2><p>量产烧录流程包括CSK烧录器配置指引，烧录器使用指引和固件制作介绍，具体请查看<a href="https://docs.listenai.com/tools/mass_production/readme" target="_blank" rel="noopener noreferrer">量产工具介绍</a>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="5产测流程"></a>5.产测流程<a class="hash-link" href="#5产测流程" title="Direct link to heading">#</a></h2><p>产线烧录流程结束之后，接下来一般会进行产测流程，以管控生产质量。</p><p><code>CSK4002</code>核心模组的产测流程如下：</p><ol><li>上电检测产测触发引脚<code>check_enter</code>，如果检测电平状态为<code>check_enter_level</code>设置的电平，就进入产测模式</li><li>进入产测模式后，打印当前的固件版本</li></ol><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">taskcreate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">log_task</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">00017</span><span class="token plain">cc0</span><span class="token operator" style="color:rgb(212, 212, 212)">~</span><span class="token number" style="color:rgb(181, 206, 168)">0001</span><span class="token plain">bcc0</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">CSK</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">COMMIT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">pub</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">2.0</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token plain">@</span><span class="token number" style="color:rgb(181, 206, 168)">92</span><span class="token plain">d9912</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">CAE@</span><span class="token number" style="color:rgb(181, 206, 168)">3002.</span><span class="token plain">B3001</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">v1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">beta1</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">ESR@</span><span class="token number" style="color:rgb(181, 206, 168)">3002.1210</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">V2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">beta1</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">VER</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">pub</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">2.0</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token plain">@</span><span class="token number" style="color:rgb(181, 206, 168)">92</span><span class="token plain">d9912</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">CID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">C00000001</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">V4658</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">P3143</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">R7468009D00</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><ol start="3"><li>顺序执行产测项<ul><li>音频检测: 通过自播自录，自动通过 SPK 播放音频，同时通过 <code>2 个 MIC</code> 和 <code>回采信号</code> 进行录音<ul><li><p>如果 <code>MIC频率</code> 检测通过，则相应引脚设置为逻辑高，否则为逻辑低</p></li><li><p>如果 <code>MIC一致性</code> 检测通过，则相应引脚设置为逻辑高，否则为逻辑低</p></li><li><p>如果 <code>回采信号</code> 检测通过，则相应引脚设置为逻辑高，否则为逻辑低</p></li><li><p>音频检测完成后，通过<code>日志串口</code>输出<code>音频检测结果</code>和<code>SN</code>号 （以CSK3002音频产测结果为例）</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">Frequency Check</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">PASS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">Two Mic Same</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">PASS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">SN</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">abcd1234</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div></li><li><p>当<code>音频检测结果</code>均为<code>PASS</code>并且<code>SN</code>不为空，认为产测通过，通过串口日志输出最终产测结果</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">########################################</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ######     ##     #####   #####   ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##   ##   ####   ##   ## ##   ##  ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##   ##  ##  ##  ##      ##       ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ######  ##    ##  #####   #####   ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##      ########      ##      ##  ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##      ##    ## ##   ## ##   ##  ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##      ##    ##  #####   #####   ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">########################################</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div></li><li><p>当<code>音频检测结果</code>有一项为<code>FAIL</code>或者<code>SN</code>为空，认为产测失败，通过串口日志输出最终产测结果</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">########################################</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  #######    ##    ######  ##       ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##        ####     ##    ##       ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##       ##  ##    ##    ##       ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  #####   ##    ##   ##    ##       ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##      ########   ##    ##       ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##      ##    ##   ##    ##       ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">##  ##      ##    ## ######  #######  ##</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">########################################</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div></li></ul></li><li>硬件通断性检测: 对<code>check_gpios</code>中配置的GPIO引脚的默认逻辑电平取反</li></ul></li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/Advanced_development/csk_driver_demo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« CSK硬件驱动开发示例</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-csk6/AIsolution/ESR/softwaredevelopment/software_material"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">开发资料下载 »</div></a></div></nav><div class="gitalk-wrapper"><ul class="gitalk-option"><li class="like"><i class="icon like-icon"></i> <span id="like_num">有帮助  0</span></li><li class="unlike"><i class="icon unlike-icon"></i> <span id="unlike_num">没帮助 0</span></li><li>文档反馈</li></ul></div></div></div><div class="col col--3" style="padding-left:0px"><div class="tableOfContents_k96L thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1说明" class="table-of-contents__link">1.说明</a></li><li><a href="#2产测项" class="table-of-contents__link">2.产测项</a></li><li><a href="#3产测配置" class="table-of-contents__link">3.产测配置</a><ul><li><a href="#31-hardwarelini" class="table-of-contents__link">3.1 hardware.lini</a></li><li><a href="#32-applicationlini" class="table-of-contents__link">3.2 application.lini</a></li></ul></li><li><a href="#4量产烧录流程" class="table-of-contents__link">4.量产烧录流程</a></li><li><a href="#5产测流程" class="table-of-contents__link">5.产测流程</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 安徽聆思智能科技有限公司皖ICP备05001217号</div></div></div></footer></div>
<script src="/docs-csk6/assets/js/runtime~main.fc853d62.js"></script>
<script src="/docs-csk6/assets/js/main.9db9ee6c.js"></script>
<script>!function(e,n,s,t,d){e[s]=e[s]||function(){(e[s].a=e[s].a||[]).push(arguments)},(d=n.createElement("script")).async=!0,d.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",n.body.appendChild(d)}(window,document,"simplemde")</script></body>
</html>