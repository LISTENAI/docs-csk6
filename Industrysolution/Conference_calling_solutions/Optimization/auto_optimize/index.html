<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">设备调优 | 聆思文档中心</title><meta data-react-helmet="true" property="og:url" content="https://github.com/LISTENAI/docs-csk6/Industrysolution/Conference_calling_solutions/Optimization/auto_optimize"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="设备调优 | 聆思文档中心"><meta data-react-helmet="true" name="description" content="| 版本 | 变更记录 | 变更人         | 审核 | 时间       |"><meta data-react-helmet="true" property="og:description" content="| 版本 | 变更记录 | 变更人         | 审核 | 时间       |"><link data-react-helmet="true" rel="shortcut icon" href="/docs-csk6/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/LISTENAI/docs-csk6/Industrysolution/Conference_calling_solutions/Optimization/auto_optimize"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/Industrysolution/Conference_calling_solutions/Optimization/auto_optimize" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/docs-csk6/Industrysolution/Conference_calling_solutions/Optimization/auto_optimize" hreflang="x-default"><link rel="stylesheet" href="/docs-csk6/assets/css/styles.e821b6b0.css">
<link rel="preload" href="/docs-csk6/assets/js/runtime~main.9b3f724c.js" as="script">
<link rel="preload" href="/docs-csk6/assets/js/main.8325bd42.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_vO2r">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a><a class="navbar__item navbar__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a><a class="navbar__item navbar__link" href="/docs-csk6/tools/LStudio">工具</a><a class="navbar__item navbar__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a><a class="navbar__item navbar__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs-csk6/faq/faq">FAQ</a><a class="navbar__item navbar__link" href="/docs-csk6/school/school">视频课程</a><a class="navbar__item navbar__link" href="/docs-csk6/workorder/workorder">工单</a><div class="react-toggle displayOnlyInLargeViewport_a-w0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_8pH0"><img src="/docs-csk6/img/light.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/unlight.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div><div class="react-toggle-track-x"><span class="toggle_8pH0"><img src="/docs-csk6/img/undark.svg" alt="" class="themedImage_K3WP themedImage--light_Fy0T"><img src="/docs-csk6/img/dark.svg" alt="" class="themedImage_K3WP themedImage--dark_V9oi"></span></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" titleclassname="navbar__title" href="/docs-csk6/"><img src="/docs-csk6/img/logo_light.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--light_Fy0T navbar__logo"><img src="/docs-csk6/img/logo_dark.svg" alt="LSOpen Logo" class="themedImage_K3WP themedImage--dark_V9oi navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/chips/4002/Chip_information_4002">芯片</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/tools/LStudio">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/AIsolution/ESR/Quick_start/Scheme_introduction">AI语音应用方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">行业Turnkey解决方案</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/faq/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/school/school">视频课程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-csk6/workorder/workorder">工单</a></li></ul></div></div></div></nav><nav class="navbar subnavbar--fixed-top sub-navbar"><div class="navbar__inner subnavbar__inner"><div class="navbar__items"><a class="subnavbar__item subnavbar__link" dirname="/Industrysolution" href="/docs-csk6/Industrysolution/Scanning_pen/Scheme_introduction">扫描笔</a><a class="subnavbar__item subnavbar__link" dirname="/Industrysolution" href="/docs-csk6/Industrysolution/Conference_calling_solutions/Quick_start/Scheme_introduction">会议机</a><a class="subnavbar__item subnavbar__link" dirname="/Industrysolution" href="/docs-csk6/Industrysolution/CloudView_solution/Quick_start/Scheme_introduction">云台</a><a class="subnavbar__item subnavbar__link" dirname="/Industrysolution" href="/docs-csk6/Industrysolution/Posture_solution/Posture_introduction">坐姿检测</a></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_Ol8-"><aside class="docSidebarContainer_UfDv"><div class="sidebar_OMtR"><nav class="menu menu--responsive thin-scrollbar menu_2y2e menuWithAnnouncementBar_Lwkw" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_IcOF" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">快速入门</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/Industrysolution/Conference_calling_solutions/Quick_start/Scheme_introduction">方案介绍</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">硬件设计</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/Industrysolution/Conference_calling_solutions/Hardwaredevelopment/hardware_guide">硬件参考设计</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">新建项目</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/Industrysolution/Conference_calling_solutions/softwaredevelopment/advanced_develep">会议降噪进阶开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/Industrysolution/Conference_calling_solutions/softwaredevelopment/create_project">使用 LISA 创建 4002NC 项目</a></li></ul></li><li class="menu__list-item menu__list-item--current"><a class="menu__link menu__link--first menu__link--sublist menu__link--active" type="first" href="#!">调优指导</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs-csk6/Industrysolution/Conference_calling_solutions/Optimization/auto_optimize">设备调优</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">生产指导</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/Industrysolution/Conference_calling_solutions/mass_production/test_material">研发测试</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--first menu__link--sublist" type="first" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-csk6/Industrysolution/Conference_calling_solutions/FAQ/faq">常见问题</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_dRYS"><div class="container padding-top--md padding-bottom--lg center-container"><div class="row"><div class="col docItemCol_+xOG"><div class="docItemContainer_c+5G"><article><div class="markdown"><header><h1 class="h1Heading_5RMM">设备调优</h1></header><table><thead><tr><th>版本</th><th>变更记录</th><th>变更人</th><th>审核</th><th>时间</th><th></th></tr></thead><tbody><tr><td>V1.0</td><td>初版</td><td>覃晓庆</td><td>唐京</td><td>2021/09/07</td><td></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="1设备调优步骤"></a>1.设备调优步骤<a class="hash-link" href="#1设备调优步骤" title="Direct link to heading">#</a></h3><p><strong>步骤1.硬件结构检查</strong></p><ul><li>震动检查</li></ul><ol><li>设备壳体自身部件间震动（比如螺丝没紧固好）。</li><li>内部线缆部件等震动。</li><li>设备内关键器件是否有软垫防震</li></ol><ul><li><p>气密性检查
检查设备气密性，腔体内是否有漏音。</p></li><li><p>环境检查
调优或测试的时候，避免设备旁边是有大面积硬质物体遮挡反射，或者避免设备在纸张上、旁边有塑料袋。</p></li></ul><p><strong>步骤2.确定speaker音量</strong></p><ul><li>根据客户需求设定喇叭输出音量最大值，可播放1KHZ 0db音频，在0cm距离测量音量分贝。</li></ul><p><strong>步骤3.录音音频检查</strong></p><ul><li>麦克风录音/回采录音
录音幅值：设备最大音自播自录mic录音和回采音频不截幅。</li></ul><p><strong>步骤4.降噪后音频效果确认</strong></p><ul><li>回声消除效果</li><li>自动增益效果</li><li>环境噪声抑制</li></ul><p><strong>参考音频</strong></p><p><a target="_blank" href="/docs-csk6/assets/files/音频示例-be55a2c1330895aa23686ed6792c9709.wav">示例音频下载</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="2如何修改mic增益和回采增益"></a>2.如何修改mic增益和回采增益<a class="hash-link" href="#2如何修改mic增益和回采增益" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">config</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">application</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lini</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>当前增益参数值:</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv json"><pre tabindex="0" class="prism-code language-json codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">adc_gain = </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">参数说明：</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第一个参数，MIC1 增益，有效范围：</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token number" style="color:rgb(181, 206, 168)">-10</span><span class="token plain">（数值越大增益越高，</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> 表示关闭）</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第二个参数，MIC2 增益，有效范围：</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token number" style="color:rgb(181, 206, 168)">-10</span><span class="token plain">（数值越大增益越高，</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> 表示关闭）</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第三个参数，REF1 增益，有效范围：</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token number" style="color:rgb(181, 206, 168)">-10</span><span class="token plain">（数值越大增益越高，</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> 表示关闭）</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第四个参数，REF2 增益，有效范围：</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token number" style="color:rgb(181, 206, 168)">-10</span><span class="token plain">（数值越大增益越高，</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> 表示关闭）</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">在不同设备上调试 MIC 和 REF 增益的时候，设备自播最大声音（激昂音乐或讲话稿）时录音幅值范围：</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">大概保持 mic 录音幅值 -3db~-15db</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">大概保持 ref 录音幅值 -3db~-15db</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">注意：</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">若出现 mic 截幅后者 ref 截幅，效果都会变差；</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">若 mic 录音增益过小，会造成 AGC 压力很大，听感单薄，音量小。</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="3如何对设备进行debug录音分析"></a>3.如何对设备进行debug录音分析<a class="hash-link" href="#3如何对设备进行debug录音分析" title="Direct link to heading">#</a></h3><p><strong>步骤1：准备 Debug 固件</strong> </p><p>对设备进行录音分析，需要烧录 debug 固件。</p><ul><li><p>如何编译 debug 固件？
在4002NC源码根目录下运行 build-uac.bat 脚本进行编译，编译固件包即为 debug 版本固件。</p></li><li><p>按照本文第4章节“4.修改4002NC源码编译后如何放到Lisa项目中打包？”指导完成debug版本固件的烧录。</p></li></ul><p><strong>步骤2：音频分析工具</strong></p><ul><li><p>录音软件：<a href="https://pc.qq.com/detail/0/detail_640.html" target="_blank" rel="noopener noreferrer">Audacity</a></p></li><li><p>音频分析软件：<a href="https://www.onlinedown.net/soft/1157792.htm" target="_blank" rel="noopener noreferrer">Adobe Audition CC</a></p></li></ul><blockquote><p>音频检查可直接通过 <a href="https://pc.qq.com/detail/0/detail_640.html" target="_blank" rel="noopener noreferrer">Audacity </a>，也可以将 Audacity 导出的音频通过 <a href="https://www.onlinedown.net/soft/1157792.htm" target="_blank" rel="noopener noreferrer">Adobe Audition CC</a> 查看。</p></blockquote><p><strong>步骤3：录音</strong></p><p>将检查对象（产品/模组/开发板）通过 USB 连接电脑，使用录音工具进行录音，对录音音频质量进行检查。</p><ul><li><p><strong>将检查对象（产品/模组/开发板）通过 USB 连接电脑;</strong></p></li><li><p><strong>PC 端播放音乐,将调试设备音量调到最大;</strong></p><p><img src="/docs-csk6/assets/images/扬声器-b30a077e602f044f592d0df02f6ecec6.png"></p></li><li><p><strong>打开录音工具 Audacity 并完成配置：</strong></p><p>Audacity 界面配置如图标注，点击录音按钮开始录音。</p><p><img src="/docs-csk6/assets/images/audacity配置-c0f8f627bb575119d7e5fe072353e4e3.png"></p><blockquote><p>选择 Windows WASAPI、
采样率 16000、
录音麦克风和播放设备对应的 Castor Audio，声道为 4。</p></blockquote></li><li><p><strong>录音完成后将音频导出为 wav 格式音频。</strong>
<img src="/docs-csk6/assets/images/导出音频-c6d46b12ca32523d70bf76996885ac0d.png"></p></li></ul><p><strong>步骤4：音频分析</strong>
<strong>将增益调节到参考音频幅值。</strong>
<img src="/docs-csk6/assets/images/音频分析-6479fddf1a076b40056f039468bfbd69.png"></p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv"><pre tabindex="0" class="prism-code language-undefined codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">说明：</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第 1 路为 mic1 信号，信号幅值峰值在-3db~-15db 之间，符合录音幅值要求；</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第 2 路为 mic2 信号，信号幅值峰值在-3db~-15db 之间，符合录音幅值要求；</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第 3 路为 ref2 信号，信号幅值峰值在-3db~-15db 之间，符合录音幅值要求；</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">第 4 路为降噪后信号。是最终输出给上位机的音频。</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="4如何增强agc效果"></a>4.如何增强AGC效果<a class="hash-link" href="#4如何增强agc效果" title="Direct link to heading">#</a></h3><ul><li>AGC增益：</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">m_targetGain </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token plain">_000</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">m_MaxGain </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain">_000</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>调节m_targetGain 和 m_MaxGain，增大agc增益。
m_targetGain 建议不要超过16000；
m_MaxGain 建议不要超过22000。</p><ul><li>AGC放大系数：</li></ul><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv c"><pre tabindex="0" class="prism-code language-c codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">m_AGC_Upbound </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">12</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">m_AGC_Lowbound </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">12</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><p>调节m_AGC_Upbound和m_AGC_Lowbound参数，增大AGC放大倍数。
m_AGC_Upbound 建议不超过12；
m_AGC_Lowbound 建议不超过-12。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="5常见效果问题分析"></a>5.常见效果问题分析<a class="hash-link" href="#5常见效果问题分析" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="51-mic-录音幅值过小"></a>5.1 MIC 录音幅值过小<a class="hash-link" href="#51-mic-录音幅值过小" title="Direct link to heading">#</a></h4><p><strong>音频表现：</strong></p><p>最大音量播放音乐条件下，录制的音频声音幅度过小，听不清楚录音的内容，在 2 米外的人声录音几乎听不清楚。通过录音查看可发现 MIC1，MIC2 的幅度远低于-3db~-15db。</p><p><img src="/docs-csk6/assets/images/mic增益小音频分析-e50b11beac83d94430bbbecaec5f5f9e.png"></p><p><strong>解决方案：</strong></p><p>通过调整 ADC 增益解决。</p><p>调整方向：
增大 mic 增益值。
经过多轮调节测试最终确定将 ADC mic 增益参数调整为：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv json"><pre tabindex="0" class="prism-code language-json codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">    adc_gain = </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="52-mic-录音幅值过大出现截幅"></a>5.2 MIC 录音幅值过大（出现截幅）<a class="hash-link" href="#52-mic-录音幅值过大出现截幅" title="Direct link to heading">#</a></h4><p><strong>音频表现：</strong></p><p>最大音量播放音乐条件下，录音出现截幅现象。</p><p><img src="/docs-csk6/assets/images/mic增过大音频分析-70ef5ed4dff53722d6ca5bb3dc594202.png"></p><p><strong>解决方案：</strong>
调整增益。</p><p>调整方向：
减小 mic 增益值。
经过多轮调节测试最终确定将 ADC mic 增益参数调整为</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv json"><pre tabindex="0" class="prism-code language-json codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">    adc_gain = </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="53-回采录音过小"></a>5.3 回采录音过小<a class="hash-link" href="#53-回采录音过小" title="Direct link to heading">#</a></h4><p><strong>音频表现：</strong></p><p>回采录音信号幅值低于-3db~-15db,且远低于 mic 信号幅值，回采信号幅值过小会影响回声消除效果。</p><p><img src="/docs-csk6/assets/images/ref增过小音频分析-82b41182bb74ac17e2d80ebf7903e2bc.png"></p><p><strong>解决方案：</strong>
调节增益。</p><p>调整方向：
增大 ref 增益值。
经过多轮调节测试最终确定将 ADC ref 增益参数调整为：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv json"><pre tabindex="0" class="prism-code language-json codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">    adc_gain = </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="54-回采录音过大出现截幅"></a>5.4 回采录音过大（出现截幅）<a class="hash-link" href="#54-回采录音过大出现截幅" title="Direct link to heading">#</a></h4><p><strong>音频表现：</strong></p><p>最大音量播放音乐条件下，回采录音信号幅值高于-3db~-15db,并出现截幅。</p><p><img src="/docs-csk6/assets/images/ref增过大音频分析-b0afdfd507518efc4654d2db4a35ec08.png"></p><p><strong>解决方案：</strong>
调整增益。
调整方向：
增大 ref 增益值。
经过多轮调节测试最终确定将 ADC mic 增益参数调整为：</p><div class="codeBlockContainer_9aag"><div class="codeBlockContent_0VPv json"><pre tabindex="0" class="prism-code language-json codeBlock_pSDi thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><div class="codeBlockLines_sq2l"><span class="token-line" style="color:#9CDCFE"><span class="token plain">    adc_gain = </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Q0gn clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="55-音频失真"></a>5.5 音频失真<a class="hash-link" href="#55-音频失真" title="Direct link to heading">#</a></h4><p>音频失真表现：
降噪后音频出现电音、模糊、卡顿等现象，与音源有明显差异。
示例：
音频波形正常，但音频播放模糊不清，存在失真现象。
<a target="_blank" href="/docs-csk6/assets/files/录音异常-1d4595bf35ae1676725eaf0b8ada6f17.wav">示例音频下载</a></p><p>若发现音频失真，请通过工单反馈：<a href="https://open.listenai.com/cloud_project" target="_blank" rel="noopener noreferrer">工单指引</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="56-音频底噪"></a>5.6 音频底噪<a class="hash-link" href="#56-音频底噪" title="Direct link to heading">#</a></h4><p>底噪表现：
安静环境下，录音底噪&gt;-35db,存在明显底噪。</p><p><img src="/docs-csk6/assets/images/底噪大-2522648de867fbf4495598aa0b56eb90.png"></p><p><a target="_blank" href="/docs-csk6/assets/files/录音异常-1d4595bf35ae1676725eaf0b8ada6f17.wav">示例音频下载</a></p><p><strong>底噪来源分析：</strong></p><ul><li>硬件电路底噪
排查方法：拔掉 mic 进行录音测试，如果存在底噪则说明底噪来自硬件电路。</li><li>mic 本身拾音带来底噪
排查方法：排除硬件电路底噪后，mic 原始录音即存在明显底噪，则可判断为 mic 录音底噪。通常由于麦克风灵敏度等问题导致底噪。</li><li>算法处理后产生底噪
排查方法：排除硬件底噪和 mic 本身拾音产生底噪后，音频通过算法处理后有明显底噪，则可判断为算法处理后产生了底噪。</li></ul><blockquote><p>注意事项：
需要在安静环境下进行测试，并排除空调、风扇、固定噪声等音源的影响。</p></blockquote><p><strong>底噪解决方案</strong></p><ul><li>硬件电路导致底噪
排查硬件电路，确定底噪干扰源。</li><li>mic 本身拾音带来底噪
更换优质 mic 解决底噪问题。</li><li>算法产生底噪
请通过工单反馈：<a href="https://open.listenai.com/cloud_project" target="_blank" rel="noopener noreferrer">工单指引</a></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_k6ZT" id="57-回声消除效果差"></a>5.7 回声消除效果差<a class="hash-link" href="#57-回声消除效果差" title="Direct link to heading">#</a></h4><p><strong>回声消除效果差音频表现：</strong></p><p>安静环境下进行录音分析，与标准音频对比，算法处理后音频能明显听到设备自播残留声音。</p><p>示例音频：
<a target="_blank" href="/docs-csk6/assets/files/回声消除效果差-eba386b1902545ec8d6a8195dc8c656d.wav">示例音频下载</a></p><p><strong>解决方案：</strong></p><ul><li>确定 mic 音频和回采音频已经达到幅值参考要求；</li><li>确定 mic 录音音频是否存在失真问题,录音无明显异常；</li><li>确定 ref 音频是否存在失真问题,录音无明显异常；</li><li>以上问题都排除之后问题仍存在，请通过工单反馈：<a href="https://open.listenai.com/cloud_project" target="_blank" rel="noopener noreferrer">工单指引</a>。</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-csk6/Industrysolution/Conference_calling_solutions/softwaredevelopment/create_project"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 使用 LISA 创建 4002NC 项目</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-csk6/Industrysolution/Conference_calling_solutions/mass_production/test_material"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">研发测试 »</div></a></div></nav><div class="gitalk-wrapper"><ul class="gitalk-option"><li class="like"><i class="icon like-icon"></i> <span id="like_num">有帮助  0</span></li><li class="unlike"><i class="icon unlike-icon"></i> <span id="unlike_num">没帮助 0</span></li><li>文档反馈</li></ul></div></div></div><div class="col col--3" style="padding-left:0px"><div class="tableOfContents_k96L thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1设备调优步骤" class="table-of-contents__link">1.设备调优步骤</a></li><li><a href="#2如何修改mic增益和回采增益" class="table-of-contents__link">2.如何修改mic增益和回采增益</a></li><li><a href="#3如何对设备进行debug录音分析" class="table-of-contents__link">3.如何对设备进行debug录音分析</a></li><li><a href="#4如何增强agc效果" class="table-of-contents__link">4.如何增强AGC效果</a></li><li><a href="#5常见效果问题分析" class="table-of-contents__link">5.常见效果问题分析</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 安徽聆思智能科技有限公司皖ICP备05001217号</div></div></div></footer></div>
<script src="/docs-csk6/assets/js/runtime~main.9b3f724c.js"></script>
<script src="/docs-csk6/assets/js/main.8325bd42.js"></script>
<script>!function(e,n,s,t,d){e[s]=e[s]||function(){(e[s].a=e[s].a||[]).push(arguments)},(d=n.createElement("script")).async=!0,d.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",n.body.appendChild(d)}(window,document,"simplemde")</script></body>
</html>